(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){var r;!function(){function n(e,t){"use strict";return new o(e,t).beautify()}function o(e,t){"use strict";var n,r,o,i,a,c,s,l,u,p,f,d,m,y,h,b,g,v,E,_,w,O,S,D,N,R,C="";function T(e,t){var n=0;return e&&(n=e.indentation_level,n+=e.var_line&&e.var_line_reindented?1:0,!A()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:r.length,had_comment:!1,ternary_depth:0}}for(f="\n\r\t ".split(""),d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),b="0123456789".split(""),m="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",m=(m+=" <%= <% %> <?= <? ?>").split(" "),h="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),N={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},D={TK_START_EXPR:function(){z();var e=N.Expression;if("["===o){if("TK_WORD"===a||")"===l.last_text)return W(l.last_text,h)&&(_=!0),V(e),M(),U(),void(R.space_in_paren&&(_=!0));e=N.ArrayLiteral,F(l.mode)&&("["!==l.last_text&&(","!==l.last_text||"]"!==c&&"}"!==c)||R.keep_array_indentation||j())}else"for"===l.last_text?e=N.ForInitializer:W(l.last_text,["if","while"])&&(e=N.Conditional);";"===l.last_text||"TK_START_BLOCK"===a?j():"TK_END_EXPR"===a||"TK_START_EXPR"===a||"TK_END_BLOCK"===a||"."===l.last_text?(k(v),E=!1):"TK_WORD"!==a&&"TK_OPERATOR"!==a?_=!0:"function"===l.last_word||"typeof"===l.last_word?R.jslint_happy&&(_=!0):(W(l.last_text,h)||"catch"===l.last_text)&&R.space_before_conditional&&(_=!0);"("===o&&("TK_EQUALS"!==a&&"TK_OPERATOR"!==a||H()||k());V(e),M(),R.space_in_paren&&(_=!0);U()},TK_END_EXPR:function(){for(;l.mode===N.Statement;)K();"]"===o&&F(l.mode)&&l.multiline_frame&&!R.keep_array_indentation&&j();l.multiline_frame&&k();R.space_in_paren&&("TK_START_EXPR"===a?(P(),_=!1):_=!0);"]"===o&&R.keep_array_indentation?(M(),K()):(K(),M());q(u),l.do_while&&u.mode===N.Conditional&&(u.mode=N.Expression,l.do_block=!1,l.do_while=!1)},TK_START_BLOCK:function(){V(N.BlockStatement);var e=function(e){var t=y,r=n.charAt(t);for(;W(r,f)&&r!==e;){if(++t>=w)return!1;r=n.charAt(t)}return r===e}("}")&&"function"===l.last_word&&"TK_END_EXPR"===a;"expand"===R.brace_style?"TK_OPERATOR"!==a&&(e||"TK_EQUALS"===a||G(l.last_text)&&"else"!==l.last_text)?_=!0:j():"TK_OPERATOR"!==a&&"TK_START_EXPR"!==a?"TK_START_BLOCK"===a?j():_=!0:F(u.mode)&&","===l.last_text&&("}"===c?_=!0:j());M(),U()},TK_END_BLOCK:function(){for(;l.mode===N.Statement;)K();var e="TK_START_BLOCK"===a;"expand"===R.brace_style?e||j():e||(F(l.mode)&&R.keep_array_indentation?(R.keep_array_indentation=!1,j(),R.keep_array_indentation=!0):j());K(),M()},TK_WORD:function(){z()||!v||B(l.mode)||"TK_OPERATOR"===a&&"--"!==l.last_text&&"++"!==l.last_text||"TK_EQUALS"===a||!R.preserve_newlines&&"var"===l.last_text||j();if(l.do_block&&!l.do_while){if("while"===o)return _=!0,M(),_=!0,void(l.do_while=!0);j(),l.do_block=!1}if(l.if_block&&"else"!==o){for(;l.mode===N.Statement;)K();l.if_block=!1}if("case"===o||"default"===o&&l.in_case_statement)return j(),(l.case_body||R.jslint_happy)&&(l.indentation_level>0&&(!l.parent||l.indentation_level>l.parent.indentation_level)&&(l.indentation_level-=1),l.case_body=!1),M(),l.in_case=!0,void(l.in_case_statement=!0);"function"===o&&(l.var_line&&"TK_EQUALS"!==a&&(l.var_line_reindented=!0),(W(l.last_text,["}",";"])||A()&&!W(l.last_text,["{",":","=",","]))&&(function(){if(A()){return 1===r.length||0===r[r.length-2].text.length}return!1}()||l.had_comment||(j(),j(!0))),"TK_WORD"===a?"get"===l.last_text||"set"===l.last_text||"new"===l.last_text||"return"===l.last_text?_=!0:j():"TK_OPERATOR"===a||"="===l.last_text?_=!0:B(l.mode)||j());"TK_COMMA"!==a&&"TK_START_EXPR"!==a&&"TK_EQUALS"!==a&&"TK_OPERATOR"!==a||H()||k();if("function"===o)return M(),void(l.last_word=o);g="NONE","TK_END_BLOCK"===a?W(o,["else","catch","finally"])?"expand"===R.brace_style||"end-expand"===R.brace_style?g="NEWLINE":(g="SPACE",_=!0):g="NEWLINE":"TK_SEMICOLON"===a&&l.mode===N.BlockStatement?g="NEWLINE":"TK_SEMICOLON"===a&&B(l.mode)?g="SPACE":"TK_STRING"===a?g="NEWLINE":"TK_WORD"===a?g="SPACE":"TK_START_BLOCK"===a?g="NEWLINE":"TK_END_EXPR"===a&&(_=!0,g="NEWLINE");W(o,h)&&")"!==l.last_text&&(g="else"===l.last_text?"SPACE":"NEWLINE");if(W(o,["else","catch","finally"]))if("TK_END_BLOCK"!==a||"expand"===R.brace_style||"end-expand"===R.brace_style)j();else{P(!0);var e=r[r.length-1];"}"!==e.text[e.text.length-1]&&j(),_=!0}else"NEWLINE"===g?G(l.last_text)?_=!0:"TK_END_EXPR"!==a?"TK_START_EXPR"===a&&"var"===o||":"===l.last_text||("if"===o&&"else"===l.last_word&&"{"!==l.last_text?_=!0:(l.var_line=!1,l.var_line_reindented=!1,j())):W(o,h)&&")"!==l.last_text&&(l.var_line=!1,l.var_line_reindented=!1,j()):F(l.mode)&&","===l.last_text&&"}"===c?j():"SPACE"===g&&(_=!0);M(),l.last_word=o,"var"===o&&(l.var_line=!0,l.var_line_reindented=!1,l.var_line_tainted=!1);"do"===o&&(l.do_block=!0);"if"===o&&(l.if_block=!0)},TK_SEMICOLON:function(){z()&&(_=!1);for(;l.mode===N.Statement&&!l.if_block&&!l.do_block;)K();M(),l.var_line=!1,l.var_line_reindented=!1,l.mode===N.ObjectLiteral&&(l.mode=N.BlockStatement)},TK_STRING:function(){z()||"TK_WORD"===a?_=!0:"TK_COMMA"===a||"TK_START_EXPR"===a||"TK_EQUALS"===a||"TK_OPERATOR"===a?H()||k():j();M()},TK_EQUALS:function(){l.var_line&&(l.var_line_tainted=!0);_=!0,M(),_=!0},TK_OPERATOR:function(){var e=!0,t=!0;if(G(l.last_text))return _=!0,void M();if("*"===o&&"TK_DOT"===a&&!c.match(/^\d+$/))return void M();if(":"===o&&l.in_case)return l.case_body=!0,U(),M(),j(),void(l.in_case=!1);if("::"===o)return void M();!v||"--"!==o&&"++"!==o||j();W(o,["--","++","!"])||W(o,["-","+"])&&(W(a,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||W(l.last_text,h)||","===l.last_text)?(e=!1,t=!1,";"===l.last_text&&B(l.mode)&&(e=!0),"TK_WORD"===a&&W(l.last_text,h)&&(e=!0),l.mode!==N.BlockStatement&&l.mode!==N.Statement||"{"!==l.last_text&&";"!==l.last_text||j()):":"===o?0===l.ternary_depth?(l.mode===N.BlockStatement&&(l.mode=N.ObjectLiteral),e=!1):l.ternary_depth-=1:"?"===o&&(l.ternary_depth+=1);_=_||e,M(),_=t},TK_COMMA:function(){if(l.var_line)return(B(l.mode)||"TK_END_BLOCK"===a)&&(l.var_line_tainted=!1),l.var_line&&(l.var_line_reindented=!0),M(),void(l.var_line_tainted?(l.var_line_tainted=!1,j()):_=!0);"TK_END_BLOCK"===a&&l.mode!==N.Expression?(M(),l.mode===N.ObjectLiteral&&"}"===l.last_text?j():_=!0):l.mode===N.ObjectLiteral?(M(),j()):(M(),_=!0)},TK_BLOCK_COMMENT:function(){var e,t=function(e){e=e.replace(/\x0d/g,"");var t=[],n=e.indexOf("\n");for(;-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");e.length&&t.push(e);return t}(o),n=!1;j(!1,!0),t.length>1&&function(e,t){for(var n=0;n<e.length;n++){if(x(e[n]).charAt(0)!==t)return!1}return!0}(t.slice(1),"*")&&(n=!0);for(M(t[0]),e=1;e<t.length;e++)j(!1,!0),n?M(" "+x(t[e])):r[r.length-1].text.push(t[e]);j(!1,!0)},TK_INLINE_COMMENT:function(){_=!0,M(),_=!0},TK_COMMENT:function(){v?j(!1,!0):P(!0);_=!0,M(),j(!1,!0)},TK_DOT:function(){G(l.last_text)?_=!0:k(")"===l.last_text&&R.break_chained_methods);M()},TK_UNKNOWN:function(){M(),"\n"===o[o.length-1]&&j()}},R={},void 0!==(t=t||{}).space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(R.brace_style=t.braces_on_own_line?"expand":"collapse"),R.brace_style=t.brace_style?t.brace_style:R.brace_style?R.brace_style:"collapse","expand-strict"===R.brace_style&&(R.brace_style="expand"),R.indent_size=t.indent_size?parseInt(t.indent_size,10):4,R.indent_char=t.indent_char?t.indent_char:" ",R.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,R.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,R.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),R.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,R.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,R.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,R.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,R.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,R.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),R.e4x=void 0!==t.e4x&&t.e4x,t.indent_with_tabs&&(R.indent_char="\t",R.indent_size=1),s="";R.indent_size>0;)s+=R.indent_char,R.indent_size-=1;for(;e&&(" "===e.charAt(0)||"\t"===e.charAt(0));)C+=e.charAt(0),e=e.substring(1);function P(e){if(e=void 0!==e&&e,r.length)for(I(r[r.length-1]);e&&r.length>1&&0===r[r.length-1].text.length;)r.pop(),I(r[r.length-1])}function I(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===s||e.text[e.text.length-1]===C);)e.text.pop()}function x(e){return e.replace(/^\s+|\s+$/g,"")}function A(){return 0===r[r.length-1].text.length}function k(e){if(e=void 0!==e&&e,R.wrap_line_length&&!e){var t=r[r.length-1];t.text.length>0&&t.text.join("").length+o.length+(_?1:0)>=R.wrap_line_length&&(e=!0)}(R.preserve_newlines&&v||e)&&!A()&&(j(!1,!0),F(l.mode)||B(l.mode)||(E=!0))}function j(e,t){if(E=!1,_=!1,!t&&";"!==l.last_text)for(;l.mode===N.Statement&&!l.if_block&&!l.do_block;)K();1===r.length&&A()||!e&&A()||(l.multiline_frame=!0,r.push({text:[]}))}function L(){if(A()){var e=r[r.length-1];if(R.keep_array_indentation&&F(l.mode)&&v){e.text.push("");for(var t=0;t<S.length;t+=1)e.text.push(S[t])}else C&&e.text.push(C),function(e){if(r.length>1){var t=r[r.length-1];l.line_indent_level=e;for(var n=0;n<e;n+=1)t.text.push(s)}}(l.indentation_level+(l.var_line&&l.var_line_reindented?1:0)+(E?1:0))}}function M(e){e=e||o,L(),E=!1,function(){var e=r[r.length-1];if(_&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==s&&e.text.push(" ")}}(),_=!1,r[r.length-1].text.push(e)}function U(){l.indentation_level+=1}function q(e){if(!e.multiline_frame)for(var t,n=e.start_line_index,o=0;n<r.length;)t=r[n],n++,0!==t.text.length&&(o=C&&t.text[0]===C?1:0,t.text[o]===s&&t.text.splice(o,1))}function V(e){l?(p.push(l),u=l):u=T(null,e),l=T(u,e)}function F(e){return e===N.ArrayLiteral}function B(e){return W(e,[N.Expression,N.ForInitializer,N.Conditional])}function K(){p.length>0&&(u=l,l=p.pop())}function H(){return l.mode===N.ObjectLiteral&&":"===l.last_text&&0===l.ternary_depth}function z(){return("do"===l.last_text||"else"===l.last_text&&"if"!==o||"TK_END_EXPR"===a&&(u.mode===N.ForInitializer||u.mode===N.Conditional))&&(k(W(o,["do","for","if","while"])),V(N.Statement),A()&&(U(),E=!1),!0)}function G(e){return W(e,["case","return","do","if","throw","else"])}function W(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function X(){var e;if(O=0,y>=w)return["","TK_EOF"];v=!1,S=[];var t=n.charAt(y);for(y+=1;W(t,f);){if("\n"===t?(O+=1,S=[]):O&&(t===s?S.push(s):"\r"!==t&&S.push(" ")),y>=w)return["","TK_EOF"];t=n.charAt(y),y+=1}if(W(t,d)){if(y<w)for(;W(n.charAt(y),d)&&(t+=n.charAt(y),(y+=1)!==w););if(y!==w&&t.match(/^[0-9]+[Ee]$/)&&("-"===n.charAt(y)||"+"===n.charAt(y))){var o=n.charAt(y);return y+=1,[t+=o+X()[0],"TK_WORD"]}return"in"===t?[t,"TK_OPERATOR"]:[t,"TK_WORD"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var i="",c=!0;if("*"===n.charAt(y)){if((y+=1)<w)for(;y<w&&("*"!==n.charAt(y)||!n.charAt(y+1)||"/"!==n.charAt(y+1))&&(i+=t=n.charAt(y),"\n"!==t&&"\r"!==t||(c=!1),!((y+=1)>=w)););return y+=2,c&&0===O?["/*"+i+"*/","TK_INLINE_COMMENT"]:["/*"+i+"*/","TK_BLOCK_COMMENT"]}if("/"===n.charAt(y)){for(i=t;"\r"!==n.charAt(y)&&"\n"!==n.charAt(y)&&(i+=n.charAt(y),!((y+=1)>=w)););return[i,"TK_COMMENT"]}}if("'"===t||'"'===t||("/"===t||R.e4x&&"<"===t&&n.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_WORD"===a&&G(l.last_text)||"TK_END_EXPR"===a&&W(u.mode,[N.Conditional,N.ForInitializer])||W(a,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var p=t,h=!1,g=!1;if(e=t,y<w)if("/"===p){for(var E=!1;h||E||n.charAt(y)!==p;)if(e+=n.charAt(y),h?h=!1:(h="\\"===n.charAt(y),"["===n.charAt(y)?E=!0:"]"===n.charAt(y)&&(E=!1)),(y+=1)>=w)return[e,"TK_STRING"]}else if(R.e4x&&"<"===p){var _=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,D=n.slice(y-1),C=_.exec(D);if(C&&0===C.index){for(var T=C[2],P=0;C;){var I=!!C[1],A=C[2],k=!!C[C.length-1]||"![CDATA["===A.slice(0,8);if(A!==T||k||(I?--P:++P),P<=0)break;C=_.exec(D)}var j=C?C.index+C[0].length:D.length;return y+=j-1,[D.slice(0,j),"TK_STRING"]}}else for(;h||n.charAt(y)!==p;)if(e+=n.charAt(y),h?("x"!==n.charAt(y)&&"u"!==n.charAt(y)||(g=!0),h=!1):h="\\"===n.charAt(y),(y+=1)>=w)return[e,"TK_STRING"];if(y+=1,e+=p,g&&R.unescape_strings&&(e=function(e){for(var t,n=!1,r="",o=0,i="",a=0;n||o<e.length;)if(t=e.charAt(o),o++,n){if(n=!1,"x"===t)i=e.substr(o,2),o+=2;else{if("u"!==t){r+="\\"+t;continue}i=e.substr(o,4),o+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if((a=parseInt(i,16))>=0&&a<32){r+="x"===t?"\\x"+i:"\\u"+i;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&a<=255)return e;r+=String.fromCharCode(a)}}else"\\"===t?n=!0:r+=t;return r}(e)),"/"===p)for(;y<w&&W(n.charAt(y),d);)e+=n.charAt(y),y+=1;return[e,"TK_STRING"]}if("#"===t){if(1===r.length&&0===r[0].text.length&&"!"===n.charAt(y)){for(e=t;y<w&&"\n"!==t;)e+=t=n.charAt(y),y+=1;return[x(e)+"\n","TK_UNKNOWN"]}var L="#";if(y<w&&W(n.charAt(y),b)){do{L+=t=n.charAt(y),y+=1}while(y<w&&"#"!==t&&"="!==t);return"#"===t||("["===n.charAt(y)&&"]"===n.charAt(y+1)?(L+="[]",y+=2):"{"===n.charAt(y)&&"}"===n.charAt(y+1)&&(L+="{}",y+=2)),[L,"TK_WORD"]}}if("<"===t&&"\x3c!--"===n.substring(y-1,y+3)){for(y+=3,t="\x3c!--";"\n"!==n.charAt(y)&&y<w;)t+=n.charAt(y),y++;return l.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&l.in_html_comment&&"--\x3e"===n.substring(y-1,y+2))return l.in_html_comment=!1,y+=2,["--\x3e","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(W(t,m)){for(;y<w&&W(t+n.charAt(y),m)&&(t+=n.charAt(y),!((y+=1)>=w)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}n=e,w=e.length,a="TK_START_BLOCK",c="",r=[{text:[]}],E=!1,_=!1,S=[],p=[],V(N.BlockStatement),y=0,this.beautify=function(){for(var e,t,n,s;e=X(),o=e[0],"TK_EOF"!==(i=e[1]);){if(n=R.keep_array_indentation&&F(l.mode),v=O>0,n)for(t=0;t<O;t+=1)j(t>0);else if(R.max_preserve_newlines&&O>R.max_preserve_newlines&&(O=R.max_preserve_newlines),R.preserve_newlines&&O>1)for(j(),t=1;t<O;t+=1)j(!0);D[i](),"TK_INLINE_COMMENT"!==i&&"TK_COMMENT"!==i&&"TK_BLOCK_COMMENT"!==i&&"TK_UNKNOWN"!==i&&(c=l.last_text,a=i,l.last_text=o),l.had_comment="TK_INLINE_COMMENT"===i||"TK_COMMENT"===i||"TK_BLOCK_COMMENT"===i}s=r[0].text.join("");for(var u=1;u<r.length;u++)s+="\n"+r[u].text.join("");return s=s.replace(/[\r\n ]+$/,"")}}void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},210:function(e,t){var n=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e,t,n,r){t&&(n(e={a:t,d:e}),r.push.apply(r,e.e))}function t(t,r){var o,i={};!function(){for(var e=t.concat(r),a=[],c={},s=0,l=e.length;s<l;++s){var u=e[s],p=u[3];if(p)for(var f=p.length;--f>=0;)i[p.charAt(f)]=u;p=""+(u=u[1]),c.hasOwnProperty(p)||(a.push(u),c[p]=n)}a.push(/[\S\s]/),o=function(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=p[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),o=(e=[],[]),i="^"===r[0],a=i?1:0,c=r.length;a<c;++a){var s=r[a];if(/\\[bdsw]/i.test(s))e.push(s);else{var l;s=t(s);a+2<c&&"-"===r[a+1]?(l=t(r[a+2]),a+=2):l=s,o.push([s,l]),l<65||s>122||(l<65||s>90||o.push([32|Math.max(65,s),32|Math.min(l,90)]),l<97||s>122||o.push([-33&Math.max(97,s),-33&Math.min(l,122)]))}}for(o.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]})),r=[],s=[NaN,NaN],a=0;a<o.length;++a)(c=o[a])[0]<=s[1]+1?s[1]=Math.max(s[1],c[1]):r.push(s=c);for(o=["["],i&&o.push("^"),o.push.apply(o,e),a=0;a<r.length;++a)c=r[a],o.push(n(c[0])),c[1]>c[0]&&(c[1]+1>c[0]&&o.push("-"),o.push(n(c[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],c=0,s=0;c<n;++c){var l=t[c];"("===l?++s:"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=s&&(o[l]=-1)}for(c=1;c<o.length;++c)-1===o[c]&&(o[c]=++i);for(s=c=0;c<n;++c)"("===(l=t[c])?void 0===o[++s]&&(t[c]="(?:"):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=s&&(t[c]="\\"+o[s]);for(s=c=0;c<n;++c)"^"===t[c]&&"^"!==t[c+1]&&(t[c]="");if(e.ignoreCase&&a)for(c=0;c<n;++c)e=(l=t[c]).charAt(0),l.length>=2&&"["===e?t[c]=r(l):"\\"!==e&&(t[c]=l.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return t.join("")}for(var i=0,a=!1,c=!1,s=0,l=e.length;s<l;++s){var u=e[s];if(u.ignoreCase)c=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0,c=!1;break}}var p={b:8,t:9,n:10,v:11,f:12,r:13},f=[];for(s=0,l=e.length;s<l;++s){if((u=e[s]).global||u.multiline)throw Error(""+u);f.push("(?:"+o(u)+")")}return RegExp(f.join("|"),c?"gi":"g")}(a)}();var c=r.length;return function t(n){for(var s=n.d,l=[s,"pln"],u=0,p=n.a.match(o)||[],f={},d=0,m=p.length;d<m;++d){var y,h=p[d],b=f[h],g=void 0;if("string"==typeof b)y=!1;else{var v=i[h.charAt(0)];if(v)g=h.match(v[1]),b=v[0];else{for(y=0;y<c;++y)if(v=r[y],g=h.match(v[1])){b=v[0];break}g||(b="pln")}!(y=b.length>=5&&"lang-"===b.substring(0,5))||g&&"string"==typeof g[1]||(y=!1,b="src"),y||(f[h]=b)}if(v=u,u+=h.length,y){y=g[1];var E=h.indexOf(y),_=E+y.length;g[2]&&(E=(_=h.length-g[2].length)-y.length),b=b.substring(5),e(s+v,h.substring(0,E),t,l),e(s+v+E,y,a(b,y),l),e(s+v+_,h.substring(_),t,l)}else l.push(s+v,b)}n.e=l}}function r(e){var r=[],o=[];e.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,n,"'\""]):e.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,n,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,n,"\"'"]),e.verbatimStrings&&o.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,n]);var i=e.hashComments;return i&&(e.cStyleComments?(i>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,n,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,n,"#"]),o.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,n])):r.push(["com",/^#[^\n\r]*/,n,"#"])),e.cStyleComments&&(o.push(["com",/^\/\/[^\n\r]*/,n]),o.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,n])),e.regexLiterals&&o.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(i=e.types)&&o.push(["typ",i]),(e=(""+e.keywords).replace(/^ | $/g,"")).length&&o.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),n]),r.push(["pln",/^\s+/,n," \r\n\t "]),o.push(["lit",/^@[$_a-z][\w$@]*/i,n],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,n],["pln",/^[$_a-z][\w$@]*/i,n],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,n,"0123456789"],["pln",/^\\[\S\s]?/,n],["pun",/^.[^\s\w"-$'./@\\`]*/,n]),t(r,o)}function o(e,t){function r(e){switch(e.nodeType){case 1:if(a.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(l){var t=e.nodeValue,n=t.match(c);if(n){var i=t.substring(0,n.index);e.nodeValue=i,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(s.createTextNode(t),e.nextSibling),o(e),i||e.parentNode.removeChild(e)}}}}function o(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var t;for(e=function e(t,n){var r=n?t.cloneNode(!1):t;if(o=t.parentNode){var o=e(o,1),i=t.nextSibling;o.appendChild(r);for(var a=i;a;a=i)i=a.nextSibling,o.appendChild(a)}return r}(e.nextSibling,0);(t=e.parentNode)&&1===t.nodeType;)e=t;u.push(e)}var i,a=/(?:^|\s)nocode(?:\s|$)/,c=/\r\n?|\n/,s=e.ownerDocument;e.currentStyle?i=e.currentStyle.whiteSpace:window.getComputedStyle&&(i=s.defaultView.getComputedStyle(e,n).getPropertyValue("white-space"));var l=i&&"pre"===i.substring(0,3);for(i=s.createElement("LI");e.firstChild;)i.appendChild(e.firstChild);for(var u=[i],p=0;p<u.length;++p)r(u[p]);t===(0|t)&&u[0].setAttribute("value",t);var f=s.createElement("OL");f.className="linenums";for(var d=Math.max(0,t-1|0)||0,m=(p=0,u.length);p<m;++p)(i=u[p]).className="L"+(p+d)%10,i.firstChild||i.appendChild(s.createTextNode(" ")),f.appendChild(i);e.appendChild(f)}function i(e,t){for(var n=t.length;--n>=0;){var r=t[n];g.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):g[r]=e}}function a(e,t){return e&&g.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),g[e]}function c(e){var t=e.g;try{var r=(u=function(e){var t,r=/(?:^|\s)nocode(?:\s|$)/,o=[],i=0,a=[],c=0;e.currentStyle?t=e.currentStyle.whiteSpace:window.getComputedStyle&&(t=document.defaultView.getComputedStyle(e,n).getPropertyValue("white-space"));var s=t&&"pre"===t.substring(0,3);return function e(t){switch(t.nodeType){case 1:if(r.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);"BR"!==(n=t.nodeName)&&"LI"!==n||(o[c]="\n",a[c<<1]=i++,a[c++<<1|1]=t);break;case 3:case 4:(n=t.nodeValue).length&&(n=s?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[c]=n,a[c<<1]=i,i+=n.length,a[c++<<1|1]=t)}}(e),{a:o.join("").replace(/\n$/,""),c:a}}(e.h)).a;e.a=r,e.c=u.c,e.d=0,a(t,r)(e);var o,i,c=/\bMSIE\b/.test(navigator.userAgent),s=(t=/\n/g,e.a),l=s.length,u=0,p=e.c,f=p.length,d=(r=0,e.e),m=d.length;e=0;for(d[m]=l,i=o=0;i<m;)d[i]!==d[i+2]?(d[o++]=d[i++],d[o++]=d[i++]):i+=2;for(m=o,i=o=0;i<m;){for(var y=d[i],h=d[i+1],b=i+2;b+2<=m&&d[b+1]===h;)b+=2;d[o++]=y,d[o++]=h,i=b}for(d.length=o;r<f;){var g,v=p[r+2]||l,E=d[e+2]||l,_=(b=Math.min(v,E),p[r+1]);if(1!==_.nodeType&&(g=s.substring(u,b))){c&&(g=g.replace(t,"\r")),_.nodeValue=g;var w=_.ownerDocument,O=w.createElement("SPAN");O.className=d[e+1];var S=_.parentNode;S.replaceChild(O,_),O.appendChild(_),u<v&&(p[r+1]=_=w.createTextNode(s.substring(b,v)),S.insertBefore(_,O.nextSibling))}(u=b)>=v&&(r+=2),u>=E&&(e+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var s,l,u=[s=[[l=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[s,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],f=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[l,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],m=[l,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],y=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,h=/\S/,b=r({keywords:[u,f,s=[s,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+d,m,l=[l,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),g={};i(b,["default-code"]),i(t([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),i(t([["pln",/^\s+/,n," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,n,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),i(t([],[["atv",/^[\S\s]+/]]),["uq.val"]),i(r({keywords:u,hashComments:!0,cStyleComments:!0,types:y}),["c","cc","cpp","cxx","cyc","m"]),i(r({keywords:"null,true,false"}),["json"]),i(r({keywords:f,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:y}),["cs"]),i(r({keywords:p,cStyleComments:!0}),["java"]),i(r({keywords:l,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),i(r({keywords:d,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),i(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),i(r({keywords:m,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),i(r({keywords:s,cStyleComments:!0,regexLiterals:!0}),["js"]),i(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),i(t([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&o(r,n),c({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(e){for(var t=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],i=0;i<t.length;++i)for(var a=0,s=t[i].length;a<s;++a)r.push(t[i][a]);t=n;var l=Date;l.now||(l={now:function(){return+new Date}});var u=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function t(){for(var n=window.PR_SHOULD_USE_CONTINUATION?l.now()+250:1/0;u<r.length&&l.now()<n;u++){var i=r[u];if((a=i.className).indexOf("prettyprint")>=0){var a,s,f;if(f=!(a=a.match(p))){for(var d=void 0,m=(f=i).firstChild;m;m=m.nextSibling){var y=m.nodeType;d=1===y?d?f:m:3===y&&h.test(m.nodeValue)?f:d}f=(s=d===f?void 0:d)&&"CODE"===s.tagName}for(f&&(a=s.className.match(p)),a&&(a=a[1]),f=!1,d=i.parentNode;d;d=d.parentNode)if(("pre"===d.tagName||"code"===d.tagName||"xmp"===d.tagName)&&d.className&&d.className.indexOf("prettyprint")>=0){f=!0;break}f||((f=!!(f=i.className.match(/\blinenums\b(?::(\d+))?/))&&(!f[1]||!f[1].length||+f[1]))&&o(i,f),c({g:a,h:i,i:f}))}}u<r.length?setTimeout(t,250):e&&e()}()},window.PR={createSimpleLexer:t,registerLangHandler:i,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()},324:function(e,t,n){n(325),n(356),n(359),n(361),n(393),n(396),n(407),e.exports=n(625)},435:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},602:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){},616:function(e,t,n){},617:function(e,t,n){},618:function(e,t,n){},619:function(e,t,n){},620:function(e,t,n){},621:function(e,t,n){},622:function(e,t,n){},623:function(e,t,n){},624:function(e,t,n){},625:function(e,t,n){"use strict";n.r(t);var r=n(84),o=n.n(r),i={root:"/",version:"1.0",host:"../",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","replication-user-password-auth-label":"Username and password","replication-username-input-placeholder":"Username","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match.","create-db-partitioned-help":"A partitioned database requires a partition key for every document, where the document _id format is '&lt;partition_key&gt;:&lt;doc_key&gt;'. A partition is a logical grouping of documents. Partition queries are often faster than global ones."}}},a=n(9),c=n.n(a),s={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard",MEMBERSHIP:"./docs/cluster/nodes.html"}},l=n(215),u=n.n(l),p={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a=e;if(e)for(var c;c=o.exec(a);)n[i(c[1])]=i(c[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},queryParams:function(e){return u()(e)},queryString:function(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),u()(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===p.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+p.safeURLName(t)}return p.safeURLName(e)},localStorageSet:function(e,t){(c.a.isObject(t)||c.a.isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(c.a.has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}},f=p,d=n(68),m=n.n(d),y=n(216),h=n.n(y),b=(n(248),n(313)),g=(n(425),new b.Subject),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,Object(a.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"})).then((function(e){return g.next(e),n.raw?e:e.json()}))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(e,"GET",t)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(e,"DELETE",t)},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),v(e,"POST",n)},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),v(e,"PUT",n)},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v(e,t,Object(a.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))},N={};N.removeSpecialCharacters=f.removeSpecialCharacters,N.safeURL=f.safeURLName,N.imageUrl=function(e){return e},N.getDocUrl=function(e){return c.a.has(s.DOC_URLS,e)?s.DOC_URLS[e]:"#"},N.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var r=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<r.length;)o+=1,e/=1024;return e.toFixed(t)+" "+r[o-1]},N.formatDate=function(e){return m()(e,"X").format("MMM Do, h:mm:ss a")},N.getDateFromNow=function(e){return m()(e,"X").fromNow()},N.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},N.getApiUrl=function(e){return i.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),h.a.resolve(window.location.href,i.host+e)},N.getServerUrl=function(e){return i.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),i.host+e},N.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return h.a.resolve(t+n,i.host)},N.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=N.getServerUrl("/_uuids?count=".concat(e));return E(t)},N.isIE1X=function(){return 11==document.documentMode||10==document.documentMode};var R=N,C=n(20),T=n.n(C);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){A.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){A.reduxDispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){A.reduxDispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=x({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),A.reduxDispatch&&A.reduxDispatch({type:"ADD_NOTIFICATION",options:{info:e}})},showPermanentNotification:function(e){A.reduxDispatch({type:"SHOW_PERMANENT_NOTIFICATION",options:{msg:e}})},config:function(e){return c.a.extend(this,e)},Deferred:function(){return $.Deferred()},when:function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},addonExtensions:{initialize:function(){},RouteObjects:{},Views:{}},addon:function(e){return c.a.extend(c.a.clone(A.addonExtensions),e)}};A.View=T.a.View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var k={fetchOnce:function(e){var t=c.a.extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};A.Model=T.a.Model.extend({}),A.Collection=T.a.Collection.extend({}),c.a.each([A.Model,A.Collection],(function(e){c.a.extend(e.prototype,k)}));var j=c.a.extend({},T.a.Events);A.registerExtension=function(e,t){j[e]||(j[e]=[]),j.trigger("add:"+e,t),j[e].push(t)},A.unRegisterExtension=function(e){var t=j[e];t&&(j.trigger("remove:"+e,t),delete j[e])},A.getExtensions=function(e){var t=j[e];return t||(t=[]),t},A.removeExtensionItem=function(e,t,n){var r=j[e];if(r){var o=arguments[arguments.length-1];c.a.isObject(t)&&!n&&(o=function(e){return c.a.isEqual(e,t)}),r=c.a.filter(r,(function(e){return!o(e)})),j[e]=r,j.trigger("removeItem:"+e,t)}},A.extensions=j,A.setSession=function(e){A.session=e},A.reducers={},A.addReducers=function(e){A.reducers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A.reducers,{},e)},A.middlewares=[],A.addMiddleware=function(e){e&&"function"==typeof e&&A.middlewares.push(e)};var L=A,M=n(95),U=n.n(M),q=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},V=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&L.navigate("/login?urlback=".concat(e),{replace:!0}),L.navigate("/login",{replace:!0})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new U.a((function(t,n){return L.session.getSession().then((function(){q(L.session,e)?t():n()})).catch((function(e){n(e),V()}))}))},B={},K=T.a.Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){B[e]=t},removeBeforeUnload:function(e){delete B[e]},navigate:function(e,t){var n=!0,r=c.a.find(c.a.map(B,(function(e){return e()})),(function(e){if(e)return!0}));if(r&&(n=window.confirm(r)),t&&t.redirect)return window.location=e;n&&(T.a.Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach((function(r){t.route(r,r.toString(),(function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=e.prototype.getRouteRoles(r);F(c).then((function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(r)||(n.activeRouteObject=new e(r,i));var o=n.activeRouteObject.routeCallback(r,i);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:o,roles:c,route:r.toString()},n.trigger("new-component",t.currentRouteOptions)}),(function(){}))}))}))},setModuleRoutes:function(e){var t=this;c.a.each(e,(function(e){e&&(e.initialize(),e.RouteObjects&&c.a.each(e.RouteObjects,t.addModuleRouteObject.bind(t)))}))},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],T.a.history.on("route",(function(){this.lastPages.push(T.a.history.fragment),this.lastPages.length>5&&this.lastPages.shift()}),this)}}),H=n(11),z=n.n(H);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};W.extend=T.a.Model.extend;var X=["routes","roles"];c.a.extend(W.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return c.a.isFunction(this[e])?this[e]():this[e]},_configure:function(e){var t=this;c.a.each(c.a.intersection(c.a.keys(e),X),(function(n){t[n]=e[n]}))},getRouteUrls:function(){return c.a.keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n,r=this.get("routes")[e];return n="object"===G(r)?this[r.route]:this[r],n.apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===G(t)&&t.roles?t.roles:this.roles}});var Q=W,J=function(){this.initialize.apply(this,arguments),c.a.bindAll(this)};J.extend=T.a.Model.extend,c.a.extend(J.prototype,T.a.Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}});var Y=J,Z=[],ee=0,te={register:function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return ee+=1,Z.push(e),e.dispatchId=ee,ee},dispatch:function(e){Z.forEach((function(t){t(e)}))},unregister:function(e){var t=Object(a.findIndex)(Z,(function(t){return t.dispatchId===e}));-1!==t&&Z.splice(t,1)}};function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}T.a.$=o.a,T.a.ajax=function(){return T.a.$.ajax.apply(T.a.$,arguments)},ne(L,{Router:K,RouteObject:Q,utils:f,Store:Y,dispatcher:te,Promise:U.a,Events:c.a.extend({},T.a.Events)}),L.constants=s,L.dispatch=te.dispatch,L.navigate=function(e,t){var n=c.a.extend({trigger:!0},t);L.router.navigate(e,n),n.trigger&&L.router.trigger("trigger-update")},L.beforeUnload=function(){L.router.beforeUnload.apply(L.router,arguments)},L.removeBeforeUnload=function(){L.router.removeBeforeUnload.apply(L.router,arguments)},L.addRoute=function(e){L.router.route(e.route,e.name,e.callback)};var re={};L.registerUrls=function(e,t){re[e]=t},L.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?decodeURIComponent(e):e}},L.urls=function(e,t){var n,r=L.getExtensions("urls:interceptors"),o=arguments;return c.a.find(r,(function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)})),c.a.isUndefined(n)?re[e]?re[e][t]?(o=Array.prototype.slice.call(arguments,2),n=re[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},L.getIndexTypePropNames=function(){var e=L.getExtensions("IndexTypes:propNames");return e.push("views"),e};var oe=L;n(435);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}c.a.isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),ie(i,{utils:f,getParams:oe.utils.getParams,helpers:R}),oe.config({addHeaderLink:function(e){oe.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){oe.reduxDispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){oe.reduxDispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){oe.reduxDispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){oe.reduxDispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){oe.reduxDispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}});var ae=i,ce=n(0),se=n.n(ce),le="ADD_NAVBAR_LINK",ue="TOGGLE_NAVBAR_MENU",pe="UPDATE_NAVBAR_LINK",fe="REMOVE_NAVBAR_LINK",de="HIDE_NAVBAR_LINK_BADGE",me="SHOW_NAVBAR_LINK_BADGE",ye="NAVBAR_SET_VERSION_INFO",he="NAVBAR_ACTIVE_LINK",be="NAVBAR_HIDE",ge="NAVBAR_SHOW",ve="NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",Ee="NAVBAR_SHOW_LOGIN_BUTTON",_e="NAVBAR_SHOW_LOGOUT_BUTTON";function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De={isMinimized:!0,activeLink:null,version:null,navLinks:[],footerNavLinks:[],bottomNavLinks:[],navBarVisible:!0,loginSectionVisible:!1,loginVisibleInsteadOfLogout:!0};function Ne(e,t){var n=Oe({},e);return t.top&&!t.bottomNav?(n.navLinks=[].concat(n.navLinks),n.navLinks.unshift(t),n):t.top&&t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.unshift(t),n):t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.push(t),n):t.footerNav?(n.footerNavLinks=[].concat(n.footerNavLinks),n.footerNavLinks.push(t),n):(n.navLinks=[].concat(n.navLinks),n.navLinks.push(t),n)}function Re(e,t){var n=Pe(e,t),r=n.links,o=n.sectionName,i=r.filter((function(e){return e.id!==t.id}));if(i.length===r.length)return e;var a=Oe({},e);return a[o]=i,a}function Ce(e,t){var n=Pe(e,t),r=n.links,o=n.sectionName,i=!1,a=r.map((function(e){return e.id===t.id?(i=!0,Oe({},e,{title:t.title,href:t.href})):e}));if(!i)return e;var c=Oe({},e);return c[o]=a,c}function Te(e,t,n){var r=Pe(e,t),o=r.links,i=r.sectionName,a=!1,c=o.map((function(e){return e.title===t.title?(a=!0,Oe({},e,{badge:n})):e}));if(!a)return e;var s=Oe({},e);return s[i]=c,s}function Pe(e,t){var n=e.navLinks,r="navLinks";return t.bottomNav&&(n=e.bottomNavLinks,r="bottomNavLinks"),t.footerNav&&(n=e.footerNavLinks,r="footerNavLinks"),{links:n,sectionName:r}}var Ie="ADD_NOTIFICATION",xe="SHOW_NOTIFICATION_CENTER",Ae="HIDE_NOTIFICATION_CENTER",ke="CLEAR_SINGLE_NOTIFICATION",je="CLEAR_ALL_NOTIFICATIONS",Le="SELECT_NOTIFICATION_FILTER",Me="START_HIDING_NOTIFICATION",Ue="HIDE_NOTIFICATION",qe="HIDE_ALL_NOTIFICATIONS",Ve="SHOW_PERMANENT_NOTIFICATION",Fe="HIDE_PERMANENT_NOTIFICATION";function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze={notifications:[],notificationCenterVisible:!1,selectedNotificationFilter:"all",permanentNotificationVisible:!1,permanentNotificationMessage:""},Ge=0,We=["success","error","info"],Xe=["all","success","error","info"];function Qe(e,t){var n=e.notifications.slice();return(t=Ke({},t)).notificationId=++Ge,t.cleanMsg=ae.utils.stripHTML(t.msg),t.time=m()(),!0!==t.escape&&!1!==t.escape&&(t.escape=!0),t.visible=!0,t.isHiding=!1,t.clear&&n.forEach((function(e){e.visible&&(e.isHiding=!0)})),n.unshift(t),n}function Je(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.notificationId===t}));if(-1===r)return n;var o=[].concat(n);return o.splice(r,1),o}function Ye(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.notificationId===t}));if(-1===r)return n;var o=[].concat(n);return o[r].isHiding=!0,o}function $e(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.notificationId===t}));if(-1===r)return n;var o=[].concat(n);return o[r].visible=!1,o[r].isHiding=!1,o}function Ze(e){var t=e.notifications,n=[].concat(t);return n.forEach((function(e){e.visible&&(e.isHiding=!0)})),n}n(436);var et=oe.addon();et.initialize=function(){var e=new et.VersionInfo;e.fetch().then((function(){!function(e){oe.reduxDispatch({type:ye,version:e})}(e.get("version"))}))},et.VersionInfo=Backbone.Model.extend({url:function(){return ae.host}}),oe.addReducers({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Ne(e,t.link);case ue:return Oe({},e,{isMinimized:!e.isMinimized});case pe:return Ce(e,t.link);case fe:return Re(e,t.link);case me:return Te(e,t.link,!0);case de:return Te(e,t.link,!1);case ye:return Oe({},e,{version:t.version});case he:return Oe({},e,{activeLink:t.name});case be:return Oe({},e,{navBarVisible:!1});case ge:return Oe({},e,{navBarVisible:!0});case ve:return Oe({},e,{loginSectionVisible:t.visible});case Ee:return Oe({},e,{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!0});case _e:return Oe({},e,{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!1});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case Ie:return-1===We.indexOf(n.info.type)?e:Ke({},e,{notifications:Qe(e,n.info)});case je:return Ke({},e,{notifications:[]});case ke:return Ke({},e,{notifications:Je(e,n.notificationId)});case Me:return Ke({},e,{notifications:Ye(e,n.notificationId)});case Ue:return Ke({},e,{notifications:$e(e,n.notificationId)});case qe:return Ke({},e,{notifications:Ze(e)});case xe:return Ke({},e,{notificationCenterVisible:!0});case Ae:return Ke({},e,{notificationCenterVisible:!1});case Le:return-1===Xe.indexOf(n.filter)?e:Ke({},e,{selectedNotificationFilter:n.filter});case Ve:return Ke({},e,{permanentNotificationVisible:!0,permanentNotificationMessage:n.msg});case Fe:return Ke({},e,{permanentNotificationVisible:!1});default:return e}}});var tt=et,nt=(n(437),"DATABASES_SETPAGE"),rt="DATABASES_SETLIMIT",ot="DATABASES_SET_PROMPT_VISIBLE",it="DATABASES_STARTLOADING",at="DATABASES_LOADCOMPLETE",ct="DATABASES_UPDATE",st="DATABASES_PARTITIONED_DB_AVAILABLE",lt="DATABASES_FETCH_SELECTED_DB_METADATA",ut="DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS",pt=T.a.Collection.extend({constructor:function(){T.a.Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=c.a.result(this,"url").split("?")[1]||"";this.paging=c.a.defaults(t.paging||{},{defaultParams:c.a.defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=c.a.clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var r=c.a.clone(e);return r.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(r.limit=Math.min(this.paging.defaultParams.limit,r.limit)),r.limit=n+1,r.skip=Math.max(r.skip,0),r},pageSizeReset:function(e,t){var n=c.a.defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return c.a.reduce(t,(function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e}),{})},_iterate:function(e,t){var n=c.a.defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=this,n=c.a.result(this,"url").split("?")[0];c.a.each(["startkey","endkey","key"],(function(n){c.a.has(e,n)&&t.shouldStringify(e[n])&&(e[n]=JSON.stringify(e[n]))})),this.url=n+"?"+ae.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),T.a.Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var dt=oe.addon();dt.Doc=oe.Model.extend({idAttribute:"_id",documentation:function(){return oe.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return oe.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0),this.partitionKey=t.partitionKey},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return ae.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!!this.isDdoc()&&("query"===this.get("language")||!(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDDocPartitionedOption:function(e){if(!this.isDdoc())return!1;var t=this.get("options");return t||(t={}),t.partitioned=e,this.set({options:t}),!0},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("views");r||(r={},this.set({language:"javascript"}));var o=r[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,r[e]=o,this.set({views:r}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new dt.Doc(e,{database:this.database})):this},safeID:function(){return ae.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return w(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=ft({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),dt.AllDocs=pt.extend({model:dt.Doc,documentation:function(){return oe.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+ae.utils.queryParams(t):this.params&&(n="?"+ae.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),oe.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map((function(e){return{_id:e.id,_rev:e.get("_rev")}}));return new dt.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return this.viewMeta&&this.viewMeta.update_seq||!1},parse:function(e){var t=e.rows,n=_.filter(t,(function(e){return e.value}));return e.rows=_.map(n,(function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t})),pt.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}});var mt,yt=dt;yt.QueryParams=(mt=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],(function(e){_.has(n,e)&&(n[e]=t(n[e]))})),n},{parse:function(e){return mt(e,JSON.parse)},stringify:function(e){return mt(e,JSON.stringify)}}),yt.DdocInfo=oe.Model.extend({idAttribute:"_id",documentation:function(){return oe.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),oe.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){var e=this.id.replace(/^_design\//,"");return"_design/"+ae.utils.safeURLName(e)}}),yt.NewDoc=yt.Doc.extend({fetch:function(){var e=this,t=this.partitionKey?this.partitionKey+":":"";return R.getUUID().then((function(n){return n.uuids?e.set("_id",t+n.uuids[0]):e.set("_id",t+"enter_document_id"),n})).catch((function(){e.set("_id",t+"enter_document_id")}))}}),yt.BulkDeleteDoc=oe.Model.extend({idAttribute:"_id"}),yt.BulkDeleteDocCollection=oe.Collection.extend({model:yt.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return oe.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new oe.Promise((function(n,r){O(e.url(),t).then((function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,r)})).catch((function(){var t=_.reduce(e.toArray(),(function(e,t){return e.push(t.id),e}),[]);e.trigger("error",t),r(t)}))}))},handleResponse:function(e,t,n){var r=_.reduce(e,(function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e}),{errorIds:[],successIds:[]});this.removeDocuments(r.successIds),r.errorIds.length&&this.trigger("error",r.errorIds),_.isEmpty(r.successIds)?n(r.errorIds):t(r),this.trigger("updated")},removeDocuments:function(e){var t=this;_.each(e,(function(e){t.remove(t.get(e))})),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),yt.MangoBulkDeleteDocCollection=yt.BulkDeleteDocCollection.extend({url:function(){return R.getServerUrl("/".concat(this.databaseId,"/_index/_bulk_delete"))},createPayload:function(e){return{docids:e.filter((function(e){return"_all_docs"!==e._id})).map((function(e){return e._id}))}}});var ht=yt,bt=oe.addon();bt.DocLimit=100,bt.Model=oe.Model.extend({partitioned:!1,setPartitioned:function(e){this.partitioned=e},documentation:function(){return oe.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new ht.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return ae.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+bt.DocLimit:"apiurl"===e?R.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?oe.urls("changes","app",this.safeID(),"","?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?oe.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():this.partitioned?R.getServerUrl("/"+this.safeID())+"?partitioned=true":R.getServerUrl("/"+this.safeID())},safeID:function(){return ae.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new bt.Changes({database:this,params:e}),this.changes}}),bt.Changes=oe.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return oe.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+ae.utils.queryParams(this.params)),e||(e="server"),oe.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}});var gt=bt;function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Et=gt.Model,_t=oe.Store.extend({initialize:function(){this.reset()},reset:function(){var e;this._loading=!1,this._promptVisible=!1,this._page=1,this._limit=((e=ae.utils.localStorageGet("fauxton:dbs_per_page"))||(e=oe.constants.MISC.DEFAULT_PAGE_SIZE),e),this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[],this._partitionedDatabasesAvailable=!1},getPage:function(){return this._page},getLimit:function(){return this._limit},setLimit:function(e){this._limit=e,ae.utils.localStorageSet("fauxton:dbs_per_page",e)},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e,t){var n=new Et({id:e,name:e});return n.setPartitioned(t),n},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map((function(t){var n=e._databaseDetails.filter((function(e){return e.db_name===t}));return vt({},{id:t,encodedId:encodeURIComponent(t),url:oe.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)},e._getDetails(n[0]))}))},_getDetails:function(e){if(!e)return{};var t=e.sizes,n=t&&t.active||e.data_size||0;return{dataSize:R.formatSize(n),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count,isPartitioned:e.props&&!0===e.props.partitioned}},isPartitionedDatabasesAvailable:function(){return this._partitionedDatabasesAvailable},dispatch:function(e){switch(e.type){case nt:this._page=e.options.page;break;case rt:this.setLimit(e.options.limit);break;case ot:this.setPromptVisible(e.options.visible);break;case it:this.setLoading(!0);break;case at:this.setLoading(!1);break;case ct:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;case st:this._partitionedDatabasesAvailable=e.options.available;break;default:return}this.triggerChange()}}),wt=new _t;wt.dispatchToken=oe.dispatcher.register(wt.dispatch.bind(wt));var Ot={databasesStore:wt,DatabasesStoreConstructor:_t},St=function(e){var t=oe.urls("databaseBaseURL","server",e);return E(t)};function Dt(e,t){var n=[],r=[],o=0;e.forEach((function(i){Nt(oe.urls("databaseBaseURL","server",i)).then((function(e){n.push(e)})).catch((function(){r.push(i)})).then((function(){++o===e.length&&Tt({dbList:e,databaseDetails:n,failedDbs:r,fullDbList:t})}))}))}function Nt(e){return E(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))}function Rt(){return Nt(oe.urls("allDBs","server"))}function Ct(e,t,n){var r=(t-1)*n,o=t*n;return e.slice(r,o)}function Tt(e){oe.dispatch({type:ct,options:e})}var Pt={getDatabaseList:Rt,paginate:Ct,getDatabaseDetails:Dt,fetch:Nt,updateDatabases:Tt,init:function(e){var t=this,n=e.page,r=e.limit;this.setStartLoading(),this.setPage(n),r&&this.setLimit(r),Rt().then((function(e){var o=Ct(e,n,r);t.updateDatabases({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:e}),Dt(o,e)}))},setPage:function(e){oe.dispatch({type:nt,options:{page:e}})},setLimit:function(e){oe.dispatch({type:rt,options:{limit:e}})},setStartLoading:function(){oe.dispatch({type:it})},setLoadComplete:function(){oe.dispatch({type:at})},createNewDatabase:function(e,t){if(_.isNull(e)||0===e.trim().length)oe.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});else{e=e.trim(),oe.dispatch({type:ot,options:{visible:!1}});var n=Ot.databasesStore.obtainNewDatabaseModel(e,t);oe.addNotification({msg:"Creating database."}),n.save().done((function(){oe.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=oe.urls("allDocs","app",ae.utils.safeURLName(e));ae.router.navigate(t,{trigger:!0})})).fail((function(e){var t=JSON.parse(e.responseText).reason;oe.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})}))}},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=oe.urls("allDocs","app",ae.utils.safeURLName(e),"");return setTimeout((function(){oe.navigate(t)}))}},fetchAllDbsWithKey:function(e,t){var n="?"+ae.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"香"),limit:30}),r=R.getServerUrl("/_all_dbs".concat(n));E(r).then((function(e){var n=e.map((function(e){return{value:e,label:e}}));t(null,{options:n})}))},setPartitionedDatabasesAvailable:function(e){var t={type:st,options:{available:e}};oe.dispatch(t),oe.reduxDispatch(t)},checkPartitionedQueriesIsAvailable:function(){var e=this,t=oe.getExtensions(qc.PARTITONED_DB_CHECK_EXTENSION).map((function(e){return e()}));oe.Promise.all(t).then((function(t){var n=t.every((function(e){return!0===e}));e.setPartitionedDatabasesAvailable(n)})).catch((function(){}))},fetchSelectedDatabaseInfo:function(e){oe.reduxDispatch({type:lt}),St(e).then((function(e){if(!e.db_name){var t=e.reason?e.reason:"";throw new Error("Failed to fetch database info. "+t)}oe.reduxDispatch({type:ut,options:{metadata:e}})})).catch((function(e){oe.addNotification({msg:e.message,type:"error",clear:!0})}))}},It=n(1),xt=n.n(It),At=n(10);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ut(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ft,Bt,Kt,Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=qt(t);if(Ut()){var r=qt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Mt(this,e)});function a(){return jt(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.props.visible?"":" hide");return se.a.createElement("div",{className:e,onClick:this.props.onClick})}}])&&Lt(n.prototype,r),o&&Lt(n,o),a}(se.a.Component);Ft=Ht,Bt="propTypes",Kt={onClick:xt.a.func.isRequired,visible:xt.a.bool.isRequired},Bt in Ft?Object.defineProperty(Ft,Bt,{value:Kt,enumerable:!0,configurable:!0,writable:!0}):Ft[Bt]=Kt;var zt=Object(At.b)((function(e){return{visible:!e.notifications.notificationCenterVisible}}),(function(e){return{onClick:function(){e((function(e){e({type:xe})}))}}}))(Ht),Gt=function(e){var t=e.endpoint;return t?se.a.createElement("div",{className:"faux__jsonlink"},se.a.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},se.a.createElement("span",{className:"faux__jsonlink-link-brackets"},"{ }"),se.a.createElement("span",{className:"faux__jsonlink-link-label"},"JSON"))):null},Wt=function(e){var t=e.docURL;return t?se.a.createElement("div",{className:"faux__doclink"},se.a.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},se.a.createElement("i",{className:"icon fonticon-bookmark"}))):null},Xt=function(e){var t=e.crumbs;return se.a.createElement("div",{className:"faux-header__breadcrumbs"},function(e){var t=e.length-1;return e.map((function(e,n){var r=[se.a.createElement(Qt,{key:n},e.name)];return e.link&&(r=[se.a.createElement(Qt,{key:n},se.a.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&r.push(se.a.createElement(Jt,{key:"divider_"+n})),r):r}))}(t))};Xt.propTypes={crumbs:xt.a.array.isRequired};var Qt=function(e){var t=e.children;return se.a.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},Jt=function(){return se.a.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})};var Yt=function(e){var t=e.docURL,n=e.endpoint;return se.a.createElement("div",{className:"faux__jsondoc-wrapper"},se.a.createElement(Gt,{endpoint:n}),se.a.createElement(Wt,{docURL:t}))},$t=function(e){var t=e.children;return se.a.createElement("div",{id:"dashboard",className:"one-pane "},t)},Zt=function(e){var t=e.showApiUrl,n=e.docURL,r=e.endpoint,o=e.crumbs,i=e.children,a="right-header-flex";return R.isIE1X()&&(a+=" "+a+"--ie1X"),se.a.createElement("header",null,se.a.createElement("div",{className:"flex-layout flex-row"},se.a.createElement("div",{id:"breadcrumbs",className:"flex-body"},se.a.createElement(Xt,{crumbs:o})),se.a.createElement("div",{id:"right-header"},se.a.createElement("div",{className:a},i)),t?se.a.createElement(Yt,{docURL:n,endpoint:r}):null,se.a.createElement("div",{id:"notification-center-btn"},se.a.createElement(zt,null))))};Zt.defaultProps={showApiUrl:!0,crumbs:[]},Zt.propTypes={docURL:xt.a.string,endpoint:xt.a.string,crumbs:xt.a.array};var en=function(e){var t=e.children;return se.a.createElement("div",{className:"content-area container-fluid"},se.a.createElement("div",{id:"tabs"}),se.a.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},tn=function(e){var t=e.children;return se.a.createElement("div",{className:"faux__onepane-footer"},t)},nn=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return se.a.createElement($t,null,se.a.createElement(Zt,{crumbs:o,endpoint:r,docURL:n}),se.a.createElement(en,null,t),se.a.createElement(tn,null))},rn=function(e){var t=e.children;return se.a.createElement("div",{id:"dashboard-content"},t)},on=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return se.a.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},se.a.createElement(Zt,{crumbs:o,endpoint:r,docURL:n}),se.a.createElement(rn,null,t))},an=n(3),cn=n.n(an),sn=n(8);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?dn(e):t}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=yn(t);if(mn()){var r=yn(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return fn(this,e)});function a(){var e;un(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bn(dn(e=i.call.apply(i,[this].concat(n))),"state",{open:!1}),bn(dn(e),"handleClick",(function(t){var n=!e.state.open;e.setState({open:n}),e.props.onClick({isOpen:n,event:t})})),e}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=this.state.open?"fonticon-down-open":"fonticon-right-open",o=cn()("faux--accordion__item-content","collapse",{in:this.state.open});return se.a.createElement("li",{className:"faux--accordion__item",onClick:this.handleClick},se.a.createElement("button",{type:"button",className:"faux--accordion__item-header",onClick:this.handleClick},se.a.createElement("i",{className:r}),se.a.createElement("span",null,n)),se.a.createElement(sn.c,{in:this.state.open},se.a.createElement("div",{className:o},t)))}}])&&pn(n.prototype,r),o&&pn(n,o),a}(se.a.Component);function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e,t,n){return t&&_n(e.prototype,t),n&&_n(e,n),e}function On(e){return function(){var t,n=Rn(e);if(Nn()){var r=Rn(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Sn(this,t)}}function Sn(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?Dn(e):t}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}bn(gn,"propTypes",{title:xt.a.string.isRequired}),bn(gn,"defaultProps",{onClick:function(){}});var In=function(e){Cn(n,e);var t=On(n);function n(){var e;En(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Pn(Dn(e=t.call.apply(t,[this].concat(o))),"getBadges",(function(){return e.props.elements.map(function(e,t){return se.a.createElement(xn,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(Dn(e)))})),Pn(Dn(e),"removeBadge",(function(t,n){e.props.removeBadge(t,n)})),e}return wn(n,[{key:"render",value:function(){return se.a.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),n}(se.a.Component);Pn(In,"propTypes",{elements:xt.a.array.isRequired,removeBadge:xt.a.func.isRequired}),Pn(In,"defaultProps",{getLabel:function(e){return e},getId:function(e){return e}});var xn=function(e){Cn(n,e);var t=On(n);function n(){var e;En(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Pn(Dn(e=t.call.apply(t,[this].concat(o))),"remove",(function(t){t.preventDefault(),e.props.remove(e.props.label,e.props.id)})),e}return wn(n,[{key:"render",value:function(){return se.a.createElement("li",{className:"component-badge"},se.a.createElement("span",{className:"label label-info"},this.props.label),se.a.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},"×"))}}]),n}(se.a.Component);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Pn(xn,"propTypes",{label:xt.a.string.isRequired,remove:xt.a.func.isRequired});var Vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Un(t);if(Mn()){var r=Un(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ln(this,e)});function a(){return kn(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,r=e.innerClasses,o=e.selected,i=e.containerClasses,a=e.title,c=e.disabled,s=e.text,l=e.toggleCallback,u=e.active,p=o||u?"js-headerbar-togglebutton-selected":"";return se.a.createElement("button",{title:a,disabled:c,onClick:l,className:"button ".concat(i," ").concat(p)},se.a.createElement("i",{className:"".concat(t," ").concat(n," ").concat(r)}),se.a.createElement("span",null,s))}}])&&jn(n.prototype,r),o&&jn(n,o),a}(se.a.Component);function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?zn(e):t}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vn,"defaultProps",{innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"});var Jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Wn(t);if(Gn()){var r=Wn(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Hn(this,e)});function a(){var e;Bn(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qn(zn(e=i.call.apply(i,[this].concat(n))),"getMultiSelectOptions",(function(){return e.props.hasSelectedItem?se.a.createElement("button",{onClick:e.props.removeItem,className:"fonticon "+e.props.bulkIcon,title:e.props.buttonTitle}):null})),Qn(zn(e),"getPopupContent",(function(){return se.a.createElement("ul",{className:"bulk-action-component-popover-actions"},se.a.createElement("li",{onClick:e.selectAll},se.a.createElement("i",{className:"icon fonticon-cancel"})," ",e.props.dropdownContentText))})),Qn(zn(e),"selectAll",(function(){e.bulkActionPopover.hide(),e.props.selectAll()})),Qn(zn(e),"getOverlay",(function(){return se.a.createElement(sn.h,{ref:function(t){return e.bulkActionPopover=t},trigger:"click",placement:"bottom",rootClose:!0,overlay:se.a.createElement(sn.i,{id:"bulk-action-component-popover",title:e.props.title},e.getPopupContent())},se.a.createElement("div",{className:"arrow-button"},se.a.createElement("i",{className:"fonticon fonticon-play"})))})),Qn(zn(e),"getMasterSelector",(function(){return se.a.createElement("div",{className:"bulk-action-component-panel"},se.a.createElement("input",{type:"checkbox",checked:e.props.isChecked,onChange:e.props.toggleSelect,disabled:e.props.disabled}),e.props.enableOverlay?se.a.createElement("div",{className:"separator"}):null,e.props.enableOverlay?e.getOverlay():null)})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"bulk-action-component"},se.a.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}])&&Kn(n.prototype,r),o&&Kn(n,o),a}(se.a.Component);function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function er(e,t){return!t||"object"!==Yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Qn(Jn,"propTypes",{hasSelectedItem:xt.a.bool.isRequired,removeItem:xt.a.func.isRequired,selectAll:xt.a.func,toggleSelect:xt.a.func.isRequired,isChecked:xt.a.bool.isRequired,disabled:xt.a.bool}),Qn(Jn,"defaultProps",{disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1});var or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=nr(t);if(tr()){var r=nr(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return er(this,e)});function a(){return $n(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"styled-select"},se.a.createElement("label",{htmlFor:this.props.selectId},se.a.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),se.a.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),se.a.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}])&&Zn(n.prototype,r),o&&Zn(n,o),a}(se.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(or,"propTypes",{selectValue:xt.a.string.isRequired,selectId:xt.a.string.isRequired,selectChange:xt.a.func.isRequired});var ir=n(69),ar=n.n(ir),cr="CMPNTS_DATABASES_SHOWDELETE_MODAL";var sr={deleteDatabase:function(e,t){var n=this,r=oe.urls("databaseBaseURL","server",e,"");w(r).then((function(r){if(!r.ok){var o=r.reason||"";throw new Error(o)}n.showDeleteDatabaseModal({showModal:!0}),oe.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(oe.urls("allDBs","app")),t&&t()})).catch((function(e){oe.addNotification({msg:"Could not delete the database. "+e.message,type:"error",clear:!0})}))},showDeleteDatabaseModal:function(e){oe.dispatch({type:cr,options:e})}},lr=function(e,t){var n="#"+oe.urls("databaseBaseURL","app",oe.url.encode(e))+(t?"/_partition/"+encodeURIComponent(t):"");return{title:ae.i18n.en_US["new-mango-index"],url:n+"/_index",icon:"fonticon-plus-circled"}},ur=function(e){return"designDoc"===e.navItem&&"Views"===e.designDocSection&&e.indexName},pr=function(e,t){var n=t;return t&&e.options&&!1===e.options.partitioned&&(n=!1),n},fr={getSeqNum:function(e){return _.isArray(e)?e[1]:e},getNewButtonLinks:function(e,t){var n=oe.getExtensions("sidebar:links"),r="#"+oe.urls("databaseBaseURL","app",oe.url.encode(e)),o="",i="";return t&&(o="/_partition/"+encodeURIComponent(t),i="?partitionKey="+encodeURIComponent(t)),[{title:"Add New",links:n.reduce((function(e,t){return e.push({title:t.title,url:r+o+"/"+t.url,icon:"fonticon-plus-circled"}),e}),[{title:"New Doc",url:r+"/_new"+i,icon:"fonticon-plus-circled"},{title:"New View",url:r+o+"/new_view",icon:"fonticon-plus-circled"},lr(e,t)])}]},getModifyDatabaseLinks:function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:oe.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:sr.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},getNewDocUrl:function(e,t){var n=encodeURIComponent(e),r=oe.urls("new","newDocument",n);return t&&(r=r+"?partitionKey="+encodeURIComponent(t)),r},isDDocPartitioned:pr,parseJSON:function(e){return JSON.parse('"'+e+'"')},truncateDoc:function(e,t){var n=e.split("\n"),r=!1;return n.length>t&&(r=!0,e=(n=n.slice(0,t)).join("\n")),{isTruncated:r,content:e}},selectedViewContainsReduceFunction:function(e,t){if(!t)return!1;var n=!1;if(e&&ur(t)){var r="_design/"+t.designDocName,o=e.find((function(e){return e._id===r}));n=void 0!==o&&o.views&&void 0!==o.views[t.indexName]&&void 0!==o.views[t.indexName].reduce}return n},selectedItemIsPartitionedView:function(e,t,n){if(!t)return!1;var r=!1;if(e&&ur(t)){var o="_design/"+t.designDocName,i=e.find((function(e){return e._id===o}));i&&(r=pr(i,n))}return r},isViewSelected:ur};function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?br(e):t}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(273),n(184),n(185);var wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=vr(t);if(gr()){var r=vr(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return hr(this,e)});function a(){var e;mr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _r(br(e=i.call.apply(i,[this].concat(n))),"initAceEditor",(function(t){e.editor=ar.a.edit(t),e.editor.$blockScrolling=1/0,e.editor.setShowPrintMargin(!1),e.editor.setOption("highlightActiveLine",!0),e.editor.setTheme("ace/theme/idle_fingers");var n=fr.parseJSON(e.props.value);e.editor.setValue(n,-1)})),_r(br(e),"closeModal",(function(){e.props.onClose()})),_r(br(e),"save",(function(){e.props.onSave(e.editor.getValue())})),e}return n=a,(r=[{key:"render",value:function(){var e=this;return se.a.createElement(sn.f,{className:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,"Edit Value ",se.a.createElement("span",{id:"string-edit-header"}))),se.a.createElement(sn.f.Body,null,se.a.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),se.a.createElement("div",{id:"string-editor-wrapper"},se.a.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),se.a.createElement("button",{id:"string-edit-save-btn",onClick:this.save,className:"btn btn-primary save"},se.a.createElement("i",{className:"fonticon-circle-check"})," Modify Text")))}}])&&yr(n.prototype,r),o&&yr(n,o),a}(se.a.Component);_r(wr,"propTypes",{value:xt.a.string.isRequired,visible:xt.a.bool.isRequired,onClose:xt.a.func.isRequired,onSave:xt.a.func.isRequired}),_r(wr,"defaultProps",{visible:!1,onClose:function(){},onSave:function(){}});n(517);function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,t){return!t||"object"!==Or(t)&&"function"!=typeof t?Rr(e):t}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(273),n(184),n(185);var xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Tr(t);if(Cr()){var r=Tr(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Nr(this,e)});function a(){var e;Sr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ir(Rr(e=i.call.apply(i,[this].concat(n))),"state",{originalCode:e.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""}),Ir(Rr(e),"hasChanged",(function(){return!_.isEqual(e.state.originalCode,e.getValue())})),Ir(Rr(e),"clearChanges",(function(){e.setState({originalCode:e.getValue()})})),Ir(Rr(e),"setupAce",(function(t,n){e.editor=ar.a.edit(e.ace),e.editor.commands.bindKeys({"Ctrl-L|Command-L":null,"Ctrl-Shift-L|Command-Shift-L":"gotoline"}),e.editor.$blockScrolling=1/0,n&&e.setValue(t.defaultCode),e.editor.setShowPrintMargin(t.showPrintMargin),e.editor.autoScrollEditorIntoView=t.autoScrollEditorIntoView,e.editor.setOption("highlightActiveLine",e.props.highlightActiveLine),e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.ignorableErrors&&e.removeIgnorableAnnotations(),e.addCommands(),e.editor.getSession().setMode("ace/mode/"+t.mode),e.editor.setTheme("ace/theme/"+t.theme),e.editor.setFontSize(t.fontSize),e.editor.getSession().setTabSize(2),e.editor.getSession().setUseSoftTabs(!0),e.props.autoFocus&&e.editor.focus()})),Ir(Rr(e),"addCommands",(function(){_.each(e.props.editorCommands,(function(t){e.editor.commands.addCommand(t)}))})),Ir(Rr(e),"setupEvents",(function(){e.editor.on("blur",_.bind(e.onBlur,Rr(e))),e.editor.on("change",_.bind(e.onContentChange,Rr(e))),e.props.stringEditModalEnabled&&(e.editor.on("changeSelection",_.bind(e.showHideEditStringGutterIcon,Rr(e))),e.editor.getSession().on("changeBackMarker",_.bind(e.showHideEditStringGutterIcon,Rr(e))),e.editor.getSession().on("changeScrollTop",_.bind(e.updateEditStringGutterIconPosition,Rr(e)))),e.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",e.quitWarningMsg),oe.beforeUnload("editor_"+e.props.id,e.quitWarningMsg))})),Ir(Rr(e),"onBlur",(function(){e.props.blur(e.getValue())})),Ir(Rr(e),"onContentChange",(function(){e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.change(e.getValue())})),Ir(Rr(e),"quitWarningMsg",(function(){if(e.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."})),Ir(Rr(e),"removeEvents",(function(){e.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",e.quitWarningMsg),oe.removeBeforeUnload("editor_"+e.props.id))})),Ir(Rr(e),"setHeightToLineCount",(function(){var t=e.editor.getSession().getDocument().getLength(),n=t>e.props.maxLines?e.props.maxLines:t;e.editor.setOptions({maxLines:n,minLines:e.props.minLines})})),Ir(Rr(e),"getAnnotations",(function(){return e.editor.getSession().getAnnotations()})),Ir(Rr(e),"isIgnorableError",(function(t){return-1!==_.indexOf(e.props.ignorableErrors,t)})),Ir(Rr(e),"removeIgnorableAnnotations",(function(){var t=e.isIgnorableError;e.editor.getSession().on("changeAnnotation",function(){var e=this.editor.getSession().getAnnotations(),n=_.reduce(e,(function(e,n){return t(n.raw)||e.push(n),e}),[]);e.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(Rr(e)))})),Ir(Rr(e),"showHideEditStringGutterIcon",(function(){return e.hasErrors()||!e.parseLineForStringMatch()?(e.setState({stringEditIconVisible:!1}),!1):(e.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:e.getGutterIconPosition()}}),!0)})),Ir(Rr(e),"updateEditStringGutterIconPosition",(function(){e.state.stringEditIconVisible&&e.setState({stringEditIconStyle:{top:e.getGutterIconPosition()}})})),Ir(Rr(e),"getGutterIconPosition",(function(){var t=e.getRowHeight(),n=e.editor.session.getScrollTop();return t*e.documentToScreenRow(e.getSelectionStart().row)-n+"px"})),Ir(Rr(e),"parseLineForStringMatch",(function(){var t=e.getSelectionStart().row,n=e.getSelectionEnd().row;if(t>=0&&n>=0&&t===n&&e.isRowExpanded(t)){var r=e.getLine(t).match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(r)return r}return!1})),Ir(Rr(e),"openStringEditModal",(function(){var t=e.parseLineForStringMatch()[3].trim();","===t.substring(t.length-1)&&(t=t.substring(0,t.length-1).trim()),t=t.substring(1,t.length-1),e.setState({stringEditModalVisible:!0,stringEditModalValue:t})})),Ir(Rr(e),"saveStringEditModal",(function(t){var n=e.parseLineForStringMatch(),r=n[1]||"",o=n[2]||"",i=n[3],a="";","===i.substring(i.length-1)&&(a=","),e.replaceCurrentLine(r+o+JSON.stringify(t)+a+"\n"),e.closeStringEditModal()})),Ir(Rr(e),"closeStringEditModal",(function(){e.setState({stringEditModalVisible:!1})})),Ir(Rr(e),"hasErrors",(function(){return!_.every(e.getAnnotations(),(function(t){return e.isIgnorableError(t.raw)}))})),Ir(Rr(e),"setReadOnly",(function(t){e.editor.setReadOnly(t)})),Ir(Rr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Ir(Rr(e),"getValue",(function(){return e.editor.getValue()})),Ir(Rr(e),"getEditor",(function(){return Rr(e)})),Ir(Rr(e),"getLine",(function(t){return e.editor.session.getLine(t)})),Ir(Rr(e),"getSelectionStart",(function(){return e.editor.getSelectionRange().start})),Ir(Rr(e),"getSelectionEnd",(function(){return e.editor.getSelectionRange().end})),Ir(Rr(e),"getRowHeight",(function(){return e.editor.renderer.layerConfig.lineHeight})),Ir(Rr(e),"isRowExpanded",(function(t){return!e.editor.getSession().isRowFolded(t)})),Ir(Rr(e),"documentToScreenRow",(function(t){return e.editor.getSession().documentToScreenRow(t,0)})),Ir(Rr(e),"replaceCurrentLine",(function(t){e.editor.getSelection().selectLine(),e.editor.insert(t),e.editor.getSelection().moveCursorUp()})),e}return n=a,(r=[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents(),this.props.autoFocus&&this.editor.focus()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return se.a.createElement("div",null,se.a.createElement("div",{ref:function(t){return e.ace=t},className:"js-editor",id:this.props.id}),se.a.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},se.a.createElement("i",{className:"icon icon-edit"})),se.a.createElement(wr,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}])&&Dr(n.prototype,r),o&&Dr(n,o),a}(se.a.Component);Ir(xr,"defaultProps",{id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}});var Ar=n(153),kr=n.n(Ar);function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t){return!t||"object"!==jr(t)&&"function"!=typeof t?qr(e):t}function qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Br(e,t){return(Br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hr=kr.a.js_beautify?kr.a.js_beautify:kr.a,zr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Br(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Fr(t);if(Vr()){var r=Fr(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ur(this,e)});function a(){var e;Lr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kr(qr(e=i.call.apply(i,[this].concat(n))),"noOfLines",(function(){return e.props.code.split(/\r\n|\r|\n/).length})),Kr(qr(e),"canBeautify",(function(){return 1===e.noOfLines()})),Kr(qr(e),"beautify",(function(t){t.preventDefault();var n=Hr(e.props.code);e.props.beautifiedCode(n)})),Kr(qr(e),"getTooltip",(function(){return se.a.createElement(sn.k,{id:"tooltip"},"Switch to editable code format.")})),e}return n=a,(r=[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return se.a.createElement(sn.h,{placement:"right",overlay:e},se.a.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}])&&Mr(n.prototype,r),o&&Mr(n,o),a}(se.a.Component);function Gr(e){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t){return!t||"object"!==Gr(t)&&"function"!=typeof t?Jr(e):t}function Jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e,t){return(Zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(518);var to={dark:"idle_fingers",light:"dawn"},no=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zr(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=$r(t);if(Yr()){var r=$r(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Qr(this,e)});function a(){var e;Wr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eo(Jr(e=i.call.apply(i,[this].concat(n))),"getStoreState",(function(){return{theme:e.getZenTheme(),code:e.props.defaultCode}})),eo(Jr(e),"getZenTheme",(function(){var e=ae.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e})),eo(Jr(e),"onChange",(function(){e.setState(e.getStoreState())})),eo(Jr(e),"exitZenMode",(function(){e.props.onExit(e.getValue())})),eo(Jr(e),"getValue",(function(){return e.ace.getValue()})),eo(Jr(e),"toggleTheme",(function(){var t="dark"===e.state.theme?"light":"dark";e.setState({theme:t,code:e.getValue()}),ae.utils.localStorageSet("zenTheme",t)})),eo(Jr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),eo(Jr(e),"state",e.getStoreState()),e}return n=a,(r=[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],r=se.a.createElement(sn.k,{id:"tooltip"},"Exit zen mode (`esc`)"),o=se.a.createElement(sn.k,{id:"tooltip"},"Switch zen theme");return se.a.createElement("div",{className:t},se.a.createElement("div",{className:"zen-mode-controls"},se.a.createElement("ul",null,se.a.createElement("li",null,se.a.createElement(sn.h,{placement:"left",overlay:r},se.a.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),se.a.createElement("li",null,se.a.createElement(sn.h,{placement:"left",overlay:o},se.a.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),se.a.createElement("div",{className:"tooltips"})),se.a.createElement(xr,{ref:function(t){return e.ace=t},autoFocus:!0,theme:to[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}])&&Xr(n.prototype,r),o&&Xr(n,o),a}(se.a.Component);function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t){return!t||"object"!==ro(t)&&"function"!=typeof t?co(e):t}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function so(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lo(e){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uo(e,t){return(uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}eo(no,"defaultProps",{mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1});var fo=["Missing name in function declaration.","['{a}'] is better written in dot notation."],mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=lo(t);if(so()){var r=lo(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ao(this,e)});function a(){var e;oo(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return po(co(e=i.call.apply(i,[this].concat(n))),"getStoreState",(function(){return{zenModeEnabled:!1,code:e.props.defaultCode}})),po(co(e),"getZenModeIcon",(function(){if(e.props.allowZenMode)return se.a.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:e.enterZenMode})})),po(co(e),"getDocIcon",(function(){if(e.props.docLink)return se.a.createElement("a",{className:"help-link","data-bypass":"true",href:e.props.docLink,target:"_blank",rel:"noopener noreferrer"},se.a.createElement("i",{className:"icon-question-sign"}))})),po(co(e),"getZenModeOverlay",(function(){if(e.state.zenModeEnabled)return se.a.createElement(no,{defaultCode:e.state.code,mode:e.props.mode,ignorableErrors:fo,onExit:e.exitZenMode})})),po(co(e),"enterZenMode",(function(){e.setState({zenModeEnabled:!0,code:e.codeEditor.getValue()})})),po(co(e),"exitZenMode",(function(t){e.setState({zenModeEnabled:!1}),e.getEditor().setValue(t)})),po(co(e),"getEditor",(function(){return e.codeEditor})),po(co(e),"getValue",(function(){return e.getEditor().getValue()})),po(co(e),"beautify",(function(t){e.setState({code:t}),e.getEditor().setValue(t)})),po(co(e),"update",(function(){e.getEditor().setValue(e.state.code)})),po(co(e),"state",e.getStoreState()),e}return n=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="control-group";return this.props.className&&(t+=" "+this.props.className),se.a.createElement("div",{className:t},se.a.createElement("label",null,se.a.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),se.a.createElement(xr,{id:this.props.id,ref:function(t){return e.codeEditor=t},mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:fo,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),se.a.createElement(zr,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}])&&io(n.prototype,r),o&&io(n,o),a}(se.a.Component);function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function go(e,t){return!t||"object"!==yo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _o(e,t){return(_o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}po(mo,"defaultProps",{id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}});var wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Eo(t);if(vo()){var r=Eo(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return go(this,e)});function a(){return ho(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"bordered-box"},se.a.createElement("div",{className:"padded-box"},this.props.children))}}])&&bo(n.prototype,r),o&&bo(n,o),a}(se.a.Component),Oo={TABLE:"LAYOUT_TABLE",METADATA:"LAYOUT_METADATA",JSON:"LAYOUT_JSON"},So={MANGO_INDEX:"MangoIndex",MANGO_QUERY:"MangoQueryResult",VIEW:"view"},Do={TEXT_OVERFLOW_TRUNCATED:"truncated",TEXT_OVERFLOW_FULL:"full",FONT_SIZE_SMALL:"small-font",FONT_SIZE_LARGE:"large-font",FONT_SIZE_MEDIUM:"medium-font"};function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?Po(e):t}function Po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Io(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ao(e,t){return(Ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ao(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=xo(t);if(Io()){var r=xo(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return To(this,e)});function a(){var e;Ro(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ko(Po(e=i.call.apply(i,[this].concat(n))),"onChange",(function(t){t.preventDefault(),e.props.docChecked(e.props.doc.id,e.props.doc._rev)})),ko(Po(e),"getUrlFragment",(function(){return e.props.children?se.a.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},e.props.children):""})),ko(Po(e),"getExtensionIcons",(function(){var t=oe.getExtensions("DocList:icons");return _.map(t,(function(t,n){return se.a.createElement(t,{doc:e.props.doc,key:n})}))})),ko(Po(e),"getDocumentTypeIcon",(function(){return e.props.docType===So.MANGO_INDEX?-1!==e.props.docContent.indexOf('"partitioned": true')?se.a.createElement("i",{className:"fonticon-documents",title:"Partitioned index"}):se.a.createElement("i",{className:"fonticon-document",title:"Global index"}):null})),ko(Po(e),"getCheckbox",(function(){return e.props.isDeletable?se.a.createElement("div",{className:"checkbox inline"},se.a.createElement("input",{id:"checkbox-"+e.props.docIdentifier,checked:e.props.checked,"data-checked":e.props.checked,type:"checkbox",onChange:e.onChange,className:"js-row-select"}),se.a.createElement("label",{onClick:e.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+e.props.docIdentifier})):se.a.createElement("div",{className:"checkbox-dummy"})})),ko(Po(e),"onClick",(function(t){e.props.onClick(e.props.docIdentifier,e.props.doc,t)})),ko(Po(e),"getDocContent",(function(){if(_.isEmpty(e.props.docContent))return null;var t=e.props.docContent,n=!1;if(e.props.truncate){var r=fr.truncateDoc(e.props.docContent,e.props.maxRows);n=r.isTruncated,t=r.content}var o=e.props.resultsStyle.fontSize,i=cn()("prettyprint",{"prettyprint--small":o===Do.FONT_SIZE_SMALL,"prettyprint--large":o===Do.FONT_SIZE_LARGE});return se.a.createElement("div",{className:"doc-data"},se.a.createElement("pre",{className:i},t),n?se.a.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},se.a.createElement("div",{className:"custom-inputs"},this.getCheckbox()),se.a.createElement("div",{className:"doc-item"},se.a.createElement("header",{onClick:this.onClick},se.a.createElement("span",{className:"header-keylabel"},this.getDocumentTypeIcon(),this.props.keylabel),se.a.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),se.a.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),se.a.createElement("div",{className:"clearfix"}))}}])&&Co(n.prototype,r),o&&Co(n,o),a}(se.a.Component);ko(jo,"propTypes",{docIdentifier:xt.a.string.isRequired,docType:xt.a.string,docChecked:xt.a.func.isRequired,truncate:xt.a.bool,maxRows:xt.a.number,resultsStyle:xt.a.object}),ko(jo,"defaultProps",{truncate:!0,maxRows:500,resultsStyle:{fontSize:Do.FONT_SIZE_MEDIUM},docType:So.VIEW});var Lo=function(){return se.a.createElement("div",{className:"loading-lines"},se.a.createElement("div",{id:"line1"}," "),se.a.createElement("div",{id:"line2"}," "),se.a.createElement("div",{id:"line3"}," "),se.a.createElement("div",{id:"line4"}," "))};function Mo(e){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vo(e,t){return!t||"object"!==Mo(t)&&"function"!=typeof t?Fo(e):t}function Fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ko(e){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ho(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Ko(t);if(Bo()){var r=Ko(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Vo(this,e)});function a(){var e;Uo(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zo(Fo(e=i.call.apply(i,[this].concat(n))),"getIcon",(function(){return e.props.showIcon?se.a.createElement("i",{className:"icon "+e.props.customIcon}):null})),e}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,r=e.id,o=e.style,i=e.text,a=e.disabled;return se.a.createElement("button",{onClick:t,type:"submit",disabled:a,"data-id":this.props["data-id"],className:"btn save "+n,id:r,style:o},this.getIcon(),i)}}])&&qo(n.prototype,r),o&&qo(n,o),a}(se.a.Component);zo(Go,"propTypes",{showIcon:xt.a.bool,id:xt.a.string,customIcon:xt.a.string,style:xt.a.object,buttonType:xt.a.string,"data-id":xt.a.string,onClick:xt.a.func,disabled:xt.a.bool}),zo(Go,"defaultProps",{disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}});var Wo=n(117),Xo=n.n(Wo);function Qo(e){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $o(e,t,n){return t&&Yo(e.prototype,t),n&&Yo(e,n),e}function Zo(e){return function(){var t,n=ri(e);if(ni()){var r=ri(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return ei(this,t)}}function ei(e,t){return!t||"object"!==Qo(t)&&"function"!=typeof t?ti(e):t}function ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ni(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ri(e){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ci=function(e){oi(n,e);var t=Zo(n);function n(){var e;Jo(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ai(ti(e=t.call.apply(t,[this].concat(o))),"createSectionLinks",(function(t){return t?t.map((function(t,n){return e.createEntry(t,n)})):null})),ai(ti(e),"createEntry",(function(e,t){return se.a.createElement("li",{key:t},se.a.createElement("a",{className:cn()("icon",e.icon,{"fonticon-placeholder":!e.icon}),"data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,target:e.external?"_blank":""},e.title))})),ai(ti(e),"createSectionTitle",(function(e,t){return e?se.a.createElement("li",{key:t,className:"header-label"},e):null})),ai(ti(e),"createSection",(function(){return e.props.links.map((function(t,n){return t.title&&t.links?[e.createSectionTitle(t.title,"title_"+n),e.createSectionLinks(t.links)]:e.createEntry(t,"el"+n)}))})),e}return $o(n,[{key:"render",value:function(){var e=this.createSection(),t=this.props.hideArrow?"":"arrow",n="button"===this.props.toggleType?si:li;return se.a.createElement(sn.d,{id:"dropdown-menu"},se.a.createElement(n,{bsRole:"toggle",icon:this.props.icon}),se.a.createElement(ui,{bsRole:"menu",className:t},e))}}]),n}(se.a.Component);ai(ci,"defaultProps",{icon:"fonticon-plus-circled",hideArrow:!1,toggleType:"link"}),ai(ci,"propTypes",{icon:xt.a.string,hideArrow:xt.a.bool,links:xt.a.array.isRequired,toggleType:xt.a.string.isRequired});var si=function(e){oi(n,e);var t=Zo(n);function n(e,r){var o;return Jo(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind(ti(o)),o}return $o(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return se.a.createElement(sn.a,{onClick:this.handleClick},se.a.createElement("i",{className:"dropdown-toggle "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"}}),this.props.children)}}]),n}(se.a.Component),li=function(e){oi(n,e);var t=Zo(n);function n(e,r){var o;return Jo(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind(ti(o)),o}return $o(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return se.a.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),n}(se.a.Component),ui=function(e){oi(n,e);var t=Zo(n);function n(e,r){return Jo(this,n),t.call(this,e,r)}return $o(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,r=e.onClose,o=e.className;return se.a.createElement(Xo.a,{disabled:!n,onRootClose:r},se.a.createElement("ul",{className:cn()("dropdown-menu",o),role:"menu","aria-labelledby":"dLabel"},t))}}]),n}(se.a.Component),pi=n(16);function fi(e){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(){return(di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(e,t,n){return t&&yi(e.prototype,t),n&&yi(e,n),e}function bi(e){return function(){var t,n=_i(e);if(Ei()){var r=_i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return gi(this,t)}}function gi(e,t){return!t||"object"!==fi(t)&&"function"!=typeof t?vi(e):t}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ei(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oi(e,t)}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Di=function(e){wi(n,e);var t=bi(n);function n(e){var r;return mi(this,n),Si(vi(r=t.call(this,e)),"getChildren",(function(e){var t=e[0].style,n="tray show-tray "+r.props.className;return se.a.createElement("div",{key:"1",id:r.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:n},r.props.children)})),Si(vi(r),"willEnter",(function(){return{opacity:Object(pi.spring)(1),top:Object(pi.spring)(64)}})),Si(vi(r),"willLeave",(function(){return{opacity:Object(pi.spring)(0),top:Object(pi.spring)(30)}})),Si(vi(r),"getDefaultStyles",(function(){return[{key:"1",style:{opacity:0,top:30}}]})),Si(vi(r),"getStyles",(function(e){return e?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:r.willEnter()}]})),e.container||(r.container=vi(r)),r}return hi(n,[{key:"render",value:function(){return se.a.createElement(sn.g,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,onEnter:this.props.onEnter},se.a.createElement(pi.TransitionMotion,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),n}(se.a.Component);Si(Di,"propTypes",{contentVisible:xt.a.bool.isRequired,closeTray:xt.a.func.isRequired,onEnter:xt.a.func,container:xt.a.object}),Si(Di,"defaultProps",{onEnter:function(){}});var Ni=function(e){wi(n,e);var t=bi(n);function n(){var e;mi(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Si(vi(e=t.call.apply(t,[this].concat(o))),"renderChildren",(function(){return se.a.Children.map(e.props.children,(function(t){var n={};return Object.keys(e.props).filter((function(t){return Object.prototype.hasOwnProperty.call(e.props,t)})).map((function(t){return n[t]=e.props[t]})),se.a.cloneElement(t,n)}))})),e}return hi(n,[{key:"render",value:function(){return se.a.createElement("div",null,this.renderChildren())}}]),n}(se.a.Component);function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(e,t){return!t||"object"!==Ri(t)&&"function"!=typeof t?Ii(e):t}function Ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ai(e){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ki(e,t){return(ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Si(Ni,"defaultProps",{className:""});var Li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ki(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Ai(t);if(xi()){var r=Ai(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Pi(this,e)});function a(){var e;Ci(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ji(Ii(e=i.call.apply(i,[this].concat(n))),"state",{inputValue:"",disableSubmit:!0}),ji(Ii(e),"close",(function(t){t&&t.preventDefault(),e.setState({inputValue:"",disableSubmit:!0}),e.props.showHide({showModal:!1})})),ji(Ii(e),"open",(function(){e.props.showHide({showModal:!0})})),ji(Ii(e),"getDatabaseName",(function(){return e.props.modalProps.dbId.trim()})),ji(Ii(e),"onInputChange",(function(t){var n=t.target.value.trim();e.setState({inputValue:n}),e.setState({disableSubmit:n!==e.getDatabaseName()})})),ji(Ii(e),"onDeleteClick",(function(t){t.preventDefault(),sr.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),ji(Ii(e),"onInputKeypress",(function(t){13===t.keyCode&&!0!==e.state.disableSubmit&&sr.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),e}return n=a,(r=[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,r=e?se.a.createElement("p",{style:{color:"#d14"},className:"warning"},se.a.createElement("b",null,"You are about to delete a system database, be careful!")):null;return se.a.createElement(sn.f,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,"Confirm Deletion")),se.a.createElement(sn.f.Body,null,r,se.a.createElement("p",null,"Warning: This action will permanently delete ",se.a.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),se.a.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),se.a.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},se.a.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}])&&Ti(n.prototype,r),o&&Ti(n,o),a}(se.a.Component);ji(Li,"propTypes",{showHide:xt.a.func.isRequired,modalProps:xt.a.object,onSuccess:xt.a.func});var Mi=function(e){var t=e.selected,n=e.text,r=e.onChange,o=e.iconClass,i=e.badgeText,a=t?"tab-element-checked":"",c=null;return i&&(c=se.a.createElement("span",{className:"tab-element-badge"},i)),se.a.createElement("li",{className:"component-tab-element ".concat(a)},se.a.createElement("label",null,se.a.createElement("div",{className:"tab-element-indicator-wrapper"},se.a.createElement("div",{className:"tab-element-indicator"})),se.a.createElement("div",{className:"tab-element-content"},se.a.createElement("i",{className:o}),se.a.createElement("input",{type:"radio",value:n,checked:t,onChange:r}),n,c)))};Mi.propTypes={selected:xt.a.bool.isRequired,text:xt.a.string.isRequired,onChange:xt.a.func.isRequired,iconClass:xt.a.string,badgeText:xt.a.string};var Ui,qi=function(e){var t=e.children;return se.a.createElement("ul",{className:"component-tab-element-wrapper"},t)},Vi=n(317),Fi=n.n(Vi);function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hi(e,t){return!t||"object"!==Bi(t)&&"function"!=typeof t?zi(e):t}function zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t){return(Xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qi=function(){Ui&&window.clearInterval(Ui)},Ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xi(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Wi(t);if(Gi()){var r=Wi(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Hi(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={value:t.props.startValue},t.updatePollingFreq=t.updatePollingFreq.bind(zi(t)),t}return n=a,(r=[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){Qi()}},{key:"setPollingCounter",value:function(e){var t,n,r=this.props,o=r.min,i=r.max,a=r.onPoll;this.setState({value:e}),0===e||e<o||e>i?Qi():(t=1e3*e,n=function(){return a()},Qi(),Ui=window.setInterval(n,t))}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e.target.value,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,r=e.max,o=e.valueUnits,i=this.state.value,a=function(e,t,n,r){var o=parseInt(e,10);if(0===o||o>n||o<r)return"off";if(o<60&&"minute"===t)return"".concat(o," seconds");var i=o;return"minute"===t&&(i=Math.floor(o/60)),"".concat(i," ").concat(1===i?t:"".concat(t,"s"))}(i,o,r,n),c="off"===a?"faux__polling-info-value--off":"faux__polling-info-value--active";return se.a.createElement("div",{className:"faux__polling"},se.a.createElement("div",{className:"faux__polling-info"},se.a.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),se.a.createElement("span",{className:"faux__polling-info-value faux__polling-info-value ".concat(c)},a)),se.a.createElement(Fi.a,{onChange:this.updatePollingFreq,className:"faux__polling-info-slider",type:"range",value:i,min:n,max:r+t,step:t}))}}])&&Ki(n.prototype,r),o&&Ki(n,o),a}(se.a.Component);Ji.defaultProps={startValue:0,min:0,valueUnits:"minute"},Ji.propTypes={startValue:xt.a.number,valueUnits:xt.a.string,min:xt.a.number,max:xt.a.number.isRequired,stepSize:xt.a.number.isRequired,onPoll:xt.a.func.isRequired};var Yi=function(e){var t=e.refresh;return se.a.createElement("div",{className:"faux__refresh-btn"},se.a.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},se.a.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))};Yi.propTypes={refresh:xt.a.func.isRequired};var $i,Zi=n(318),ea=n.n(Zi);function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oa(e,t){return!t||"object"!==ta(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ia(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e,t){return(ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sa=function(e,t){($i=new ea.a("#copy-"+e)).on("success",(function(){t()}))},la=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ca(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=aa(t);if(ia()){var r=aa(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return oa(this,e)});function a(){return na(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"componentDidMount",value:function(){sa(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){$i.destroy()}},{key:"componentDidUpdate",value:function(){sa(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?se.a.createElement("i",{"aria-hidden":"true",className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return se.a.createElement("button",{"aria-label":"Copy to Clipboard",className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?se.a.createElement("p",null,se.a.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}])&&ra(n.prototype,r),o&&ra(n,o),a}(se.a.Component);function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fa(e,t){return!t||"object"!==ua(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function da(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ma(e){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ya(e,t){return(ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}la.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},la.propTypes={text:xt.a.string.isRequired,displayType:xt.a.oneOf(["icon","text","input"]),uniqueKey:xt.a.string.isRequired,onClipboardClick:xt.a.func.isRequired};var ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ya(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ma(t);if(da()){var r=ma(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return fa(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,r=n.map((function(e,n){return se.a.createElement(Mi,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){oe.navigate(e.route,{redirect:!0})},iconClass:""})})),o=n.reduce((function(e,n){return n.name===t?n:e}),{});return o.component?se.a.createElement("div",{className:"tab__wrapper"},se.a.createElement(qi,null,r),se.a.createElement("div",{className:"tab__container"},se.a.createElement(o.component,null))):null}}])&&pa(n.prototype,r),o&&pa(n,o),a}(se.a.Component);ha.propTypes={tabs:xt.a.array.isRequired,selectedTab:xt.a.string.isRequired};var ba=n(32);function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wa(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Sa(e){return(Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Da(e,t){return(Da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Da(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Sa(t);if(Oa()){var r=Sa(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return wa(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).lastCall=void 0,t}return n=a,(r=[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,r){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout((function(){e(n,r)}),400)}:function(){}}},{key:"render",value:function(){var e=this.wrapThrottler(this.props.loadOptions).bind(this),t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){Ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props,{loadOptions:e,onBlurResetsInput:!1});return se.a.createElement(ba.a.Async,t)}}])&&_a(n.prototype,r),o&&_a(n,o),a}(se.a.Component),Ra={Accordion:function(e){var t=e.children,n=e.className,r=e.style,o=cn()("faux--accordion",n);return se.a.createElement("ul",{className:o,style:r},t)},AccordionItem:gn,BadgeList:In,Badge:xn,BulkActionComponent:Jn,ConfirmButton:Go,ToggleHeaderButton:Vn,StyledSelect:or,CodeEditorPanel:mo,CodeEditor:xr,StringEditModal:wr,ZenModeOverlay:no,Beautify:zr,PaddedBorderedBox:wo,Polling:Ji,Document:jo,LoadLines:Lo,MenuDropDown:ci,TrayContents:Di,TrayWrapper:Ni,connectToStores:function(e,t,n){return function(r){wi(i,r);var o=bi(i);function i(){var e;mi(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Si(vi(e=o.call.apply(o,[this].concat(r))),"state",n(e.props)),Si(vi(e),"onChange",(function(){e.setState(n(e.props))})),Si(vi(e),"handleStoresChanged",(function(){e.setState(n(e.props))})),e}return hi(i,[{key:"componentDidMount",value:function(){var e=this;t.forEach((function(t){t.on("change",e.onChange,e)}))}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return se.a.createElement(e,di({},this.state,this.props))}}]),i}(se.a.Component)},DeleteDatabaseModal:Li,TabElement:Mi,TabElementWrapper:qi,RefreshBtn:Yi,Copy:la,TabWindowWrapper:ha,ThrottledReactSelectAsync:Na},Ca={};Ca.DeleteDbModalStore=oe.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=ae.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){switch(e.type){case cr:this.setDeleteModal(e.options);break;default:return}this.triggerChange()}}),Ca.deleteDbModalStore=new Ca.DeleteDbModalStore,Ca.deleteDbModalStore.dispatchToken=oe.dispatcher.register(Ca.deleteDbModalStore.dispatch.bind(Ca.deleteDbModalStore));var Ta=Ca;function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t){return!t||"object"!==Pa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Aa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e,t){return(ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var La=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ka(t);if(Aa()){var r=ka(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return xa(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,(function(e){return se.a.createElement("option",{value:e,key:e},e)}))}},{key:"render",value:function(){return se.a.createElement("div",{id:"per-page"},se.a.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label,"  ",se.a.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}])&&Ia(n.prototype,r),o&&Ia(n,o),a}(se.a.Component);function Ma(e){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(e,t,n){return t&&qa(e.prototype,t),n&&qa(e,n),e}function Fa(e){return function(){var t,n=za(e);if(Ha()){var r=za(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Ba(this,t)}}function Ba(e,t){return!t||"object"!==Ma(t)&&"function"!=typeof t?Ka(e):t}function Ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ha(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}La.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},La.propTypes={perPage:xt.a.number.isRequired,perPageChange:xt.a.func.isRequired,label:xt.a.string,options:xt.a.array};var Qa=function(e){Ga(n,e);var t=Fa(n);function n(){var e;Ua(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Xa(Ka(e=t.call.apply(t,[this].concat(o))),"getClasses",(function(){var t={js:"lang-js"},n="prettyprint";return _.has(t,e.props.lang)&&(n+=" "+t[e.props.lang]),n})),e}return Va(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return se.a.createElement("div",null,se.a.createElement("pre",{className:this.getClasses()},e))}}]),n}(se.a.Component);Xa(Qa,"defaultProps",{lang:"js"});var Ja=function(e){Ga(n,e);var t=Fa(n);function n(){var e;Ua(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Xa(Ka(e=t.call.apply(t,[this].concat(o))),"getVisiblePages",(function(t,n){var r,o;if(n<e.props.maxNavPages)r=1,o=n+1;else{var i=Math.floor(e.props.maxNavPages/2);o=t+i,(r=t-i)<=1&&(r=1,o=e.props.maxNavPages+1),o>n+1&&(r=n-(e.props.maxNavPages-1),o=n+1)}return{from:r,to:o}})),Xa(Ka(e),"createItemsForPage",(function(t){return _.range(t.from,t.to).map((function(t){return se.a.createElement("li",{key:t,className:e.props.page===t?"active":null},e.getLink(t,t))}))})),Xa(Ka(e),"getLink",(function(t,n){return e.props.onClick?se.a.createElement("a",{onClick:e.getOnPageClick(t),dangerouslySetInnerHTML:{__html:n}}):se.a.createElement("a",{href:e.props.urlPrefix+t+e.props.urlSuffix,dangerouslySetInnerHTML:{__html:n}})})),Xa(Ka(e),"getTotalPages",(function(){return 0===e.props.total?1:Math.ceil(e.props.total/e.props.perPage)})),e}return Va(n,[{key:"getOnPageClick",value:function(e){var t=this;return function(n){n&&n.preventDefault(),t.props.onClick(e)}}},{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),r=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return se.a.createElement("ul",{className:"pagination"},se.a.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(r,"&laquo;")),n,se.a.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),n}(se.a.Component);Xa(Ja,"defaultProps",{perPage:oe.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10});var Ya=function(e){Ga(n,e);var t=Fa(n);function n(){var e;Ua(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Xa(Ka(e=t.call.apply(t,[this].concat(o))),"close",(function(t){t&&t.preventDefault(),e.props.onClose()})),e}return Va(n,[{key:"render",value:function(){var e=se.a.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass;return se.a.createElement(sn.f,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,this.props.title)),se.a.createElement(sn.f.Body,null,e),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"),se.a.createElement("button",{className:t,onClick:this.props.onSubmit},se.a.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel)))}}]),n}(se.a.Component);Xa(Ya,"propTypes",{visible:xt.a.bool.isRequired,text:xt.a.oneOfType([xt.a.string,xt.a.element]).isRequired,onClose:xt.a.func.isRequired,onSubmit:xt.a.func.isRequired}),Xa(Ya,"defaultProps",{visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary",onClose:function(){},onSubmit:function(){}});var $a={CodeFormat:Qa,Pagination:Ja,ConfirmationModal:Ya};function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nc(e,t,n){return t&&tc(e.prototype,t),n&&tc(e,n),e}function rc(e){return function(){var t,n=cc(e);if(ac()){var r=cc(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return oc(this,t)}}function oc(e,t){return!t||"object"!==Za(t)&&"function"!=typeof t?ic(e):t}function ic(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ac(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function cc(e){return(cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lc(e,t)}function lc(e,t){return(lc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pc=Ot.databasesStore,fc=Ta.deleteDbModalStore,dc=Ra.Accordion,mc=Ra.AccordionItem,yc=Ra.DeleteDatabaseModal,hc=Ra.ToggleHeaderButton,bc=Ra.TrayContents,gc=function(e){sc(n,e);var t=rc(n);function n(e){var r;return ec(this,n),uc(ic(r=t.call(this,e)),"getStoreState",(function(){return{dbList:pc.getDbList(),loading:pc.isLoading(),showDeleteDatabaseModal:fc.getShowDeleteDatabaseModal(),showPartitionedColumn:pc.isPartitionedDatabasesAvailable(),page:pc.getPage(),limit:pc.getLimit()}})),uc(ic(r),"onChange",(function(){r.setState(r.getStoreState())})),uc(ic(r),"state",r.getStoreState()),r.reloadAfterDatabaseDeleted=r.reloadAfterDatabaseDeleted.bind(ic(r)),r}return nc(n,[{key:"componentDidMount",value:function(){pc.on("change",this.onChange,this),fc.on("change",this.onChange,this),this.loadData()}},{key:"componentDidUpdate",value:function(e,t){t.page===this.state.page&&t.limit===this.state.limit||this.loadData()}},{key:"loadData",value:function(){Pt.init({page:this.state.page,limit:this.state.limit})}},{key:"componentWillUnmount",value:function(){pc.off("change",this.onChange,this),fc.off("change",this.onChange,this)}},{key:"reloadAfterDatabaseDeleted",value:function(){var e=this.state.page;e>1&&1===this.state.dbList.length&&(e-=1),Pt.init({page:e,limit:this.state.limit})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return se.a.createElement(vc,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t,showPartitionedColumn:this.state.showPartitionedColumn,onDatabaseDeleted:this.reloadAfterDatabaseDeleted})}}]),n}(se.a.Component),vc=function(e){sc(n,e);var t=rc(n);function n(){var e;ec(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return uc(ic(e=t.call.apply(t,[this].concat(o))),"createRows",(function(t){return t.map((function(t,n){return se.a.createElement(Ec,{item:t,key:n,showPartitionedColumn:e.props.showPartitionedColumn})}))})),uc(ic(e),"getExtensionColumns",(function(){var e=oe.getExtensions("DatabaseTable:head");return _.map(e,(function(e,t){return se.a.createElement(e,{key:t})}))})),uc(ic(e),"showDeleteDatabaseModal",(function(){sr.showDeleteDatabaseModal({showDeleteModal:!e.props.showDeleteDatabaseModal.showDeleteModal})})),e}return nc(n,[{key:"render",value:function(){if(this.props.loading)return se.a.createElement("div",{className:"view"},se.a.createElement(Ra.LoadLines,null));var e=this.createRows(this.props.dbList);return se.a.createElement("div",{className:"view"},se.a.createElement(yc,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal,onSuccess:this.props.onDatabaseDeleted}),se.a.createElement("table",{className:"table table-striped fauxton-table-list databases"},se.a.createElement("thead",null,se.a.createElement("tr",null,se.a.createElement("th",null,"Name"),se.a.createElement("th",null,"Size"),se.a.createElement("th",null,"# of Docs"),this.props.showPartitionedColumn?se.a.createElement("th",null,"Partitioned"):null,this.getExtensionColumns(),se.a.createElement("th",null,"Actions"))),se.a.createElement("tbody",null,e)))}}]),n}(se.a.Component);uc(vc,"propTypes",{dbList:xt.a.array.isRequired,showDeleteDatabaseModal:xt.a.object.isRequired,loading:xt.a.bool.isRequired,showPartitionedColumn:xt.a.bool.isRequired,onDatabaseDeleted:xt.a.func});var Ec=function(e){sc(n,e);var t=rc(n);function n(){var e;ec(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return uc(ic(e=t.call.apply(t,[this].concat(o))),"getExtensionColumns",(function(e){var t=oe.getExtensions("DatabaseTable:databaseRow");return _.map(t,(function(t,n){return se.a.createElement(t,{row:e,key:n})}))})),uc(ic(e),"showDeleteDatabaseModal",(function(e){sr.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})})),e}return nc(n,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,r=e.url,o=e.dataSize,i=e.docCount,a=e.docDelCount,c=e.showTombstoneWarning,s=e.failed,l=e.isPartitioned,u=c?se.a.createElement(_c,{docCount:i,docDelCount:a}):null;if(s)return se.a.createElement("tr",null,se.a.createElement("td",{"data-name":"database-load-fail-name"},n),se.a.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load."));var p=this.props.showPartitionedColumn?se.a.createElement("td",null,l?"Yes":"No"):null;return se.a.createElement("tr",null,se.a.createElement("td",null,se.a.createElement("a",{href:r},n)),se.a.createElement("td",null,o),se.a.createElement("td",null,i," ",u),p,this.getExtensionColumns(e),se.a.createElement("td",{className:"database-actions"},se.a.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start","aria-label":"Replicate ".concat(n),title:"Replicate "+name,href:"#/replication/_create/"+t}),se.a.createElement("a",{"aria-label":"Set permissions for ".concat(n),className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),se.a.createElement("a",{"aria-label":"Delete ".concat(n),className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),n}(se.a.Component);uc(Ec,"propTypes",{item:xt.a.shape({id:xt.a.string.isRequired,encodedId:xt.a.string.isRequired,url:xt.a.string.isRequired,failed:xt.a.bool.isRequired,dataSize:xt.a.string,docCount:xt.a.number,docDelCount:xt.a.number,isPartitioned:xt.a.bool,showTombstoneWarning:xt.a.bool}).isRequired,showPartitionedColumn:xt.a.bool.isRequired});var _c=function(e){var t=e.docCount,n=e.docDelCount,r="This database has just ".concat(t," docs and ").concat(n," deleted docs"),o=se.a.createElement(sn.k,{id:"graveyard-tooltip"},r);return se.a.createElement(sn.h,{placement:"top",overlay:o},se.a.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:r}))},wc=function(e){sc(n,e);var t=rc(n);function n(e){var r;return ec(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return nc(n,[{key:"getStoreState",value:function(){return{showPartitionedOption:pc.isPartitionedDatabasesAvailable()}}},{key:"componentDidMount",value:function(){pc.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){pc.off("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){return se.a.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},se.a.createElement(Sc,{loadOptions:Pt.fetchAllDbsWithKey}),se.a.createElement(Oc,{showPartitionedOption:this.state.showPartitionedOption,partitionedDbHelpText:this.props.partitionedDbHelpText}))}}]),n}(se.a.Component),Oc=function(e){sc(n,e);var t=rc(n);function n(e){var r;return ec(this,n),(r=t.call(this,e)).state={isPromptVisible:!1,databaseName:"",partitionedSelected:void 0},r.onTrayToggle=r.onTrayToggle.bind(ic(r)),r.closeTray=r.closeTray.bind(ic(r)),r.focusInput=r.focusInput.bind(ic(r)),r.onKeyUpInInput=r.onKeyUpInInput.bind(ic(r)),r.onChange=r.onChange.bind(ic(r)),r.onAddDatabase=r.onAddDatabase.bind(ic(r)),r.onSetPartitioned=r.onSetPartitioned.bind(ic(r)),r.onSetNotPartitioned=r.onSetNotPartitioned.bind(ic(r)),r}return nc(n,[{key:"getI18nText",value:function(e){return this.props.i18n?this.props.i18n[e]:""}},{key:"onTrayToggle",value:function(){this.setState({isPromptVisible:!this.state.isPromptVisible})}},{key:"closeTray",value:function(){this.setState({isPromptVisible:!1})}},{key:"focusInput",value:function(){this.newDbName.focus()}},{key:"onKeyUpInInput",value:function(e){13===e.which&&this.onAddDatabase()}},{key:"onChange",value:function(e){this.setState({databaseName:e.target.value})}},{key:"onAddDatabase",value:function(){if(this.props.showPartitionedOption&&void 0===this.state.partitionedSelected)oe.addNotification({type:"error",msg:"Please select either Partitioned or Non-partitioned",clear:!0});else{var e=this.props.showPartitionedOption?this.state.partitionedSelected:void 0;Pt.createNewDatabase(this.state.databaseName,e)}}},{key:"onSetNotPartitioned",value:function(){this.setState({partitionedSelected:!1})}},{key:"onSetPartitioned",value:function(){this.setState({partitionedSelected:!0})}},{key:"partitionedOption",value:function(){if(!this.props.showPartitionedOption)return null;var e=this.props.partitionedDbHelpText?se.a.createElement(dc,{className:"partitioned-db-help"},se.a.createElement(mc,{title:"What is a Partitioned Database?"},se.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.partitionedDbHelpText}}))):null;return se.a.createElement("div",{className:"partitioned-db-section"},se.a.createElement("label",{htmlFor:"partitioned-db",className:"partitioned-db-label"},"Partitioning"),se.a.createElement("div",{className:"partitioned-db-options"},se.a.createElement("input",{id:"partitioned-db",type:"radio",checked:!0===this.state.partitionedSelected,onChange:this.onSetPartitioned}),se.a.createElement("label",{htmlFor:"partitioned-db"},"Partitioned"),se.a.createElement("input",{id:"non-partitioned-db",type:"radio",checked:!1===this.state.partitionedSelected,onChange:this.onSetNotPartitioned}),se.a.createElement("label",{htmlFor:"non-partitioned-db"},"Non-partitioned")),e)}},{key:"render",value:function(){var e=this,t=cn()("new-database-tray",{"new-database-tray--expanded":this.props.showPartitionedOption});return se.a.createElement("div",null,se.a.createElement(hc,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),se.a.createElement(bc,{className:t,contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},se.a.createElement("div",{className:"tray-contents"},se.a.createElement("div",{className:"tray-header"},se.a.createElement("h3",null,"Create Database")),se.a.createElement("div",{className:"tray-body"},se.a.createElement("label",{htmlFor:"js-new-database-name",className:"db-name-label"},"Database name"),se.a.createElement("input",{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"database-name"}),this.partitionedOption()),se.a.createElement("div",{className:"tray-footer"},se.a.createElement("a",{className:"btn btn-cancel",id:"js-cancel-create-database",onClick:this.closeTray},"Cancel"),se.a.createElement("a",{className:"btn btn-primary",id:"js-create-database",onClick:this.onAddDatabase},"Create")))))}}]),n}(se.a.Component);uc(Oc,"defaultProps",{showPartitionedOption:!1}),uc(Oc,"propTypes",{showPartitionedOption:xt.a.bool.isRequired,partitionedDbHelpText:xt.a.string});var Sc=function(e){var t=e.loadOptions;return se.a.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},se.a.createElement("div",{className:"faux-header__searchboxcontainer"},se.a.createElement(Ra.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;Pt.jumpToDatabase(t)}})))};Sc.propTypes={loadOptions:xt.a.func.isRequired};var Dc=function(e){sc(n,e);var t=rc(n);function n(){var e;ec(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return uc(ic(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage(),limit:t.getLimit()}})),uc(ic(e),"onChange",(function(){e.setState(e.getStoreState(e.props))})),uc(ic(e),"state",e.getStoreState(e.props)),e}return nc(n,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"onPageLinkClick",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(e,"&limit=").concat(this.state.limit);oe.navigate(t)}},{key:"onPerPageSelected",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(this.state.page,"&limit=").concat(e);oe.navigate(t)}},{key:"render",value:function(){var e=this.state,t=e.limit,n=e.page,r=e.totalAmountOfDatabases,o=1+(n-1)*t,i=Math.min(r,n*t);return se.a.createElement("footer",{className:"all-db-footer pagination-footer"},se.a.createElement("div",{id:"database-pagination"},se.a.createElement($a.Pagination,{page:n,total:r,perPage:t,onClick:this.onPageLinkClick.bind(this)})),se.a.createElement(La,{label:"Databases per page",perPage:t,perPageChange:this.onPerPageSelected.bind(this)}),se.a.createElement("div",{className:"current-databases"},"Showing ",se.a.createElement("span",{className:"all-db-footer__range"},o,"–",i)," of ",se.a.createElement("span",{className:"all-db-footer__total-db-count"},r)," databases."))}}]),n}(se.a.Component);uc(Dc,"defaultProps",{linkPath:"_all_dbs",store:pc});var Nc={DatabasesController:gc,DatabaseTable:vc,DatabaseRow:Ec,RightDatabasesHeader:wc,GraveyardInfo:_c,AddDatabaseWidget:Oc,JumpToDatabaseWidget:Sc,DatabasePagination:Dc},Rc=Nc.RightDatabasesHeader,Cc=Nc.DatabasesController,Tc=Nc.DatabasePagination,Pc=function(){return se.a.createElement($t,null,se.a.createElement(Zt,{crumbs:[{name:"Databases"}],endpoint:oe.urls("allDBs","apiurl"),docURL:oe.constants.DOC_URLS.ALL_DBS},se.a.createElement(Rc,{partitionedDbHelpText:ae.i18n.en_US["create-db-partitioned-help"]})),se.a.createElement(en,null,se.a.createElement(Cc,null)),se.a.createElement(tn,null,se.a.createElement(Tc,null)))},Ic=oe.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:extra)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(e,t){var n=this.createParams(t),r=n.page,o=n.limit;return Pt.setPage(r),o&&Pt.setLimit(o),se.a.createElement(Pc,null)},createParams:function(e){var t=1,n=void 0;if(e){var r=ae.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}});gt.RouteObjects=[Ic];var xc=gt;function Ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(n),!0).forEach((function(t){jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lc={partitionedDatabasesAvailable:!1,isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1};function Mc(e){return!(!e||!e.props||!0!==e.props.partitioned)}n(602);function Uc(e){return e?"/_partition/".concat(e):""}xc.initialize=function(){oe.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"}),Pt.checkPartitionedQueriesIsAvailable()},xc.PARTITONED_DB_CHECK_EXTENSION="Databases:PartitionedDbCheck",oe.registerExtension(xc.PARTITONED_DB_CHECK_EXTENSION,(function(){return E(R.getServerUrl("/")).then((function(e){return!(!e.features||-1===e.features.indexOf("partitioned"))||!(!e.features_flags||-1===e.features_flags.indexOf("partitioned"))})).catch((function(){return!1}))})),oe.addReducers({databases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case st:return kc({},e,{partitionedDatabasesAvailable:t.options.available});case lt:return kc({},e,{isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1});case ut:return kc({},e,{isLoadingDbInfo:!1,dbInfo:t.options.metadata,isDbPartitioned:Mc(t.options.metadata)});default:return e}}}),xc.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",ae.utils.safeURLName(t),"/_all_docs?limit="+xc.DocLimit].join("")},oe.registerUrls("changes",{server:function(e,t){return R.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t,n){return"/database/"+e+Uc(t)+"/_changes"+n},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_changes"+t)}}),oe.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return R.getServerUrl("/_all_dbs".concat(e))},app:function(){return"_all_dbs"},apiurl:function(){return R.getApiUrl("/_all_dbs")}}),oe.registerUrls("databaseBaseURL",{server:function(e){return R.getServerUrl("/"+ae.utils.safeURLName(e))},apiurl:function(e){return R.getApiUrl("/"+ae.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),oe.registerUrls("permissions",{server:function(e){return R.getServerUrl("/"+e+"/_security")},app:function(e,t){return"/database/"+e+Uc(t)+"/permissions"},apiurl:function(e){return R.getApiUrl("/"+e+"/_security")}});var qc=xc,Vc="SIDEBAR_EXPAND_SELECTED_ITEM",Fc="SIDEBAR_NEW_OPTIONS",Bc="SIDEBAR_TOGGLE_CONTENT",Kc="SIDEBAR_FETCHING",Hc="SIDEBAR_SHOW_DELETE_INDEX_MODAL",zc="SIDEBAR_HIDE_DELETE_INDEX_MODAL",Gc="SIDEBAR_SHOW_CLONE_INDEX_MODAL",Wc="SIDEBAR_HIDE_CLONE_INDEX_MODAL",Xc="SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",Qc="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",Jc="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED",Yc="SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",$c="SIDEBAR_UPDATED_DESIGN_DOCS",Zc=function(e){var t,n;e.database.safeID()!==(t=oe.reduxState(),!(n=t.sidebar)||n.loading?"":n.database.safeID())&&oe.reduxDispatch({type:Kc}),e.designDocs.fetch().then((function(){oe.reduxDispatch({type:Fc,options:e})}),(function(t){var n="Unable to update the sidebar.";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist."),oe.navigate("/",{trigger:!0})}oe.addNotification({msg:n,type:"error",clear:!0})}))},es=function(e){oe.reduxDispatch({type:Kc}),e.fetch().then((function(){oe.reduxDispatch({type:$c,options:{designDocs:e}})}))},ts=function(e,t){return function(n){n({type:Bc,designDoc:e,indexGroup:t})}},ns=function(e,t,n,r){return function(o){o({type:Hc,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:r}})}},rs=function(){return function(e){e({type:zc})}},os=function(){oe.reduxDispatch({type:zc})},is=function(e,t,n,r){return function(o){o({type:Gc,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:r,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}},as=function(){return function(e){e({type:Wc})}},cs=function(e){return function(t){t({type:Qc,options:{value:e}})}},ss=function(e){return function(t){t({type:Jc,options:{value:e}})}},ls=function(e){return function(t){t({type:Xc,options:{value:e}})}},us=function(e){return function(t){t({type:Yc,options:{value:e}})}},ps=function(e){oe.reduxDispatch({type:Vc,options:{selectedNavItem:e}})},fs=oe.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new yt.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),Zc(t)},getCrumbs:function(e){return[{type:"back",link:oe.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=ae.getParams(e);return{urlParams:t,docParams:yt.QueryParams.parse(t)}}});var ds=function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navItem=t,n){var r=n.designDocName,o=n.designDocSection,i=n.indexName;this.designDocName=r||"",this.designDocSection=o||"",this.indexName=i||""}};function ms(e){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hs(e,t){return!t||"object"!==ms(t)&&"function"!=typeof t?bs(e):t}function bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function vs(e){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Es(e,t){return(Es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _s=Ra.StyledSelect,ws=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Es(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=vs(t);if(gs()){var r=vs(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return hs(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).onTogglePartitioned=t.onTogglePartitioned.bind(bs(t)),t}return n=a,(r=[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(oe.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map((function(e){return se.a.createElement("option",{key:e,value:e},e)})):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return se.a.createElement("div",{id:"new-ddoc-section",className:"span5"},se.a.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),se.a.createElement("div",{className:"controls"},se.a.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?se.a.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},se.a.createElement("i",{className:"icon-question-sign"})):null}},{key:"onTogglePartitioned",value:function(){this.props.onChangeNewDesignDocPartitioned(!this.props.newDesignDocPartitioned)}},{key:"getPartitionedCheckbox",value:function(){if(!this.props.isDbPartitioned)return null;var e="new-doc"!==this.props.selectedDesignDocName,t=e?this.props.selectedDesignDocPartitioned:this.props.newDesignDocPartitioned,n=e?"check--disabled":"",r=e?this.props.selectedDesignDocPartitioned?"Design document is partitioned":"Design document is not partitioned":this.props.newDesignDocPartitioned?"New document will be partitioned":"New document will not be partitioned";return se.a.createElement("div",{className:"ddoc-selector-partitioned"},se.a.createElement("label",{className:n,title:r},se.a.createElement("input",{id:"js-ddoc-selector-partitioned",type:"checkbox",title:r,checked:t,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"},disabled:e}),"Partitioned"))}},{key:"render",value:function(){var e=se.a.createElement("optgroup",{label:"Select a document"},se.a.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return se.a.createElement("div",{className:"design-doc-group control-group"},se.a.createElement("div",{className:"span3"},se.a.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),se.a.createElement(_s,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField(),this.getPartitionedCheckbox())}}])&&ys(n.prototype,r),o&&ys(n,o),a}(ce.Component);function Os(e){return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ds(e,t){return!t||"object"!==Os(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ns(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Rs(e){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cs(e,t){return(Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ws.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},ws.propTypes={designDocList:xt.a.array.isRequired,onSelectDesignDoc:xt.a.func.isRequired,onChangeNewDesignDocName:xt.a.func.isRequired,selectedDesignDocName:xt.a.string.isRequired,selectedDesignDocPartitioned:xt.a.bool.isRequired,newDesignDocName:xt.a.string.isRequired,newDesignDocPartitioned:xt.a.bool.isRequired,designDocLabel:xt.a.string,docURL:xt.a.string};var Ts=ae.helpers.getDocUrl,Ps=Ra.CodeEditorPanel,Is=Ra.StyledSelect,xs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Rs(t);if(Ns()){var r=Rs(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ds(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"getOptionsList",value:function(){return this.props.reduceOptions.map((function(e,t){return se.a.createElement("option",{key:t,value:e},e)}))}},{key:"getReduceValue",value:function(){return this.props.hasReduce?this.props.hasCustomReduce?this.reduceEditor.getValue():this.props.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){this.props.updateReduceCode(e)}},{key:"selectChange",value:function(e){this.props.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e,t=this,n=this.getOptionsList();return this.props.hasCustomReduce&&this.props.customReducerSupported?e=se.a.createElement(Ps,{ref:function(e){return t.reduceEditor=e},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.props.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)}):this.props.customReducerSupported||(e=se.a.createElement("div",{className:"reduce-editor-warning"},se.a.createElement("label",null,"Partitioned views do not support custom reduce functions."))),se.a.createElement("div",null,se.a.createElement("div",{className:"control-group"},se.a.createElement("label",{htmlFor:"reduce-function-selector"},se.a.createElement("span",null,"Reduce (optional)"),se.a.createElement("a",{className:"help-link","data-bypass":"true",href:Ts("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},se.a.createElement("i",{className:"icon-question-sign"}))),se.a.createElement(Is,{selectContent:n,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.props.reduceSelectedOption})),e)}}])&&Ss(n.prototype,r),o&&Ss(n,o),a}(ce.Component);function As(e){return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ks(){return(ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e,t){return!t||"object"!==As(t)&&"function"!=typeof t?Ms(e):t}function Ms(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Us(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qs(e){return(qs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}xs.defaultProps={customReducerSupported:!0},xs.propTypes={reduceOptions:xt.a.array.isRequired,hasReduce:xt.a.bool.isRequired,hasCustomReduce:xt.a.bool.isRequired,customReducerSupported:xt.a.bool,reduce:xt.a.string,reduceSelectedOption:xt.a.string.isRequired,updateReduceCode:xt.a.func.isRequired,selectReduceChanged:xt.a.func.isRequired};var Fs=ae.helpers.getDocUrl,Bs=Ra.CodeEditorPanel,Ks=Ra.ConfirmButton,Hs=Ra.LoadLines,zs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=qs(t);if(Us()){var r=qs(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ls(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).saveView=t.saveView.bind(Ms(t)),t.viewChange=t.viewChange.bind(Ms(t)),t.updateMapCode=t.updateMapCode.bind(Ms(t)),t}return n=a,(r=[{key:"componentDidUpdate",value:function(e){this.props.map!==e.map&&this.mapEditor&&this.mapEditor.update()}},{key:"isPartitionedView",value:function(){return"new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned}},{key:"isCustomReduceSupported",value:function(){return!(this.props.isDbPartitioned&&this.props.reduce&&!this.props.reduce.startsWith("_")&&("new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned))}},{key:"saveView",value:function(e){if(e.preventDefault(),this.designDocSelector.validate())if(this.isCustomReduceSupported()){var t=this.isPartitionedView()&&this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=oe.urls("view","showView",this.props.database.safeID(),t,this.props.saveDesignDoc.safeID(),encodeURIComponent(this.props.viewName));this.props.saveView({database:this.props.database,isNewView:this.props.isNewView,viewName:this.props.viewName,designDoc:this.props.saveDesignDoc,designDocId:this.props.designDocId,isNewDesignDoc:this.props.isNewDesignDoc,originalViewName:this.props.originalViewName,originalDesignDocName:this.props.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.props.designDocs},n)}else oe.addNotification({msg:"Partitioned views do not support custom reduce functions.",type:"error",clear:!0})}},{key:"viewChange",value:function(e){this.props.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){this.props.updateMapCode(e)}},{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if("new-doc"===this.props.designDocId||this.props.isNewView)return"#"+oe.urls("allDocs","app",e,t);var n=this.props.designDocId.startsWith("_design/")?"_design/"+encodeURIComponent(this.props.designDocId.substring(8)):encodeURIComponent(this.props.designDocId),r=encodeURIComponent(this.props.viewName);return"#"+oe.urls("view","showView",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return se.a.createElement("div",{className:"define-view"},se.a.createElement(Hs,null));var t=this.props.isNewView?"New View":"Edit View",n=this.props.isNewView?"Create Document and then Build Index":"Save Document and then Build Index";return se.a.createElement("div",{className:"define-view"},se.a.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView},se.a.createElement("h3",{className:"simple-header"},t),se.a.createElement("div",{className:"new-ddoc-section"},se.a.createElement(ws,{ref:function(t){e.designDocSelector=t},designDocList:this.props.designDocList,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.designDocId,selectedDesignDocPartitioned:this.props.designDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:Fs("DESIGN_DOCS")})),se.a.createElement("div",{className:"control-group"},se.a.createElement("label",{htmlFor:"index-name"},se.a.createElement("span",null,"Index name"),se.a.createElement("a",{className:"help-link","data-bypass":"true",href:Fs("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},se.a.createElement("i",{className:"icon-question-sign"}))),se.a.createElement("input",{type:"text",id:"index-name",value:this.props.viewName,onChange:this.viewChange,placeholder:"Index name"})),se.a.createElement(Bs,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:Fs("MAP_FUNCS"),blur:this.updateMapCode,allowZenMode:!1,defaultCode:this.props.map}),se.a.createElement(xs,ks({ref:function(t){e.reduceEditor=t},customReducerSupported:this.isCustomReduceSupported()},this.props)),se.a.createElement("div",{className:"padded-box"},se.a.createElement("div",{className:"control-group"},se.a.createElement(Ks,{id:"save-view",text:n}),se.a.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))))}}])&&js(n.prototype,r),o&&js(n,o),a}(ce.Component);zs.propTypes={isLoading:xt.a.bool.isRequired,isNewView:xt.a.bool.isRequired,database:xt.a.object.isRequired,isDbPartitioned:xt.a.bool.isRequired,designDocId:xt.a.string.isRequired,newDesignDocName:xt.a.string.isRequired,viewName:xt.a.string.isRequired,isNewDesignDoc:xt.a.bool.isRequired,originalViewName:xt.a.string,originalDesignDocName:xt.a.string,designDocs:xt.a.object,saveDesignDoc:xt.a.object,partitionKey:xt.a.string,updateNewDesignDocName:xt.a.func.isRequired,changeViewName:xt.a.func.isRequired,updateMapCode:xt.a.func.isRequired};var Gs="CLEAR_INDEX",Ws="EDIT_INDEX",Xs="EDIT_NEW_INDEX",Qs="SELECT_REDUCE_CHANGE",Js="VIEW_SAVED",Ys="VIEW_CREATED",$s="DESIGN_DOC_CHANGE",Zs="DESIGN_DOC_NEW_NAME_UPDATED",el="DESIGN_DOC_NEW_PARTITIONED_UPDATED",tl="VIEW_NAME_CHANGE",nl="VIEW_ADD_DESIGN_DOC",rl="VIEW_UPDATE_MAP_CODE",ol="VIEW_UPDATE_REDUCE_CODE",il=function(e){return function(t){t({type:Ws,options:e})}},al=function(e){return!e.isNewView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName},cl=function(e){return function(t){t({type:nl,designDoc:e.toJSON()})}},sl=function(e,t,n,r,o){var i=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;oe.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),a=e.get(n)||{};delete a[r];var c={};c[n]=a,e.set(c);var s,l=oe.getIndexTypePropNames(),u=_.some(l,(function(t){return e.get(t)&&_.keys(e.get(t)).length>0})),p=!1;return u?s=e.save():(s=e.destroy(),p=!0),s.then((function(){p&&t.remove(e.id),i.onSuccess()}),i.onError)},ll=function(e,t){return e.find((function(e){return e.id===t})).dDocModel()},ul=function(e,t,n,r,o,i){if("new-doc"===t){var a={_id:"_design/"+n,views:{},language:"javascript"},c=new ht.Doc(a,{database:o});return i&&c.setDDocPartitionedOption(r),c}var s=e.find((function(e){return e.id===t}));return s?s.dDocModel():null},pl={helpers:{findDesignDoc:ll,getDesignDoc:ul},safeDeleteIndex:sl,selectReduceChanged:function(e){return function(t){t({type:Qs,reduceSelectedOption:e})}},changeViewName:function(e){return function(t){t({type:tl,name:e})}},editIndex:il,dispatchClearIndex:function(){oe.reduxDispatch({type:Gs})},dispatchFetchDesignDocsBeforeEdit:function(e){e.designDocs.fetch({reset:!0}).then((function(){il(e)(oe.reduxDispatch)}),(function(t){var n="Error";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist"),oe.navigate("/",{trigger:!0})}oe.addNotification({msg:n,type:"error",clear:!0})}))},shouldRemoveDdocView:al,saveView:function(e,t){return function(n){var r=e.designDoc;r.setDdocView(e.viewName,e.map,e.reduce),oe.addNotification({msg:"Saving View...",type:"info",clear:!0}),al(e)&&r.removeDdocView(e.originalViewName),r.save().then((function(){if(oe.addNotification({msg:"View Saved.",type:"success",clear:!0}),!e.isNewView&&e.originalDesignDocName!==e.designDocId){var o=ll(e.designDocs,e.originalDesignDocName);sl(o,e.designDocs,"views",e.originalViewName,{onSuccess:function(){es(e.designDocs)}})}"new-doc"===e.designDocId&&cl(r),es(e.designDocs),n({type:Js}),oe.navigate(t,{trigger:!0})}),(function(e){oe.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: ".concat(e.responseJSON.reason):""),type:"error",clear:!0})}))}},addDesignDoc:cl,deleteView:function(e){return sl(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=oe.urls("allDocs","app",e.database.safeID());oe.navigate(t)}es(e.designDocs),oe.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),os()}})},cloneView:function(e){var t=ul(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.newDesignDocPartitioned,e.database,e.isDbPartitioned),n=t.get("views");if(n&&_.has(n,e.newIndexName))oe.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=ll(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.views[e.sourceIndexName],t.set({views:n}),t.save().then((function(){e.onComplete(),oe.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),es(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;oe.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},gotoEditViewPage:function(e,t,n,r){oe.navigate("#"+oe.urls("view","edit",encodeURIComponent(e),t?encodeURIComponent(t):"",encodeURIComponent(n),encodeURIComponent(r)))},updateMapCode:function(e){return function(t){t({type:rl,code:e})}},updateReduceCode:function(e){return function(t){t({type:ol,code:e})}},selectDesignDoc:function(e){return function(t){t({type:$s,options:{value:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:Zs,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:el,options:{value:e}})}}};function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yl="function (doc) {\n  emit(doc._id, 1);\n}",hl="function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",bl=["_sum","_count","_stats","_approx_count_distinct"],gl=bl.concat(["CUSTOM","NONE"]),vl={designDocs:new Backbone.Collection,isLoading:!0,view:{reduce:"",map:yl},database:{id:"0"},designDocId:"",isNewDesignDoc:!1,newDesignDocName:"",newDesignDocPartitioned:!0,isNewView:!1,viewName:"",originalViewName:"",originalDesignDocName:"",reduceOptions:gl};function El(e,t){var n=dl({},e,{isLoading:!1,newDesignDocName:"",isNewView:t.isNewView,viewName:t.viewName||"viewName",isNewDesignDoc:t.isNewDesignDoc||!1,designDocs:t.designDocs,designDocId:t.designDocId,originalDesignDocName:t.designDocId,database:t.database});return n.originalViewName=n.viewName,n.view=function(e){if(e.isNewView||e.isNewDesignDoc)return{reduce:"",map:yl};return e.designDocs.find((function(t){return e.designDocId==t.id})).dDocModel().get("views")[e.viewName]}(n),n}function _l(e){return e.view.reduce?wl(e)?"CUSTOM":e.view.reduce:"NONE"}function wl(e){return!!e.view.reduce&&!(-1!==bl.indexOf(e.view.reduce))}function Ol(e,t){if("new-doc"===e.designDocId){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new ht.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}if(!e.designDocs)return null;var o=e.designDocs.find((function(t){return t.id===e.designDocId}));return o?o.dDocModel():null}function Sl(e){return e.designDocs?e.designDocs.filter((function(e){return!e.isMangoDoc()})).map((function(e){return e.id})):[]}var Dl={IndexEditorContainer:Object(At.b)((function(e,t){var n,r,o,i=e.indexEditor,a=e.databases,c=(n=i,r=a.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.designDocId===e.id})))&&fr.isDDocPartitioned(o.get("doc"),r));return{database:i.database,isNewView:i.isNewView,viewName:i.viewName,designDocs:i.designDocs,designDocList:Sl(i),originalViewName:i.originalViewName,originalDesignDocName:i.originalDesignDocName,isNewDesignDoc:i.isNewDesignDoc,designDocId:i.designDocId,designDocPartitioned:c,newDesignDocName:i.newDesignDocName,newDesignDocPartitioned:i.newDesignDocPartitioned,saveDesignDoc:Ol(i,a.isDbPartitioned),map:i.view.map,isLoading:i.isLoading,reduce:i.view.reduce,reduceOptions:i.reduceOptions,reduceSelectedOption:_l(i),hasCustomReduce:wl(i),hasReduce:!!i.view.reduce,isDbPartitioned:a.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{saveView:function(t,n){e(pl.saveView(t,n))},changeViewName:function(t){e(pl.changeViewName(t))},updateMapCode:function(t){e(pl.updateMapCode(t))},selectDesignDoc:function(t){e(pl.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(pl.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(pl.updateNewDesignDocPartitioned(t))},updateReduceCode:function(t){e(pl.updateReduceCode(t))},selectReduceChanged:function(t){e(pl.selectReduceChanged(t))}}}))(zs),IndexEditor:zs,ReduceEditor:xs,DesignDocSelector:ws,StyledSelect:Ra.StyledSelect};function Nl(e){return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cl(e,t){return!t||"object"!==Nl(t)&&"function"!=typeof t?Tl(e):t}function Tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Il(e){return(Il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xl(e,t){return(xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kl=Dl.DesignDocSelector,jl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Il(t);if(Pl()){var r=Il(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Cl(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Al(Tl(t=i.call(this,e)),"submit",(function(){t.designDocSelector.validate()&&(""!==t.props.newIndexName?t.props.submit():oe.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}))})),Al(Tl(t),"close",(function(e){e&&e.preventDefault(),t.props.close()})),Al(Tl(t),"setNewIndexName",(function(e){t.props.setNewCloneIndexName(e.target.value)})),t.props.setNewCloneIndexName(""),t}return n=a,(r=[{key:"render",value:function(){var e=this;return se.a.createElement(sn.f,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,this.props.title)),se.a.createElement(sn.f.Body,null,se.a.createElement("form",{className:"form",method:"post",onSubmit:this.submit},se.a.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),se.a.createElement("div",{className:"row"},se.a.createElement(kl,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.selectedDesignDoc,selectedDesignDocPartitioned:this.props.selectedDesignDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned})),se.a.createElement("div",{className:"clone-index-name-row"},se.a.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),se.a.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),se.a.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},se.a.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}])&&Rl(n.prototype,r),o&&Rl(n,o),a}(se.a.Component);function Ll(e){return(Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ql(e,t){return!t||"object"!==Ll(t)&&"function"!=typeof t?Vl(e):t}function Vl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Bl(e){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kl(e,t){return(Kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Al(jl,"propTypes",{visible:xt.a.bool.isRequired,title:xt.a.string,close:xt.a.func.isRequired,submit:xt.a.func.isRequired,designDocArray:xt.a.array.isRequired,selectedDesignDoc:xt.a.string.isRequired,newDesignDocName:xt.a.string.isRequired,newIndexName:xt.a.string.isRequired,indexLabel:xt.a.string.isRequired,selectDesignDoc:xt.a.func.isRequired,updateNewDesignDocName:xt.a.func.isRequired,setNewCloneIndexName:xt.a.func.isRequired}),Al(jl,"defaultProps",{title:"Clone Index",visible:!1});var zl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kl(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Bl(t);if(Fl()){var r=Bl(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ql(this,e)});function a(){var e;Ml(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hl(Vl(e=i.call.apply(i,[this].concat(n))),"state",{placement:"bottom"}),Hl(Vl(e),"setPlacement",(function(t){var n=document.getElementById(t).getBoundingClientRect().top+150>window.innerHeight?"top":"bottom";e.setState({placement:n})})),Hl(Vl(e),"createItems",(function(){var t=e.props.items.sort();return _.map(t,(function(t,n){var r=oe.urls(e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.designDocName));e.props.selectedPartitionKey&&(r=oe.urls("partitioned_"+e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.selectedPartitionKey),encodeURIComponent(e.props.designDocName)));var o=e.props.selectedIndex===t?"active":"";return se.a.createElement("li",{className:o,key:n},se.a.createElement("a",{id:e.props.designDocName+"_"+t,href:"#/"+r+encodeURIComponent(t),className:"toggle-view"},t),se.a.createElement(sn.h,{trigger:"click",onEnter:e.setPlacement.bind(Vl(e),e.props.designDocName+"_"+t),placement:e.state.placement,rootClose:!0,ref:function(t){return e.itemOverlay=t},overlay:se.a.createElement(sn.i,{id:"index-menu-component-popover"},se.a.createElement("ul",null,se.a.createElement("li",{onClick:e.indexAction.bind(Vl(e),"edit",{indexName:t,onEdit:e.props.onEdit})},se.a.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),se.a.createElement("li",{onClick:e.indexAction.bind(Vl(e),"clone",{indexName:t,onClone:e.props.onClone})},se.a.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),se.a.createElement("li",{onClick:e.indexAction.bind(Vl(e),"delete",{indexName:t,onDelete:e.props.onDelete})},se.a.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},se.a.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))}))})),Hl(Vl(e),"indexAction",(function(t,n,r){switch(r.preventDefault(),e.itemOverlay.hide(),t){case"delete":e.props.showDeleteIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onDelete);break;case"clone":e.props.showCloneIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onClone);break;case"edit":n.onEdit(e.props.database.id,e.props.selectedPartitionKey,e.props.designDocName,n.indexName)}})),Hl(Vl(e),"toggle",(function(t){t.preventDefault(),e.props.toggle(e.props.designDocName,e.props.title)})),e}return n=a,(r=[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,r="nav-design-function-"+this.props.designDocName+this.props.selector;return se.a.createElement("li",{id:r},se.a.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},se.a.createElement("div",{className:"fonticon-play"}),n),se.a.createElement(sn.c,{in:this.props.isExpanded},se.a.createElement("ul",{className:t},this.createItems())))}}])&&Ul(n.prototype,r),o&&Ul(n,o),a}(se.a.Component);function Gl(e){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xl(e,t){return!t||"object"!==Gl(t)&&"function"!=typeof t?Ql(e):t}function Ql(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $l(e,t){return($l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Hl(zl,"propTypes",{urlNamespace:xt.a.string.isRequired,indexLabel:xt.a.string.isRequired,database:xt.a.object.isRequired,designDocName:xt.a.string.isRequired,items:xt.a.array.isRequired,isExpanded:xt.a.bool.isRequired,selectedIndex:xt.a.string.isRequired,onDelete:xt.a.func.isRequired,onClone:xt.a.func.isRequired,showDeleteIndexModal:xt.a.func.isRequired,showCloneIndexModal:xt.a.func.isRequired,isPartitioned:xt.a.bool.isRequired,selectedPartitionKey:xt.a.string});var eu=Ra.MenuDropDown,tu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$l(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Yl(t);if(Jl()){var r=Yl(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Xl(this,e)});function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Zl(Ql(t=i.call(this,e)),"indexList",(function(){return _.map(t.state.updatedSidebarListTypes,(function(e,n){var r=_.has(t.props.toggledSections,e.name)&&t.props.toggledSections[e.name],o="";return t.props.selectedNavInfo.designDocSection===e.name&&(o=t.props.selectedNavInfo.indexName),se.a.createElement(zl,{icon:e.icon,isExpanded:r,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:o,toggle:t.props.toggle,database:t.props.database,designDocName:t.props.designDocName,key:n,title:e.name,selector:e.selector,items:_.keys(t.props.designDoc[e.selector]),isPartitioned:t.props.isPartitioned,selectedPartitionKey:t.props.selectedPartitionKey,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))})),Zl(Ql(t),"toggle",(function(e){e.preventDefault(),t.props.toggle(t.props.designDocName)})),Zl(Ql(t),"getNewButtonLinks",(function(){var e=t.props.selectedPartitionKey?encodeURIComponent(t.props.selectedPartitionKey):"",n=oe.urls("databaseBaseURL","app",encodeURIComponent(t.props.database.id))+(e?"/_partition/"+e:""),r=t.props.designDocName;return[{title:"Add New",links:oe.getExtensions("sidebar:links").reduce((function(e,o){return t.props.isPartitioned&&!o.showForPartitionedDDocs||e.push({title:o.title,url:"#"+n+"/"+o.url+"/"+encodeURIComponent(r),icon:"fonticon-plus-circled"}),e}),[{title:"New View",url:"#"+oe.urls("new","addView",encodeURIComponent(t.props.database.id),e,encodeURIComponent(r)),icon:"fonticon-plus-circled"}])}]})),t.state={updatedSidebarListTypes:t.props.sidebarListTypes},_.isEmpty(t.state.updatedSidebarListTypes)||_.has(t.state.updatedSidebarListTypes[0],"selector")&&"views"!==t.state.updatedSidebarListTypes[0].selector){var n=t.state.updatedSidebarListTypes;n.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:pl.deleteView,onClone:pl.cloneView,onEdit:pl.gotoEditViewPage}),t.state={updatedSidebarListTypes:n}}return t}return n=a,(r=[{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var r=this.props.designDocName,o=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",i=oe.urls("designDocs","app",encodeURIComponent(this.props.database.id),o,r),a="metadata"===this.props.selectedNavInfo.designDocSection?"active":"",c=this.props.isPartitioned?"Partitioned design document":"Global design document",s=this.props.isPartitioned?"fonticon-documents":"fonticon-document";return se.a.createElement("li",{className:"nav-header"},se.a.createElement("div",{id:"sidebar-tab-"+r,className:t},se.a.createElement("div",{id:"nav-header-"+r,onClick:this.toggle,className:"accordion-list-item"},se.a.createElement("div",{className:"fonticon-play"}),se.a.createElement("p",{className:"design-doc-name"},se.a.createElement("span",{title:"_design/"+r},se.a.createElement("i",{className:s,title:c}),r))),se.a.createElement("div",{className:"new-button add-dropdown"},se.a.createElement(eu,{links:e}))),se.a.createElement(sn.c,{in:this.props.isExpanded},se.a.createElement("ul",{className:n,id:"design-doc-menu-".concat(this.props.designDocName)},se.a.createElement("li",{className:a},se.a.createElement("a",{href:"#/"+i,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}])&&Wl(n.prototype,r),o&&Wl(n,o),a}(se.a.Component);function nu(e){return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ou(e,t){return!t||"object"!==nu(t)&&"function"!=typeof t?iu(e):t}function iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function au(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function cu(e){return(cu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function su(e,t){return(su=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Zl(tu,"propTypes",{database:xt.a.object.isRequired,sidebarListTypes:xt.a.array.isRequired,isExpanded:xt.a.bool.isRequired,isPartitioned:xt.a.bool.isRequired,selectedPartitionKey:xt.a.string,selectedNavInfo:xt.a.object.isRequired,toggledSections:xt.a.object.isRequired,designDocName:xt.a.string.isRequired,showDeleteIndexModal:xt.a.func.isRequired,showCloneIndexModal:xt.a.func.isRequired});var uu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&su(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=cu(t);if(au()){var r=cu(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ou(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),lu(iu(t=i.call(this,e)),"designDocList",(function(){return _.map(t.props.designDocs,(function(e,n){var r=decodeURIComponent(e.safeId),o=fr.isDDocPartitioned(e,t.props.isDbPartitioned),i=!1,a={};_.has(t.props.toggledSections,r)&&(i=t.props.toggledSections[r].visible,a=t.props.toggledSections[r].indexGroups);var c={};return"designDoc"===t.props.selectedNav.navItem&&t.props.selectedNav.designDocName===r&&(c=t.props.selectedNav),se.a.createElement(tu,{toggle:t.props.toggle,sidebarListTypes:t.sidebarListTypes,isExpanded:i,toggledSections:a,selectedNavInfo:c,selectedPartitionKey:t.props.selectedPartitionKey,isPartitioned:o,key:n,designDoc:e,designDocName:r,database:t.props.database,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))}));var n=oe.getExtensions("sidebar:list");return t.sidebarListTypes=_.isUndefined(n)?[]:n,t}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("ul",{className:"nav nav-list"},this.designDocList())}}])&&ru(n.prototype,r),o&&ru(n,o),a}(se.a.Component);function pu(e){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mu(e,t){return!t||"object"!==pu(t)&&"function"!=typeof t?yu(e):t}function yu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function bu(e){return(bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}lu(uu,"propTypes",{database:xt.a.object.isRequired,toggle:xt.a.func.isRequired,designDocs:xt.a.array,toggledSections:xt.a.object,selectedNav:xt.a.shape({designDocName:xt.a.string,designDocSection:xt.a.string,indexName:xt.a.string,navItem:xt.a.string}).isRequired,isDbPartitioned:xt.a.bool.isRequired,selectedPartitionKey:xt.a.string,showDeleteIndexModal:xt.a.func.isRequired,showCloneIndexModal:xt.a.func.isRequired});var Eu=Ra.MenuDropDown,_u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gu(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=bu(t);if(hu()){var r=bu(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return mu(this,e)});function a(){var e;fu(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vu(yu(e=i.call.apply(i,[this].concat(n))),"getNewButtonLinks",(function(){return fr.getNewButtonLinks(e.props.databaseName,e.props.selectedPartitionKey)})),vu(yu(e),"buildDocLinks",(function(){var t=oe.urls("base","app",e.props.databaseName);return oe.getExtensions("docLinks").map((function(n){return se.a.createElement("li",{key:n.url,className:e.getNavItemClass(n.url)},se.a.createElement("a",{id:n.url,href:t+n.url},n.title))}))})),vu(yu(e),"getNavItemClass",(function(t){return t===e.props.selectedNavItem?"active":""})),e}return n=a,(r=[{key:"render",value:function(){var e=this.buildDocLinks(),t=oe.url.encode(this.props.databaseName),n=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",r="#"+oe.urls("changes","app",t,n,""),o="#"+oe.urls("permissions","app",t,n),i=oe.urls("allDocs","app",t,n,""),a=oe.urls("mango","query-app",t,n),c=ae.i18n.en_US["run-query-with-mango"],s=this.getNewButtonLinks();return se.a.createElement("ul",{className:"nav nav-list"},se.a.createElement("li",{className:this.getNavItemClass("all-docs")},se.a.createElement("a",{id:"all-docs",href:"#/"+i,className:"toggle-view"},"All Documents"),se.a.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},se.a.createElement(Eu,{links:s}))),se.a.createElement("li",{className:this.getNavItemClass("mango-query")},se.a.createElement("a",{id:"mango-query",href:"#"+a,className:"toggle-view"},c)),se.a.createElement("li",{className:this.getNavItemClass("permissions")},se.a.createElement("a",{id:"permissions",href:o},"Permissions")),se.a.createElement("li",{className:this.getNavItemClass("changes")},se.a.createElement("a",{id:"changes",href:r},"Changes")),e,se.a.createElement("li",{className:this.getNavItemClass("design-docs")},se.a.createElement("a",{id:"design-docs",href:"#/"+i+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),se.a.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},se.a.createElement(Eu,{links:s}))))}}])&&du(n.prototype,r),o&&du(n,o),a}(se.a.Component);function wu(e){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Su(e,t){return!t||"object"!==wu(t)&&"function"!=typeof t?Du(e):t}function Du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ru(e){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cu(e,t){return(Cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vu(_u,"propTypes",{databaseName:xt.a.string.isRequired,selectedNavItem:xt.a.string.isRequired,selectedPartitionKey:xt.a.string});var Pu=Ra.DeleteDatabaseModal,Iu=Ra.LoadLines,xu=$a.ConfirmationModal,Au=Ta.deleteDbModalStore,ku=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cu(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Ru(t);if(Nu()){var r=Ru(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Su(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Tu(Du(t=i.call(this,e)),"onChange",(function(){var e=t.getDeleteDbStoreState();t.setState(e)})),Tu(Du(t),"showDeleteDatabaseModal",(function(e){sr.showDeleteDatabaseModal(e)})),Tu(Du(t),"deleteIndex",(function(){var e="designDoc"===t.props.selectedNav.navItem&&"_design/"+t.props.selectedNav.designDocName===t.props.deleteIndexModalDesignDoc.id&&t.props.selectedNav.indexName===t.props.deleteIndexModalIndexName;t.props.deleteIndexModalOnSubmit({isOnIndex:e,indexName:t.props.deleteIndexModalIndexName,designDoc:t.props.deleteIndexModalDesignDoc,designDocs:t.props.designDocs,database:t.props.database})})),Tu(Du(t),"cloneIndex",(function(){t.props.cloneIndexModalOnSubmit({sourceIndexName:t.props.cloneIndexSourceIndexName,sourceDesignDocName:t.props.cloneIndexSourceDesignDocName,targetDesignDocName:t.props.cloneIndexModalSelectedDesignDoc,newDesignDocName:t.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:t.props.cloneIndexModalNewDesignDocPartitioned,isDbPartitioned:t.props.isDbPartitioned,newIndexName:t.props.cloneIndexModalNewIndexName,designDocs:t.props.designDocs,database:t.props.database,onComplete:t.props.hideCloneIndexModal})})),t.state=t.getDeleteDbStoreState(),t.deleteIndex=t.deleteIndex.bind(Du(t)),t.cloneIndex=t.cloneIndex.bind(Du(t)),t}return n=a,(r=[{key:"componentDidMount",value:function(){Au.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Au.off("change",this.onChange,this)}},{key:"getDeleteDbStoreState",value:function(){return{deleteDbModalProperties:Au.getShowDeleteDatabaseModal()}}},{key:"render",value:function(){return this.props.isLoading?se.a.createElement(Iu,null):se.a.createElement("nav",{className:"sidenav"},se.a.createElement(_u,{selectedNavItem:this.props.selectedNav.navItem,databaseName:this.props.database.id,selectedPartitionKey:this.props.selectedPartitionKey}),se.a.createElement(uu,{selectedNav:this.props.selectedNav,selectedPartitionKey:this.props.selectedPartitionKey,isDbPartitioned:this.props.isDbPartitioned,toggle:this.props.toggleContent,toggledSections:this.props.toggledSections,designDocs:this.props.designDocList,database:this.props.database,showDeleteIndexModal:this.props.showDeleteIndexModal,showCloneIndexModal:this.props.showCloneIndexModal}),se.a.createElement(Pu,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),se.a.createElement(xu,{title:"Confirm Deletion",visible:this.props.deleteIndexModalVisible,text:this.props.deleteIndexModalText,onClose:this.props.hideDeleteIndexModal,onSubmit:this.deleteIndex}),se.a.createElement(jl,{visible:this.props.cloneIndexModalVisible,title:this.props.cloneIndexModalTitle,close:this.props.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.props.availableDesignDocIds,selectedDesignDoc:this.props.cloneIndexModalSelectedDesignDoc,selectedDesignDocPartitioned:this.props.cloneIndexModalSelectedDesignDocPartitioned,newDesignDocName:this.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:this.props.cloneIndexModalNewDesignDocPartitioned,newIndexName:this.props.cloneIndexModalNewIndexName,indexLabel:this.props.cloneIndexModalIndexLabel,selectDesignDoc:this.props.selectDesignDoc,updateNewDesignDocName:this.props.updateNewDesignDocName,updateNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,setNewCloneIndexName:this.props.setNewCloneIndexName,isDbPartitioned:this.props.isDbPartitioned}))}}])&&Ou(n.prototype,r),o&&Ou(n,o),a}(se.a.Component);Tu(ku,"propTypes",{selectedNav:xt.a.shape({designDocName:xt.a.string,designDocSection:xt.a.string,indexName:xt.a.string,navItem:xt.a.string}).isRequired});var ju={SidebarController:ku,DesignDoc:tu,CloneIndexModal:jl};function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){Uu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qu={designDocs:new Backbone.Collection,designDocList:[],selected:{navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},loading:!0,toggledSections:{},deleteIndexModalVisible:!1,deleteIndexModalDesignDocName:"",deleteIndexModalText:"",deleteIndexModalIndexName:"",deleteIndexModalOnSubmit:function(){},cloneIndexModalVisible:!1,cloneIndexDesignDocProp:"",cloneIndexModalTitle:"",cloneIndexModalSelectedDesignDoc:"",cloneIndexModalNewDesignDocName:"",cloneIndexModalNewDesignDocPartitioned:!0,cloneIndexModalNewIndexName:"",cloneIndexModalSourceIndexName:"",cloneIndexModalSourceDesignDocName:"",cloneIndexModalIndexLabel:"",cloneIndexModalOnSubmit:function(){}};function Vu(e,t){var n=Mu({},e,{database:t.database,designDocs:t.designDocs,designDocList:Ku(t.designDocs),loading:!1});return t.selectedNavItem&&(n.selected={navItem:t.selectedNavItem,designDocName:"",designDocSection:"",indexName:""}),n}function Fu(e,t,n){var r=Mu({},e);if(!e.toggledSections[t])return r.toggledSections[t]={visible:!0,indexGroups:{}},r;if(n){var o=e.toggledSections[t].indexGroups[n];return _.isUndefined(o)?r.toggledSections[t].indexGroups[n]=!0:r.toggledSections[t].indexGroups[n]=!o,r}return r.toggledSections[t].visible=!e.toggledSections[t].visible,r}function Bu(e,t){var n=t.selectedNavItem,r=Mu({},e);return n.designDocName&&(_.has(e.toggledSections,n.designDocName)||(r.toggledSections[n.designDocName]={visible:!0,indexGroups:{}}),r.toggledSections[n.designDocName].visible=!0,n.designDocSection&&(r.toggledSections[n.designDocName].indexGroups[n.designDocSection]=!0)),r}function Ku(e){if(!e)return[];var t=e.toJSON();return(t=_.filter(t,(function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}))).map((function(e){return e.safeId=ae.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)}))}function Hu(e,t){var n=e.designDocs.find((function(t){return e.cloneIndexModalSelectedDesignDoc==t.id}));return!!n&&fr.isDDocPartitioned(n.get("doc"),t)}function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wu=function(e){var t=e.designDocs.filter((function(e){return!e.isMangoDoc()}));return _.map(t,(function(e){return e.id}))},Xu=function(e){var t=e.designDocs.find((function(t){return"_design/"+e.deleteIndexModalDesignDocName===t.id}));return t?t.dDocModel():null},Qu=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){Gu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({designDocName:"",designDocSection:"",indexName:"",navItem:""},e)},Ju=Object(At.b)((function(e,t){var n,r=e.sidebar,o=e.databases;return{database:(n=r,n.loading?{}:n.database),selectedNav:Qu(t.selectedNavItem),designDocs:r.designDocs,designDocList:r.designDocList,availableDesignDocIds:Wu(r),toggledSections:r.toggledSections,isLoading:r.loading||o.isLoadingDbInfo,selectedPartitionKey:t.selectedPartitionKey,isDbPartitioned:o.isDbPartitioned,deleteIndexModalVisible:r.deleteIndexModalVisible,deleteIndexModalText:r.deleteIndexModalText,deleteIndexModalOnSubmit:r.deleteIndexModalOnSubmit,deleteIndexModalIndexName:r.deleteIndexModalIndexName,deleteIndexModalDesignDoc:Xu(r),cloneIndexModalVisible:r.cloneIndexModalVisible,cloneIndexModalTitle:r.cloneIndexModalTitle,cloneIndexModalSelectedDesignDoc:r.cloneIndexModalSelectedDesignDoc,cloneIndexModalSelectedDesignDocPartitioned:Hu(r,o.isDbPartitioned),cloneIndexModalNewDesignDocName:r.cloneIndexModalNewDesignDocName,cloneIndexModalNewDesignDocPartitioned:r.cloneIndexModalNewDesignDocPartitioned,cloneIndexModalOnSubmit:r.cloneIndexModalOnSubmit,cloneIndexDesignDocProp:r.cloneIndexDesignDocProp,cloneIndexModalNewIndexName:r.cloneIndexModalNewIndexName,cloneIndexSourceIndexName:r.cloneIndexModalSourceIndexName,cloneIndexSourceDesignDocName:r.cloneIndexModalSourceDesignDocName,cloneIndexModalIndexLabel:r.cloneIndexModalIndexLabel}}),(function(e){return{toggleContent:function(t,n){e(ts(t,n))},hideCloneIndexModal:function(){e(as())},hideDeleteIndexModal:function(){e(rs())},showDeleteIndexModal:function(t,n,r,o){e(ns(t,n,r,o))},showCloneIndexModal:function(t,n,r,o){e(is(t,n,r,o))},selectDesignDoc:function(t){e(ls(t))},updateNewDesignDocName:function(t){e(cs(t))},updateNewDesignDocPartitioned:function(t){e(ss(t))},setNewCloneIndexName:function(t){e(us(t))}}}))(ju.SidebarController);function Yu(e,t){var n=fr.getNewButtonLinks(e,t);return function(e){return fr.getModifyDatabaseLinks(e)}(e).concat(n)}var $u=function(e){var t=e.url,n=e.icon,r=e.onClick,o=e.children;return se.a.createElement("li",{role:"presentation"},se.a.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:r,href:t},se.a.createElement("i",{className:n})," ",o))},Zu=function(e){var t=e.dbName,n=function(e){return e.map((function(e,t){if(e.title&&e.links){var n=e.links.map((function(e){return se.a.createElement($u,{key:e.title,onClick:e.onClick,icon:e.icon,url:e.url},e.title)}));return[se.a.createElement("li",{key:e.title,className:"header-label"},e.title),n]}return se.a.createElement($u,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)}))}(Yu(t,e.partitionKey));return se.a.createElement("div",{className:"faux-header__doc-header-left"},se.a.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){oe.navigate("#/_all_dbs")}},se.a.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),se.a.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:t},t),se.a.createElement(sn.d,{id:"faux-header__doc-header-left-1"},se.a.createElement(sn.d.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},se.a.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),se.a.createElement(sn.d.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},n)))};Zu.propTypes={dbName:xt.a.string.isRequired,partitionKey:xt.a.string};var ep=Zu,tp=n(56),np=n.n(tp);n(210);function rp(e){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function op(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ap(e,t){return!t||"object"!==rp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t){return(lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var up=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lp(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=sp(t);if(cp()){var r=sp(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ap(this,e)});function a(){return op(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"willEnter",value:function(){return{opacity:Object(pi.spring)(1,pi.presets.gentle),height:Object(pi.spring)(160,pi.presets.gentle)}}},{key:"willLeave",value:function(){return{opacity:Object(pi.spring)(0,pi.presets.gentle),height:Object(pi.spring)(0,pi.presets.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map((function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:se.a.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},se.a.createElement($a.CodeFormat,{code:t.props.code}))}));return se.a.createElement("span",null,n)}},{key:"render",value:function(){return se.a.createElement(pi.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}])&&ip(n.prototype,r),o&&ip(n,o),a}(se.a.Component);function pp(e){return(pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mp(e,t){return!t||"object"!==pp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function hp(e){return(hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bp(e,t){return(bp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}up.propTypes={code:xt.a.object.isRequired,codeVisible:xt.a.bool.isRequired};var gp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bp(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=hp(t);if(yp()){var r=hp(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return mp(this,e)});function a(){return fp(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,r=e.databaseName;if(t)return se.a.createElement("span",{className:"js-doc-id"},n);var o="#"+oe.urls("document","app",r,n);return se.a.createElement("a",{href:o,className:"js-doc-link"},n)}}])&&dp(n.prototype,r),o&&dp(n,o),a}(se.a.Component);function vp(e){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _p(e,t){return!t||"object"!==vp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Op(e){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sp(e,t){return(Sp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dp=Ra.Copy,Np=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sp(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Op(t);if(wp()){var r=Op(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _p(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={codeVisible:!1},t}return n=a,(r=[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?se.a.createElement($a.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),oe.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,r=n.change,o=n.databaseName,i="change-wrapper"+(r.isNew?" new-change-row":"");return se.a.createElement("div",{className:i},se.a.createElement("div",{className:"change-box","data-id":r.id},se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span2"},"seq"),se.a.createElement("div",{className:"span8 change-sequence"},r.seq),se.a.createElement("div",{className:"span2 text-right"},se.a.createElement(Dp,{uniqueKey:np.a.v4(),text:r.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span2"},"id"),se.a.createElement("div",{className:"span8"},se.a.createElement(gp,{id:r.id,deleted:r.deleted,databaseName:o})),se.a.createElement("div",{className:"span2 text-right"},se.a.createElement(Dp,{uniqueKey:np.a.v4(),text:r.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span2"},"deleted"),se.a.createElement("div",{className:"span10"},r.deleted?"True":"False")),se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span2"},"changes"),se.a.createElement("div",{className:"span10"},se.a.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),se.a.createElement(up,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}])&&Ep(n.prototype,r),o&&Ep(n,o),a}(se.a.Component);function Rp(e){return(Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tp(e,t){return!t||"object"!==Rp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ip(e){return(Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xp(e,t){return(xp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Np.propTypes={change:xt.a.object,databaseName:xt.a.string.isRequired};var Ap=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xp(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Ip(t);if(Pp()){var r=Ip(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Tp(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).props.loadChanges(t.props.databaseName),t}return n=a,(r=[{key:"showingSubsetMsg",value:function(){var e=this.props,t=e.isShowingSubset,n=e.changes,r="";if(t){var o=n.length;r=se.a.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",se.a.createElement("b",null,o)," changes.")}return r}},{key:"getRows",value:function(){var e=this.props,t=e.changes,n=e.loaded,r=e.databaseName;return!t.length&&n?se.a.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map((function(e,t){return se.a.createElement(Np,{change:e,key:t,databaseName:r})}))}},{key:"render",value:function(){return se.a.createElement("div",null,se.a.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}])&&Cp(n.prototype,r),o&&Cp(n,o),a}(se.a.Component);Ap.propTypes={changes:xt.a.array.isRequired,loaded:xt.a.bool.isRequired,databaseName:xt.a.string.isRequired,isShowingSubset:xt.a.bool.isRequired,loadChanges:xt.a.func.isRequired};var kp,jp="UPDATE_CHANGES",Lp="ADD_CHANGES_FILTER_ITEM",Mp="REMOVE_CHANGES_FILTER_ITEM",Up=function(e,t,n){var r={limit:100};kp&&(r.since=n,r.timeout=6e4,r.feed="longpoll");var o=ae.utils.queryParams(r),i=ae.utils.safeURLName(t),a=oe.urls("changes","server",i,"?"+o);E(a).then((function(t){if(t.error)throw new Error(t.reason||t.error);qp(t,e)})).catch((function(e){oe.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})}))},qp=function(e,t){var n=fr.getSeqNum(e.last_seq);t({type:jp,changes:e.results,seqNum:n})},Vp=function(e){return function(t){t({type:Lp,filter:e})}},Fp=function(e){return function(t){t({type:Mp,filter:e})}},Bp=function(e){return function(t){kp=null,Up(t,e)}},Kp=Object(At.b)((function(e,t){var n=e.changes;return{changes:n.filteredChanges,loaded:n.isLoaded,databaseName:t.databaseName,isShowingSubset:n.showingSubset}}),(function(e){return{loadChanges:function(t){e(Bp(t))}}}))(Ap);function Hp(e){return(Hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gp(e,t){return!t||"object"!==Hp(t)&&"function"!=typeof t?Wp(e):t}function Wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qp(e){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jp(e,t){return(Jp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jp(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Qp(t);if(Xp()){var r=Qp(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Gp(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={filter:"",error:!1},t.submitForm=t.submitForm.bind(Wp(t)),t}return n=a,(r=[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout((function(){t.setState({error:!1})}),1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return se.a.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},se.a.createElement("fieldset",null,se.a.createElement("i",{className:"fonticon-filter"}),se.a.createElement("input",{type:"text",ref:function(t){return e.addItem=t},className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),se.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),se.a.createElement("div",{className:"help-block"})))}}])&&zp(n.prototype,r),o&&zp(n,o),a}(se.a.Component);function $p(e){return($p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ef(e,t){return!t||"object"!==$p(t)&&"function"!=typeof t?tf(e):t}function tf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function rf(e){return(rf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function of(e,t){return(of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Yp.propTypes={addFilter:xt.a.func.isRequired,hasFilter:xt.a.func.isRequired,tooltips:xt.a.string},Yp.defaultProps={tooltip:""};var af=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&of(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=rf(t);if(nf()){var r=rf(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ef(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).addFilter=t.addFilter.bind(tf(t)),t.hasFilter=t.hasFilter.bind(tf(t)),t}return n=a,(r=[{key:"addFilter",value:function(e){_.isEmpty(e)||this.props.addFilter(e)}},{key:"hasFilter",value:function(e){return-1!==this.props.filters.indexOf(e)}},{key:"render",value:function(){var e=this;return se.a.createElement("div",{className:"changes-header"},se.a.createElement(Yp,{filter:function(t){return e.props.removeFilter(t)},addFilter:this.addFilter,hasFilter:this.hasFilter}),se.a.createElement(Ra.BadgeList,{elements:this.props.filters,removeBadge:function(t){return e.props.removeFilter(t)}}))}}])&&Zp(n.prototype,r),o&&Zp(n,o),a}(se.a.Component);af.propTypes={filters:xt.a.array.isRequired,addFilter:xt.a.func.isRequired,removeFilter:xt.a.func.isRequired};var cf=Object(At.b)((function(e){return{filters:e.changes.filters}}),(function(e){return{addFilter:function(t){e(Vp(t))},removeFilter:function(t){e(Fp(t))}}}))(af);function sf(e){return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uf(e,t){return!t||"object"!==sf(t)&&"function"!=typeof t?pf(e):t}function pf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ff(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function df(e){return(df=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mf(e,t){return(mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yf=Ra.LoadLines,hf=Ra.Copy,bf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mf(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=df(t);if(ff()){var r=df(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return uf(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pf(t=i.call(this,e)),"showCopiedMessage",(function(){oe.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})})),t.fetchDDocInfo(),t}return n=a,(r=[{key:"componentDidUpdate",value:function(e){this.props.designDocInfo!==e.designDocInfo&&this.fetchDDocInfo()}},{key:"componentWillUnmount",value:function(){this.props.stopRefresh()}},{key:"fetchDDocInfo",value:function(){this.props.fetchDesignDocInfo({designDocName:this.props.designDocName,designDocInfo:this.props.designDocInfo})}},{key:"render",value:function(){if(this.props.isLoading)return se.a.createElement(yf,null);var e=this.props.viewIndex,t=e.sizes,n=t.active?t.active.toLocaleString("en"):0,r=t.external?t.external.toLocaleString("en"):0;return se.a.createElement("div",{className:"metadata-page"},se.a.createElement("header",null,se.a.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),se.a.createElement("section",{className:"container"},se.a.createElement("h3",null,"Index Information"),se.a.createElement("ul",null,se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Language:"),se.a.createElement("span",{className:"capitalize"},e.language)),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),se.a.createElement("ul",null,se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Actual data size (bytes):"),n),se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),r)),se.a.createElement("ul",null,se.a.createElement("li",null,se.a.createElement("span",{className:"item-title"},"MD5 Signature:"),se.a.createElement(hf,{uniqueKey:np.a.v4(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}])&&lf(n.prototype,r),o&&lf(n,o),a}(se.a.Component);bf.propTypes={isLoading:xt.a.bool.isRequired,viewIndex:xt.a.object,designDocName:xt.a.string.isRequired,stopRefresh:xt.a.func.isRequired,fetchDesignDocInfo:xt.a.func.isRequired};var gf,vf={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_REFRESH:"DESIGN_REFRESH"},Ef=function(e,t){wf(),gf=window.setInterval((function(){_f(e.designDocInfo,t)}),5e3),t({type:vf.DESIGN_DOC_MONITOR,options:e})},_f=function(e,t){e.fetch().then((function(){t({type:vf.DESIGN_REFRESH,designDocInfo:e})}))},wf=function(){gf&&(window.clearInterval(gf),gf=void 0)},Of={fetchDesignDocInfo:function(e){var t=e.designDocName,n=e.designDocInfo;return function(e){return e({type:vf.DESIGN_FETCHING}),n.fetch().then((function(){Ef({designDocName:t,designDocInfo:n},e)}))}},stopRefresh:wf},Sf=Object(At.b)((function(e,t){var n=e.designDocInfo;return{isLoading:n.isLoading,viewIndex:n.viewIndex,designDocInfo:t.designDocInfo,designDocName:t.designDocName}}),(function(e){return{fetchDesignDocInfo:function(t){e(Of.fetchDesignDocInfo(t))},stopRefresh:function(){Of.stopRefresh()}}}))(bf);function Df(e){return(Df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rf(e,t){return!t||"object"!==Df(t)&&"function"!=typeof t?Cf(e):t}function Cf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Pf(e){return(Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function If(e,t){return(If=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&If(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Pf(t);if(Tf()){var r=Pf(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Rf(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).toggleStable=t.toggleStable.bind(Cf(t)),t.onUpdateChange=t.onUpdateChange.bind(Cf(t)),t.toggleIncludeDocs=t.toggleIncludeDocs.bind(Cf(t)),t.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],t}return n=a,(r=[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?se.a.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",se.a.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},se.a.createElement("option",{value:"0"},"None"),se.a.createElement("option",{value:"1"},"1"),se.a.createElement("option",{value:"2"},"2"),se.a.createElement("option",{value:"3"},"3"),se.a.createElement("option",{value:"4"},"4"),se.a.createElement("option",{value:"5"},"5"),se.a.createElement("option",{value:"6"},"6"),se.a.createElement("option",{value:"7"},"7"),se.a.createElement("option",{value:"8"},"8"),se.a.createElement("option",{value:"9"},"9"),se.a.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"includeDocsOption",value:function(){var e=this.props,t=e.includeDocs,n=e.reduce;return se.a.createElement("div",{className:"checkbox inline"},se.a.createElement("input",{disabled:n,onChange:this.toggleIncludeDocs,id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:t}),se.a.createElement("label",{className:n?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs"))}},{key:"reduceOption",value:function(){var e=this.props,t=e.showReduce,n=e.reduce;return t?se.a.createElement("span",null,se.a.createElement("div",{className:"checkbox inline"},se.a.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:n}),se.a.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"stableOption",value:function(){var e=this.props,t=e.enableStable,n=e.stable;return t||(n=!1),se.a.createElement("div",{className:"checkbox inline"},se.a.createElement("input",{onChange:this.toggleStable,id:"qoStable",name:"stable",type:"checkbox",checked:n,disabled:!t}),se.a.createElement("label",{className:t?"":"disabled",htmlFor:"qoStable",id:"qoStableLabel"},"Stable"))}},{key:"updateOption",value:function(){var e=this.props.update,t=this.updateOptions.map((function(e){return se.a.createElement("option",{key:e.value,value:e.value},e.label)}));return se.a.createElement("div",{className:"dropdown inline"},se.a.createElement("label",{className:"drop-down"},"Update",se.a.createElement("select",{className:"input-small",id:"qoUpdate",value:e,onChange:this.onUpdateChange},t)))}},{key:"render",value:function(){return se.a.createElement("div",{className:"query-group",id:"query-options-main-fields"},se.a.createElement("span",{className:"add-on"},"Query Options",se.a.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},se.a.createElement("i",{className:"icon-question-sign"}))),se.a.createElement("div",{className:"row-fluid fieldsets"},this.includeDocsOption(),this.reduceOption()),se.a.createElement("div",{className:"row-fluid fieldsets"},this.stableOption(),this.updateOption()))}}])&&Nf(n.prototype,r),o&&Nf(n,o),a}(se.a.Component);function Af(e){return(Af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jf(e,t){return!t||"object"!==Af(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Mf(e){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uf(e,t){return(Uf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}xf.propTypes={toggleIncludeDocs:xt.a.func.isRequired,includeDocs:xt.a.bool.isRequired,reduce:xt.a.bool.isRequired,toggleReduce:xt.a.func,updateGroupLevel:xt.a.func,docURL:xt.a.string.isRequired,stable:xt.a.bool.isRequired,toggleStable:xt.a.func.isRequired,update:xt.a.string.isRequired,changeUpdateField:xt.a.func.isRequired,showReduce:xt.a.bool.isRequired,enableStable:xt.a.bool.isRequired};var qf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uf(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Mf(t);if(Lf()){var r=Mf(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return jf(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="controls-group well js-query-keys-wrapper ",n="row-fluid js-keys-section ",r=n,o="drop-down btn ",i=o;return this.props.showByKeys||this.props.showBetweenKeys||(t+="hide"),this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?i+="active":r+="hide",se.a.createElement("div",{className:"query-group",id:"query-options-key-search"},se.a.createElement("div",{className:"add-on"},"Keys"),se.a.createElement("div",{className:"btn-group toggle-btns row-fluid"},se.a.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),se.a.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:i},"Between Keys")),se.a.createElement("div",{className:t},se.a.createElement("div",{className:n,id:"js-showKeys"},se.a.createElement("div",{className:"controls controls-row"},se.a.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),se.a.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),se.a.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),se.a.createElement("div",{className:r,id:"js-showStartEnd"},se.a.createElement("div",{className:"controls controls-row"},se.a.createElement("div",null,se.a.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),se.a.createElement("input",{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),se.a.createElement("div",null,se.a.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),se.a.createElement("input",{id:"endkey",ref:function(t){return e.endkey=t},onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),se.a.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},se.a.createElement("input",{id:"qoIncludeEndKeyInResults",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),se.a.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}])&&kf(n.prototype,r),o&&kf(n,o),a}(se.a.Component);function Vf(e){return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ff(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kf(e,t){return!t||"object"!==Vf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function zf(e){return(zf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gf(e,t){return(Gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gf(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=zf(t);if(Hf()){var r=zf(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Kf(this,e)});function a(){return Ff(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(oe.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return se.a.createElement("div",{className:"query-group",id:"query-options-additional-params"},se.a.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),se.a.createElement("div",{className:"row-fluid fieldsets"},se.a.createElement("div",{className:"dropdown inline"},se.a.createElement("label",{className:"drop-down"},"Limit",se.a.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},se.a.createElement("option",{value:"none"},"None"),se.a.createElement("option",{value:5},"5"),se.a.createElement("option",{value:10},"10"),se.a.createElement("option",{value:20},"20"),se.a.createElement("option",{value:30},"30"),se.a.createElement("option",{value:50},"50"),se.a.createElement("option",{value:100},"100"),se.a.createElement("option",{value:500},"500"))))),se.a.createElement("div",{className:"row-fluid fieldsets"},se.a.createElement("div",{className:"checkbox inline"},se.a.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),se.a.createElement("label",{htmlFor:"qoDescending"},"Descending")),se.a.createElement("div",{className:"dropdown inline"},se.a.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",se.a.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}])&&Bf(n.prototype,r),o&&Bf(n,o),a}(se.a.Component);function Xf(e){return(Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jf(e,t){return!t||"object"!==Xf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $f(e){return($f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zf(e,t){return(Zf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ed=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zf(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=$f(t);if(Yf()){var r=$f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Jf(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return se.a.createElement("div",{className:"controls-group query-group"},se.a.createElement("div",{id:"button-options",className:"controls controls-row"},se.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),se.a.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}])&&Qf(n.prototype,r),o&&Qf(n,o),a}(se.a.Component);function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rd(e,t){return!t||"object"!==td(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function od(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function id(e){return(id=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ad(e,t){return(ad=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ed.propTypes={onCancel:xt.a.func.isRequired};var cd=Ra.ToggleHeaderButton,sd=Ra.TrayContents,ld=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ad(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=id(t);if(od()){var r=id(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return rd(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e);var n=e.ddocsOnly,r=e.queryOptionsApplyFilterOnlyDdocs;return n&&r(),t}return n=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,r=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?r():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,r=t.queryOptionsParams,o=t.perPage,i=t.resetPagination,a=t.selectedLayout,c=t.changeLayout;i(o);var s=a===Oo.METADATA;s&&r.include_docs?c(Oo.TABLE):s||r.include_docs||c(Oo.METADATA),n(r,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return se.a.createElement(sd,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray",container:this},se.a.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},se.a.createElement(xf,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:oe.constants.DOC_URLS.GENERAL,enableStable:this.props.enableStable,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),se.a.createElement(qf,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),se.a.createElement(Wf,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),se.a.createElement(ed,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,r=e.byKeys,o=e.descending,i=e.skip,a=e.limit,c=e.stable,s=e.update;return!!(n&&n.startkey||r||a&&"none"!=a||i||t||o||c||"true"!==s)}},{key:"render",value:function(){return se.a.createElement("div",{id:"header-query-options"},se.a.createElement("div",{id:"query-options"},se.a.createElement("div",null,se.a.createElement(cd,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}])&&nd(n.prototype,r),o&&nd(n,o),a}(se.a.Component);ld.propTypes={contentVisible:xt.a.bool.isRequired,queryOptionsApplyFilterOnlyDdocs:xt.a.func.isRequired,queryOptionsRemoveFilterOnlyDdocs:xt.a.func.isRequired,queryOptionsExecute:xt.a.func.isRequired,queryOptionsParams:xt.a.object.isRequired,perPage:xt.a.number.isRequired,resetPagination:xt.a.func.isRequired,selectedLayout:xt.a.string.isRequired,changeLayout:xt.a.func.isRequired,queryOptionsToggleVisibility:xt.a.func.isRequired,queryOptionsToggleStable:xt.a.func.isRequired,queryOptionsChangeUpdate:xt.a.func.isRequired,stable:xt.a.bool.isRequired,update:xt.a.string.isRequired};var ud="INDEX_RESULTS_REDUX_NEW_RESULTS",pd="INDEX_RESULTS_REDUX_IS_LOADING",fd="INDEX_RESULTS_REDUX_CHANGE_LAYOUT",dd="INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",md="INDEX_RESULTS_REDUX_SET_PER_PAGE",yd="INDEX_RESULTS_REDUX_PAGINATE_NEXT",hd="INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",bd="INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",gd="INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",vd="INDEX_RESULTS_REDUX_RESET_STATE",Ed="INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS",_d="INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED",wd="INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY",Od="INDEX_RESULTS_SET_STYLE",Sd=function(e,t,n){void 0===e&&(e="server");var r=ae.utils.getSafeIdForDoc(t);r||(r="");var o=encodeURIComponent(n);return oe.urls("document",e,o,r,"?conflicts=true")},Dd=function(e,t){if(e)return t!==So.MANGO_INDEX&&(!!Object.keys(e).length&&!!e._id)},Nd=function(e,t){return t===So.MANGO_INDEX?"special"!==e.type:!!((e._id||e.id)&&(e._rev||e.value&&e.value.rev))},Rd=function(e,t){return!!e.find((function(e){return Nd(e,t)}))},Cd=function(){if(window.localStorage){var e=ae.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return oe.constants.MISC.DEFAULT_PAGE_SIZE},Td=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:So.VIEW;return t===So.VIEW?e.id||e._id:t===So.MANGO_INDEX?"special"===e.type?"_all_docs":e.ddoc:t===So.MANGO_QUERY?e._id:e.id||e._id},Pd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:So.VIEW;return t===So.VIEW?e.value?e.value.rev:e._rev:t!==So.MANGO_INDEX&&t===So.MANGO_QUERY?e._rev:void 0},Id=function(e){return"Reason: "+(e&&e.message||"n/a")},xd=function(){return{type:vd}},Ad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:bd,selectedDocs:e}},kd=function(e){return{type:fd,layout:e}};n(310);function jd(){return(jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ld(){return(Ld=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Md=function(e,t,n){var r=function(e,t){var n={},r=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=r-n.skip;return{params:Ld({},t,n),totalDocsRemaining:o}}(t,n),o=r.params,i=r.totalDocsRemaining;return o.limit=Math.min(o.limit,1e4),function(t){return t({type:pd}),e(o).then((function(e){var n=e.docs,r=e.docType,a=e.executionStats,c=e.warning,s=e.layout,l=function(e,t,n){var r=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),r=!0),{finalDocList:e,canShowNext:r}}(n,i,o.limit),u=l.finalDocList,p=l.canShowNext;s&&t(kd(s)),t(function(e,t,n,r,o,i){return{type:ud,docs:e,params:t,canShowNext:n,docType:r,executionStats:o,warning:i}}(u,o,p,r,a,c))})).catch((function(e){e&&-1!==e.message.indexOf("`partition` parameter is not supported")?t({type:_d}):e&&-1!==e.message.indexOf("`partition` parameter is mandatory")?t({type:wd}):oe.addNotification({msg:"Error running query. "+Id(e),type:"error",clear:!0}),t(xd())}))}},Ud=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),oe.addNotification({msg:t,type:"error",clear:!0})},qd=function(e,t,n,r,o,i,a){return!!function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)}(n)&&function(c){var s,l;if(a===So.MANGO_INDEX)l={docids:n.map((function(e){return e._id}))},s=function(e,t){var n=oe.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return O(n,t)}(e,l);else{if(a!==So.VIEW&&a!==So.MANGO_QUERY)throw new Error("Invalid document type: "+a);s=function(e,t){var n=oe.urls("bulk_docs","server",e);return O(n,t)}(e,l={docs:n})}return s.then((function(e){e.error?Ud():(Vd(e,n,r,a),c(Ad()),c(Md(t,o,i)))}))}},Vd=function(e,t,n,r){oe.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];r===So.MANGO_INDEX?e.fail&&(o=e.fail.map((function(e){return e.id}))):o=e.filter((function(e){return!!e.error})).map((function(e){return e.id}));var i=!!t.map((function(e){return e._id})).find((function(e){return/_design/.test(e)}));o.length>0&&Ud(o),n&&i&&es(n)};function Fd(){return(Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Bd=function(e){return{type:md,perPage:e}},Kd=function(e,t,n,r){return t=function(e,t,n){return Fd({},e,{limit:n+1,skip:t.skip||0})}(t,n,r),function(o){o(Bd(r)),o(Md(e,t,n))}},Hd=function(e,t,n,r){return t=function(e,t){return Fd({},e,{skip:e.skip+t})}(t,r),function(r){r({type:yd}),r(Md(e,t,n))}},zd=function(e,t,n,r){return t=function(e,t){return Fd({},e,{skip:Math.max(e.skip-t,0)})}(t,r),function(r){r({type:hd}),r(Md(e,t,n))}},Gd=function(e){return{type:Ed,options:e}},Wd=function(e){return Gd({includeDocs:!e})};function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jd=function(e){var t,n=e.def,r=e.type,o=[];return(o=n.fields.reduce((function(e,t,n){return 0===n?e.push(r+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e}),[])).length||(o=(t=oe.getExtensions("mango:additionalIndexes")[0])?t.createHeader({def:n,type:r}):[r+": "+(n.selector?JSON.stringify(n.selector):"{}")]),o.join(", ")},Yd=function(e){return JSON.stringify(e,null,3)},$d=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){Qd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")},Zd=function(e,t){var n=t.databaseName,r=t.docType,o=t.deleteEnabled,i=void 0===o||o,a=e.map((function(e){if("MangoIndex"===r)return{header:Jd(e),content:$d(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?Sd("app",e.id,n):null,isDeletable:!!i&&"special"!==e.type,isEditable:!1};var t=Td(e,r);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:Pd(e,r),keylabel:"id",url:t?Sd("app",t,n):null,isDeletable:i,isEditable:!0}}));return{displayedFields:null,hasBulkDeletableDoc:Rd(e,r),results:a}},em=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.push(e)}))}));var n=(t=_.uniq(t)).indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},tm=function(e){return e.sort((function(e,t){return function e(t,n,r){return t[r]===n[r]?r<2?e(t,n,r+1):0:1===r?t[r]<n[r]?-1:1:t[r]<n[r]?1:-1}(e,t,0)}))},nm=function(e,t){var n,r=null,o=t.selectedFieldsTableView,i=t.showAllFieldsTableView,a=e.map((function(e){return e.doc||e}));n=em(a),o&&0===o.length&&(o=function(e,t){var n=e.reduce((function(e,t){return e=e.concat(Object.keys(t))}),[]);return delete(n=_.countBy(n,(function(e){return e}))).id,delete n._rev,n=Object.keys(n).reduce((function(e,t){return e.push([n[t],t]),e}),[]),(n=(n=tm(n)).slice(0,t)).reduce((function(e,t){return e.push(t[1]),e}),[])}(a,5));var c,s,l=_.without(n,"_attachments");return c=o,s=l,r=_.without.bind(void 0,s).apply(void 0,c),i&&(r=null,o=l),{schema:n,normalizedDocs:a,selectedFieldsTableView:o,notSelectedFieldsTableView:r}},rm=function(e,t){var n=Oo.METADATA===t.selectedLayout,r=n?function(e){var t=em(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}}(e):nm(e,t),o=r.schema,i=r.normalizedDocs,a=r.selectedFieldsTableView,c=r.notSelectedFieldsTableView,s=i.map((function(e){return{content:e,id:Td(e,t.docType),_rev:Pd(e,t.docType),header:"",keylabel:"",url:e._id||e.id?Sd("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&Nd(e,t.docType),isEditable:Dd(e,t.docType)}}));return{notSelectedFields:c,selectedFields:a,hasBulkDeletableDoc:!!t.deleteEnabled&&Rd(i,t.docType),schema:o,results:s,displayedFields:n?null:{shown:_.uniq(a).length,allFieldCount:_.without(o,"_attachments").length}}};function om(e){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function im(){return(im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?am(Object(n),!0).forEach((function(t){sm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):am(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lm={noResultsWarning:"",docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:Oo.METADATA,textEmptyIndex:"No Documents Found",docType:So.VIEW,resultsStyle:function(){var e=ae.utils.localStorageGet("fauxton:results_style");e||(e={textOverflow:Do.TEXT_OVERFLOW_TRUNCATED,fontSize:Do.FONT_SIZE_MEDIUM});return e}(),fetchParams:{limit:Cd()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:Cd(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"}};function um(e){ae.utils.localStorageSet("fauxton:results_style",e)}var pm=function(e){return"query"!==e.language},fm=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},i=r.filter(pm);return Oo.JSON===o.selectedLayout?Zd(i,o):rm(i,o)},dm=function(e){return e.selectedLayout===Oo.TABLE},mm=function(e){return!!ym(e)&&e.pagination.pageStart+e.docs.length-1},ym=function(e){return!e.isLoading&&e.docs.length>0},hm=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];if(!Nd(n,e.docType))return"continue";return e.selectedDocs.some((function(t){return Td(n,e.docType)===t._id}))?void 0:{v:!1}},n=0;n<e.docs.length;n++){var r=t(n);switch(r){case"continue":continue;default:if("object"===om(r))return r.v}}return!0},bm=function(e){return e.selectedDocs.length>0},gm=function(e){return e.selectedDocs.length},vm=function(e){return e.pagination.currentPage>1},Em=function(e,t){return fm(e,t).displayedFields||{}},_m=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var r=t.betweenKeys;n.inclusive_end=r.include,r.startkey&&""!=r.startkey&&(n.start_key=r.startkey),r.endkey&&""!=r.endkey&&(n.end_key=r.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},wm=function(e){return e.docs},Om=function(e){return e.selectedDocs},Sm=function(e){return e.isEditable},Dm=function(e){return e.selectedLayout},Nm=function(e){return e.textEmptyIndex},Rm=function(e){return e.docType},Cm=function(e){return e.tableView.showAllFieldsTableView},Tm=function(e){return e.pagination.canShowNext},Pm=function(e){return e.pagination.perPage},Im=function(e){return e.fetchParams},xm=function(e){return e.resultsStyle},Am=function(e,t,n){return!fr.isViewSelected(t)||!fr.selectedItemIsPartitionedView(e,t,n)},km=Object(At.b)((function(e,t){var n,r,o=e.indexResults,i=e.sidebar,a=e.databases,c=o.queryOptionsPanel;return{contentVisible:c.isVisible,includeDocs:c.includeDocs,showReduce:(n=i.designDocList,r=t.selectedNavItem,fr.selectedViewContainsReduceFunction(n,r)),reduce:c.reduce,groupLevel:c.groupLevel,showByKeys:c.showByKeys,showBetweenKeys:c.showBetweenKeys,betweenKeys:c.betweenKeys,byKeys:c.byKeys,descending:c.descending,skip:c.skip,limit:c.limit,enableStable:Am(i.designDocList,t.selectedNavItem,a.isDbPartitioned),stable:c.stable,update:c.update,fetchParams:Im(o),queryOptionsParams:_m(o),perPage:Pm(o),selectedLayout:Dm(o),ddocsOnly:t.ddocsOnly}}),(function(e,t){return{resetPagination:function(t){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe.constants.MISC.DEFAULT_PAGE_SIZE;return Bd(e)}(t))},queryOptionsToggleReduce:function(t){e(function(e){return Gd(e?{reduce:!e}:{reduce:!e,includeDocs:!1})}(t))},queryOptionsUpdateGroupLevel:function(t){e(function(e){return Gd({groupLevel:e})}(t))},queryOptionsToggleByKeys:function(t){e(function(e){return Gd({showByKeys:!e,showBetweenKeys:!!e})}(t))},queryOptionsToggleBetweenKeys:function(t){e(function(e){return Gd({showBetweenKeys:!e,showByKeys:!!e})}(t))},queryOptionsUpdateBetweenKeys:function(t){e(function(e){return Gd({betweenKeys:e})}(t))},queryOptionsUpdateByKeys:function(t){e(function(e){return Gd({byKeys:e})}(t))},queryOptionsToggleDescending:function(t){e(function(e){return Gd({descending:!e})}(t))},queryOptionsUpdateSkip:function(t){e(function(e){return Gd({skip:e})}(t))},queryOptionsUpdateLimit:function(t){e(function(e){return Gd({limit:e})}(t))},queryOptionsToggleIncludeDocs:function(t){e(Wd(t))},queryOptionsToggleVisibility:function(t){e(function(e){return Gd({isVisible:e})}(t))},queryOptionsExecute:function(n,r){e(function(e,t,n){var r=function(e){return{limit:e+1,skip:0}}(n);return Md(e,r,t)}(t.queryDocs,n,r))},queryOptionsApplyFilterOnlyDdocs:function(){e(Gd({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1}))},queryOptionsRemoveFilterOnlyDdocs:function(){e(Gd({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1}))},queryOptionsToggleStable:function(t){e(function(e){return Gd({stable:!e})}(t))},queryOptionsChangeUpdate:function(t){e(function(e){return Gd({update:e.toString()})}(t))},changeLayout:function(t){e(kd(t))},resetState:function(){e(xd())}}}))(ld),jm=km;km.propTypes={queryDocs:xt.a.func.isRequired};var Lm=function(e){var t=e.database,n=e.loadOptions;return se.a.createElement("div",null,se.a.createElement(Ra.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,ignoreAccents:!1,cache:!1,onChange:function(e){var n=e.value,r=oe.urls("document","app",ae.utils.safeURLName(t.id),ae.utils.safeURLName(n));setTimeout((function(){return oe.navigate(r,{trigger:!0})}))}}))};Lm.propTypes={database:xt.a.object.isRequired,loadOptions:xt.a.func.isRequired};var Mm=Lm,Um=function(e,t){return function(n,r){var o="?"+ae.utils.queryParams({startkey:JSON.stringify(n),endkey:JSON.stringify(n+"香"),limit:30}),i=t?oe.urls("partitioned_allDocs","server",e.safeID(),encodeURIComponent(t),o):oe.urls("allDocs","server",e.safeID(),o);E(i).then((function(e){var t=[];e.error||(t=e.rows.map((function(e){return{value:e.id,label:e.id}})));r(null,{options:t})}))}},qm=function(e){var t=e.database,n=e.hideQueryOptions,r=e.hideJumpToDoc,o=e.queryDocs,i=e.ddocsOnly,a=e.selectedNavItem,c=e.partitionKey;return se.a.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},se.a.createElement("div",{className:"faux-header__searchboxwrapper"},se.a.createElement("div",{className:"faux-header__searchboxcontainer"},r?null:se.a.createElement(Mm,{key:JSON.stringify(t+c),cache:!1,loadOptions:Um(t,c),database:t}))),n?null:se.a.createElement(jm,{ddocsOnly:i,queryDocs:o,selectedNavItem:a}))};qm.propTypes={database:xt.a.object.isRequired,hideQueryOptions:xt.a.bool,isRedux:xt.a.bool,queryDocs:xt.a.func,selectedNavItem:xt.a.object,partitionKey:xt.a.string},qm.defaultProps={hideQueryOptions:!1};var Vm=qm;function Fm(e){return(Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Km(e,t){return!t||"object"!==Fm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hm(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function zm(e){return(zm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gm(e,t){return(Gm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gm(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=zm(t);if(Hm()){var r=zm(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Km(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.selectedLayout,i=r.docType,a=r.queryOptionsParams,c=r.fetchUrl;if(i===So.VIEW)e=se.a.createElement(sn.a,{className:o===Oo.METADATA?"active":"",onClick:this.toggleLayout.bind(this,Oo.METADATA)},"Metadata");else if(i===So.MANGO_INDEX)return null;var s=c&&-1!==c.indexOf("/_all_docs"),l=i===So.MANGO_QUERY;return(s||l||!a.reduce)&&(n=se.a.createElement(sn.a,{className:o===Oo.TABLE?"active":"",onClick:this.toggleLayout.bind(this,Oo.TABLE)},se.a.createElement("i",{className:"fonticon-table"})," Table"),t=se.a.createElement(sn.a,{className:o===Oo.JSON?"active":"",onClick:this.toggleLayout.bind(this,Oo.JSON)},se.a.createElement("i",{className:"fonticon-json"})," JSON")),se.a.createElement("div",{className:"alternative-header"},se.a.createElement(sn.b,{className:"two-sides-toggle-button"},n,e,t))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,r=t.selectedLayout,o=t.fetchDocs,i=t.fetchParams,a=t.queryOptionsParams,c=t.queryOptionsToggleIncludeDocs;if(e!==r)return n(e),a.include_docs=e!==Oo.METADATA,e===Oo.TABLE?i.conflicts=!0:delete i.conflicts,c(!a.include_docs),void o(i,a)}}])&&Bm(n.prototype,r),o&&Bm(n,o),a}(se.a.Component);function Xm(e){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jm(e,t){return!t||"object"!==Xm(t)&&"function"!=typeof t?Ym(e):t}function Ym(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Zm(e){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ey(e,t){return(ey=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ny=Ra.MenuDropDown,ry=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ey(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Zm(t);if($m()){var r=Zm(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Jm(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).toggleTextOverflow=t.toggleTextOverflow.bind(Ym(t)),t.setFontSize=t.setFontSize.bind(Ym(t)),t}return n=a,(r=[{key:"toggleTextOverflow",value:function(){this.props.resultsStyle.textOverflow===Do.TEXT_OVERFLOW_FULL?this.props.updateStyle({textOverflow:Do.TEXT_OVERFLOW_TRUNCATED}):this.props.updateStyle({textOverflow:Do.TEXT_OVERFLOW_FULL})}},{key:"setFontSize",value:function(e){this.props.updateStyle({fontSize:e})}},{key:"getDensitySection",value:function(){var e="Show full values";return this.props.resultsStyle.textOverflow===Do.TEXT_OVERFLOW_FULL&&(e="Truncate values"),{title:"Display density",links:[{title:e,onClick:this.toggleTextOverflow}]}}},{key:"getFontSizeSection",value:function(){var e=this;return{title:"Font size",links:[{title:"Small",onClick:function(){e.setFontSize(Do.FONT_SIZE_SMALL)},icon:this.props.resultsStyle.fontSize===Do.FONT_SIZE_SMALL?"fonticon-ok":""},{title:"Medium",onClick:function(){e.setFontSize(Do.FONT_SIZE_MEDIUM)},icon:this.props.resultsStyle.fontSize===Do.FONT_SIZE_MEDIUM?"fonticon-ok":""},{title:"Large",onClick:function(){e.setFontSize(Do.FONT_SIZE_LARGE)},icon:this.props.resultsStyle.fontSize===Do.FONT_SIZE_LARGE?"fonticon-ok":""}]}}},{key:"render",value:function(){var e=[];return this.props.showDensity&&e.push(this.getDensitySection()),this.props.showFontSize&&e.push(this.getFontSizeSection()),se.a.createElement("div",{className:"toolbar-dropdown"},se.a.createElement(ny,{id:"result-style-menu",links:e,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}])&&Qm(n.prototype,r),o&&Qm(n,o),a}(se.a.Component);function oy(e){return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cy(e,t){return!t||"object"!==oy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ly(e){return(ly=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uy(e,t){return(uy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ty(ry,"defaultProps",{showDensity:!0,showFontSize:!0}),ty(ry,"propTypes",{resultsStyle:xt.a.object.isRequired,updateStyle:xt.a.func.isRequired,showDensity:xt.a.bool,showFontSize:xt.a.bool});var py=Ra.BulkActionComponent,fy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uy(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ly(t);if(sy()){var r=ly(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return cy(this,e)});function a(){return iy(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"shouldComponentUpdate",value:function(e){return null!=e.isListDeletable}},{key:"render",value:function(){var e=this.props,t=e.hasResults,n=e.isListDeletable,r=e.removeItem,o=e.allDocumentsSelected,i=e.hasSelectedItem,a=e.toggleSelectAll,c=e.isLoading,s=e.databaseName,l=e.partitionKey,u=null;(n&&t||c)&&(u=se.a.createElement(py,{removeItem:r,isChecked:o,hasSelectedItem:i,toggleSelect:a,disabled:c,title:"Select all docs that can be..."}));var p=null,f=this.props.selectedLayout!==Oo.JSON,d=null;(t||c)&&(p=se.a.createElement(Wm,this.props),d=se.a.createElement(ry,{updateStyle:this.props.updateResultsStyle,resultsStyle:this.props.resultsStyle,showDensity:f}));var m=null;return s&&(m=se.a.createElement("div",{className:"document-result-screen__toolbar-flex-container"},se.a.createElement("a",{href:fr.getNewDocUrl(s,l),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),se.a.createElement("div",{className:"document-result-screen__toolbar"},u,p,d,m)}}])&&ay(n.prototype,r),o&&ay(n,o),a}(se.a.Component);function dy(e){var t=e.text,n=e.isWarning,r=se.a.createElement("div",{className:"no-results-screen-warning"},se.a.createElement("i",{className:"fonticon-attention-circled"}),t);return se.a.createElement("div",{className:"no-results-screen"},n?r:null,se.a.createElement("div",{className:"watermark-logo"}),n?null:se.a.createElement("h3",null,t))}function my(e){return(my="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hy(e,t){return!t||"object"!==my(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function by(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function gy(e){return(gy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vy(e,t){return(vy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fy.propTypes={removeItem:xt.a.func.isRequired,allDocumentsSelected:xt.a.bool.isRequired,hasSelectedItem:xt.a.bool.isRequired,toggleSelectAll:xt.a.func.isRequired,isLoading:xt.a.bool.isRequired,hasResults:xt.a.bool.isRequired,isListDeletable:xt.a.bool,partitionKey:xt.a.string,docType:xt.a.string,resultsStyle:xt.a.object.isRequired,updateResultsStyle:xt.a.func.isRequired},dy.propTypes={text:xt.a.string.isRequired};var Ey=Ra.Copy,_y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vy(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=gy(t);if(by()){var r=gy(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return hy(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={checked:t.props.isSelected},t}return n=a,(r=[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content;return this.props.data.selectedFields.map(function(e,r){var o="tableview-data-cell-"+t+e+r+n[e],i=-1!==["object","boolean"].indexOf(my(n[e]))?JSON.stringify(n[e],null,"  "):n[e],a=cn()({showall:this.props.textOverflow===Do.TEXT_OVERFLOW_FULL,"small-font":this.props.fontSize===Do.FONT_SIZE_SMALL,"large-font":this.props.fontSize===Do.FONT_SIZE_LARGE});return se.a.createElement("td",{key:o,title:i,className:a,onClick:this.onClick.bind(this)},i)}.bind(this))}},{key:"maybeGetCheckboxCell",value:function(e,t){return se.a.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?se.a.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,r=null,o=Object.keys(e._conflicts||{}).length,i=null,a=null;return t&&(r=1===t?t+" Attachment":t+" Attachments",n=se.a.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:r},se.a.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(a=1===o?o+" Conflict":o+" Conflicts",i=se.a.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:a},se.a.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),se.a.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},i,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return se.a.createElement("td",{title:t,className:"tableview-el-copy"},se.a.createElement(Ey,{title:t,text:t,uniqueKey:np.a.v4(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){oe.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return se.a.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}])&&yy(n.prototype,r),o&&yy(n,o),a}(se.a.Component);function wy(e){var t=e.selectedField,n=e.notSelectedFields,r=e.index,o=e.changeField,i=e.selectedFields,a=n.map((function(e){return{value:e,label:e}}));return se.a.createElement("div",{className:"table-container-autocomplete"},se.a.createElement("div",{className:"table-select-wrapper"},se.a.createElement(ba.a,{value:t,options:a,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:r},i)}})))}function Oy(e){return(Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dy(e,t){return!t||"object"!==Oy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ny(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ry(e){return(Ry=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cy(e,t){return(Cy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_y,"defaultProps",{textOverflow:Do.TEXT_OVERFLOW_TRUNCATED}),_y.propTypes={docIdentifier:xt.a.string.isRequired,docChecked:xt.a.func.isRequired,isSelected:xt.a.bool.isRequired,index:xt.a.number.isRequired,data:xt.a.object.isRequired,onClick:xt.a.func.isRequired,textOverflow:xt.a.string};var Ty=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cy(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Ry(t);if(Ny()){var r=Ry(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Dy(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"getContentRows",value:function(){var e=this.props.data.results,t=this.props.resultsStyle,n=t.textOverflow,r=t.fontSize;return e.map(function(e,t){return se.a.createElement(_y,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data,textOverflow:n,fontSize:r})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return se.a.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map((function(e,t){return se.a.createElement("th",{key:"header-el-"+t},e)}))}},{key:"getDropdown",value:function(e,t,n,r,o){return se.a.createElement(wy,{selectedField:e,notSelectedFields:t,index:n,changeField:r,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return se.a.createElement("tr",{key:"tableview-content-row-header"},se.a.createElement("th",{className:"tableview-header-el-checkbox"}),se.a.createElement("th",{className:"tableview-el-copy"}),t,se.a.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return se.a.createElement("div",{className:"table-view-docs"},se.a.createElement("table",{className:"table table-striped"},se.a.createElement("thead",null,this.getHeader()),se.a.createElement("tbody",null,this.getContentRows())))}}])&&Sy(n.prototype,r),o&&Sy(n,o),a}(se.a.Component);function Py(e){return(Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xy(e,t){return!t||"object"!==Py(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ay(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ky(e){return(ky=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jy(e,t){return(jy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ly=Ra.LoadLines,My=Ra.Document,Uy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jy(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ky(t);if(Ay()){var r=ky(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return xy(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&oe.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?se.a.createElement("a",{href:e},se.a.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=this,t=function(){},n=this.props.results.results;return _.map(n,(function(n,r){return se.a.createElement(My,{key:n.id+r,doc:n,onClick:e.props.isEditable?e.onClick:t,keylabel:n.keylabel,docContent:n.content,docType:e.props.docType,checked:e.props.isSelected(n.id),header:n.header,docChecked:e.props.docChecked,isDeletable:n.isDeletable,docIdentifier:n.id,resultsStyle:e.props.resultsStyle},n.url?e.getUrlFragment("#".concat(n.url)):n.url)}))}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e="".concat(e," show-select")),se.a.createElement("div",{className:e},se.a.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return se.a.createElement("div",null,se.a.createElement(Ty,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,resultsStyle:this.props.resultsStyle,title:"Select all docs that can be..."}))}},{key:"getMainView",value:function(){return this.props.isLoading?se.a.createElement("div",{className:"loading-lines-wrapper"},se.a.createElement(Ly,null)):!this.props.noResultsWarning&&this.props.hasResults?this.props.selectedLayout===Oo.JSON?this.getDocumentStyleView():this.getTableStyleView():void 0}},{key:"getNoResultScreen",value:function(){if(!this.props.isLoading){if(this.props.noResultsWarning)return se.a.createElement(dy,{text:this.props.noResultsWarning,isWarning:!0});if(!this.props.hasResults)return se.a.createElement(dy,{text:this.props.textEmptyIndex})}}},{key:"render",value:function(){return se.a.createElement("div",{className:"document-result-screen"},this.getNoResultScreen(),se.a.createElement(fy,this.props),this.getMainView())}}])&&Iy(n.prototype,r),o&&Iy(n,o),a}(se.a.Component);function qy(e){return(qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vy(){return(Vy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fy(Object(n),!0).forEach((function(t){Ky(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ky(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zy(e,t){return!t||"object"!==qy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wy(e){return(Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xy(e,t){return(Xy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xy(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Wy(t);if(Gy()){var r=Wy(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return zy(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams;e.fetchAtStartup&&t(n,r)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams,o=e.ddocsOnly,i=e.fetchUrl,a=e.resetState,c=e.partitionKey;this.props.ddocsOnly===o&&this.props.fetchUrl===i&&this.props.partitionKey===c||(a(),t(By({},n,{skip:0}),By({},r,{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex((function(t){return e===t._id}))>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,r=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,r)}},{key:"render",value:function(){var e=this.props.results;return se.a.createElement(Uy,Vy({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}])&&Hy(n.prototype,r),o&&Hy(n,o),a}(se.a.Component);Qy.propTypes={fetchAtStartup:xt.a.bool.isRequired,fetchDocs:xt.a.func.isRequired};var Jy=Object(At.b)((function(e,t){var n,r=e.indexResults;return{noResultsWarning:r.noResultsWarning,docs:wm(r),selectedDocs:Om(r),isLoading:(n=r,n.isLoading),hasResults:ym(r),results:fm(r,t.databaseName,t.deleteEnabled),isEditable:Sm(r),selectedLayout:Dm(r),allDocumentsSelected:hm(r),hasSelectedItem:bm(r),numDocsSelected:gm(r),textEmptyIndex:Nm(r),docType:Rm(r),fetchParams:Im(r),queryOptionsParams:_m(r),partitionKey:t.partitionKey,resultsStyle:xm(r)}}),(function(e,t){return{fetchDocs:function(n,r){e(Md(t.queryDocs,n,r))},selectDoc:function(t,n){e(function(e,t){var n=t.findIndex((function(t){return t._id===e._id}));return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),Ad(t)}(t,n))},bulkDeleteDocs:function(n,r,o){e(qd(t.databaseName,t.queryDocs,n,t.designDocs,r,o,t.docType))},changeLayout:function(t){e(kd(t))},bulkCheckOrUncheck:function(n,r,o){e(function(e,t,n,r){return e.forEach((function(e){if(Nd(e,r)){var o=t.findIndex((function(t){return Td(e,r)===t._id}));n?t.splice(o,1):-1===o&&t.push({_id:Td(e,r),_rev:Pd(e,r),_deleted:!0})}})),Ad(t)}(n,r,o,t.docType))},changeTableHeaderAttribute:function(t,n){e(function(e,t){return t[e.index]=e.newSelectedRow,{type:gd,selectedFieldsTableView:t}}(t,n))},resetState:function(){e(xd())},queryOptionsToggleIncludeDocs:function(t){e(Wd(t))},updateResultsStyle:function(t){e(function(e){return{type:Od,resultsStyle:e}}(t))}}}))(Qy),Yy=Jy;function $y(e){var t=e.nextClicked,n=e.previousClicked,r="",o="";return e.canShowPrevious||(r="disabled"),e.canShowNext||(o="disabled"),se.a.createElement("div",{className:"documents-pagination"},se.a.createElement("ul",{className:"pagination"},se.a.createElement("li",{className:r},se.a.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),se.a.createElement("li",{className:o},se.a.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}function Zy(e){return(Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function th(e,t){return!t||"object"!==Zy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nh(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function rh(e){return(rh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oh(e,t){return(oh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jy.propTypes={queryDocs:xt.a.func.isRequired,docType:xt.a.string.isRequired},$y.propTypes={nextClicked:xt.a.func.isRequired,previousClicked:xt.a.func.isRequired,canShowPrevious:xt.a.bool.isRequired,canShowNext:xt.a.bool.isRequired};var ih=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oh(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=rh(t);if(nh()){var r=rh(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return th(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?se.a.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):se.a.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return se.a.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),se.a.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},se.a.createElement("label",{htmlFor:"footer-doc-control-prioritized"},se.a.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}])&&eh(n.prototype,r),o&&eh(n,o),a}(se.a.Component);function ah(e){return(ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ch(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sh(e,t){return!t||"object"!==ah(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lh(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function uh(e){return(uh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ph(e,t){return(ph=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ih.propTypes={prioritizedEnabled:xt.a.bool.isRequired,displayedFields:xt.a.object.isRequired,toggleShowAllColumns:xt.a.func.isRequired};var fh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ph(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=uh(t);if(lh()){var r=uh(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return sh(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,r=e.pageEnd;return 0===t.length?se.a.createElement("span",null,"Showing 0 documents."):se.a.createElement("span",null,"Showing document ",n," - ",r,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,r=t.fetchParams,o=t.queryOptionsParams,i=t.paginateNext,a=t.perPage;n&&i(r,o,a)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,r=t.fetchParams,o=t.queryOptionsParams,i=t.paginatePrevious,a=t.perPage;n&&i(r,o,a)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,r=e.prioritizedEnabled,o=e.displayedFields,i=e.perPage,a=e.canShowNext,c=e.canShowPrevious,s=e.toggleShowAllColumns;return se.a.createElement("footer",{className:"index-pagination pagination-footer"},se.a.createElement($y,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:a,canShowPrevious:c}),se.a.createElement("div",{className:"footer-controls"},se.a.createElement("div",{className:"page-controls"},t&&n?se.a.createElement(ih,{prioritizedEnabled:r,displayedFields:o,toggleShowAllColumns:s}):null),se.a.createElement(La,{perPageChange:this.perPageChange.bind(this),perPage:i}),se.a.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}])&&ch(n.prototype,r),o&&ch(n,o),a}(se.a.Component),dh=Object(At.b)((function(e,t){var n,r=e.indexResults;return{docs:wm(r),selectedDocs:Om(r),hasResults:ym(r),pageStart:(n=r,n.pagination.pageStart),pageEnd:mm(r),perPage:Pm(r),prioritizedEnabled:Cm(r),showPrioritizedEnabled:dm(r),displayedFields:Em(r,t.databaseName),canShowNext:Tm(r),canShowPrevious:vm(r),fetchParams:Im(r),queryOptionsParams:_m(r)}}),(function(e,t){return{toggleShowAllColumns:function(){e({type:dd})},updatePerPageResults:function(n,r,o){e(Kd(t.queryDocs,r,o,n))},paginateNext:function(n,r,o){e(Hd(t.queryDocs,n,r,o))},paginatePrevious:function(n,r,o){e(zd(t.queryDocs,n,r,o))}}}))(fh),mh=dh;dh.propTypes={queryDocs:xt.a.func.isRequired};var yh=Object(At.b)((function(e,t){var n=e.indexResults,r=t.docUrl,o=t.endpoint,i=t.endpointAddQueryOptions;if(r||(r=oe.constants.DOC_URLS.GENERAL),o&&i){var a=ae.utils.queryString(_m(n));a&&(o=-1==o.indexOf("?")?"".concat(o,"?").concat(a):"".concat(o,"&").concat(a))}return{docUrl:r,endpoint:o}}))(Yt),hh=yh;function bh(e){return(bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vh(e,t){return!t||"object"!==bh(t)&&"function"!=typeof t?Eh(e):t}function Eh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function wh(e){return(wh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oh(e,t){return(Oh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yh.propTypes={databaseName:xt.a.string,docUrl:xt.a.string,endpoint:xt.a.string,endpointAddQueryOptions:xt.a.bool};var Sh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oh(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=wh(t);if(_h()){var r=wh(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return vh(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={editorValue:"",editMode:!1},t.onModeSwitchClick=t.onModeSwitchClick.bind(Eh(t)),t.onBlur=t.onBlur.bind(Eh(t)),t.startEdit=t.startEdit.bind(Eh(t)),t.onKeyPress=t.onKeyPress.bind(Eh(t)),t.onChange=t.onChange.bind(Eh(t)),t.props.checkDbPartitioned(t.props.databaseName),t}return n=a,(r=[{key:"onModeSwitchClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),!this.props.globalMode&&this.props.onGlobalModeSelected?this.props.onGlobalModeSelected():this.props.partitionKey?this.props.onPartitionKeySelected(this.state.editorValue):this.startEdit()}},{key:"startEdit",value:function(){var e=this;this.setState({editMode:!0,editorValue:this.props.partitionKey}),setTimeout((function(){return e.textInput.focus()}))}},{key:"updatePartitionKey",value:function(){this.setState({editMode:!1});var e=this.state.editorValue.trim();e?this.props.onPartitionKeySelected(e):this.props.onGlobalModeSelected()}},{key:"onBlur",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.updatePartitionKey()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.updatePartitionKey()}},{key:"onChange",value:function(e){this.setState({editorValue:e.target.value})}},{key:"globalHeader",value:function(){return se.a.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch"},se.a.createElement("i",{className:"fonticon-filter"}),"No partition selected")}},{key:"partitionHeader",value:function(){var e=this,t=se.a.createElement("input",{type:"text",style:{padding:2,fontSize:16,margin:0,display:this.state.editMode?"block":"none"},onKeyPress:this.onKeyPress,onChange:this.onChange,onBlur:this.onBlur,value:this.state.editorValue,ref:function(t){e.textInput=t}}),n="Click to select a partition",r="partition-selector__key";return""!==this.props.partitionKey&&(n=this.props.partitionKey,r+=" partition-selector__key--active"),se.a.createElement(se.a.Fragment,null,se.a.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch button partition-selector__switch--active"},se.a.createElement("i",{className:"fonticon-filter"})),se.a.createElement("div",{className:r},se.a.createElement("span",{onClick:this.startEdit,style:{display:this.state.editMode?"none":"block"}},n),t))}},{key:"render",value:function(){if(!this.props.selectorVisible)return null;var e=this.props.globalMode&&!this.state.editMode;return se.a.createElement("div",{className:"partition-selector"},e?this.globalHeader():this.partitionHeader())}}])&&gh(n.prototype,r),o&&gh(n,o),a}(se.a.Component);Sh.defaultProps={partitionKey:"",globalMode:!0},Sh.propTypes={selectorVisible:xt.a.bool.isRequired,partitionKey:xt.a.string.isRequired,checkDbPartitioned:xt.a.func.isRequired,onPartitionKeySelected:xt.a.func.isRequired,onGlobalModeSelected:xt.a.func,globalMode:xt.a.bool};var Dh="PARTITON_KEY_SHOW_SELECTOR",Nh="PARTITON_KEY_HIDE_SELECTOR",Rh=Object(At.b)((function(e,t){return{selectorVisible:e.partitionKey.selectorVisible,databaseName:t.databaseName,partitionKey:t.partitionKey,onPartitionKeySelected:t.onPartitionKeySelected,globalMode:t.globalMode}}),(function(e){return{checkDbPartitioned:function(t){e(function(e){return function(t){t({type:Nh}),St(e).then((function(e){e.props&&!0===e.props.partitioned&&t({type:Dh})}))}}(t))}}}))(Sh),Ch=Rh;Rh.propTypes={databaseName:xt.a.string.isRequired,partitionKey:xt.a.string.isRequired,onPartitionKeySelected:xt.a.func.isRequired,onGlobalModeSelected:xt.a.func.isRequired,globalMode:xt.a.bool};var Th=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,r=e.database,o=e.dbName,i=e.dropDownLinks,a=e.docURL,c=e.endpoint,s=e.endpointAddQueryOptions,l=e.fetchUrl,u=e.ddocsOnly,p=e.queryDocs,f=e.selectedNavItem,d=e.showPartitionKeySelector,m=e.partitionKey,y=e.onPartitionKeySelected,h=e.onGlobalModeSelected,b=e.globalMode,g=null;return d&&(g=se.a.createElement(Ch,{databaseName:o,partitionKey:m,onPartitionKeySelected:y,onGlobalModeSelected:h,globalMode:b})),se.a.createElement("header",{className:"two-panel-header"},se.a.createElement("div",{className:"flex-layout flex-row"},se.a.createElement("div",{id:"header-docs-left"},se.a.createElement(ep,{dbName:o,partitionKey:m,dropDownLinks:i})),se.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},se.a.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},g),se.a.createElement("div",{id:"right-header",className:"flex-fill"},se.a.createElement(Vm,{hideQueryOptions:t,hideJumpToDoc:n,database:r,fetchUrl:l,ddocsOnly:u,queryDocs:p,partitionKey:m,selectedNavItem:f})),se.a.createElement(hh,{docURL:a,endpoint:c,endpointAddQueryOptions:s}),se.a.createElement("div",{id:"notification-center-btn",className:"flex-fill"},se.a.createElement(zt,null)))))};Th.propTypes={dbName:xt.a.string.isRequired,dropDownLinks:xt.a.array.isRequired,docURL:xt.a.string,endpoint:xt.a.string,showIncludeAllDocs:xt.a.bool,hideQueryOptions:xt.a.bool,hideJumpToDoc:xt.a.bool,database:xt.a.object.isRequired,queryDocs:xt.a.func,selectedNavItem:xt.a.object,showPartitionKeySelector:xt.a.bool.isRequired,partitionKey:xt.a.string,onPartitionKeySelected:xt.a.func,onGlobalModeSelected:xt.a.func,globalMode:xt.a.bool},Th.defaultProps={hideHeaderBar:!1,showPartitionKeySelector:!1};var Ph=function(e){var t=e.hideFooter,n=e.lowerContent,r=e.upperContent,o=e.fetchUrl,i=e.databaseName,a=e.queryDocs,c=e.selectedNavItem,s=e.partitionKey;return se.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},se.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},se.a.createElement(Ju,{selectedNavItem:c,selectedPartitionKey:s})),se.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},se.a.createElement("div",{id:"dashboard-upper-content"},r),se.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),se.a.createElement("div",{id:"footer"},t?null:se.a.createElement(mh,{databaseName:i,fetchUrl:o,queryDocs:a}))))};Ph.defaultProps={hideFooter:!1},Ph.propTypes={hideFooter:xt.a.bool,lowerContent:xt.a.object,upperContent:xt.a.object,selectedNavItem:xt.a.object};var Ih=function(e){var t=e.database,n=e.designDocs,r=e.docURL,o=e.endpoint,i=e.dbName,a=e.dropDownLinks,c=e.fetchUrl,s=e.ddocsOnly,l=e.deleteEnabled,u=void 0===l||l,p=e.selectedNavItem,f=e.partitionKey,d=e.onPartitionKeySelected,m=e.onGlobalModeSelected,y=e.globalMode,h=(p.navItem,function(e){return function(e,t,n){jd(n,{reduce:void 0,group:void 0,group_level:void 0});var r=ae.utils.queryString(n),o="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(r);return E(o).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:So.VIEW}}))}(c,0,e)});fr.isViewSelected(p)&&(h=function(e){return function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0),-1!==e.indexOf("/_partition/")&&(t.stable=void 0,t.conflicts=void 0);var n=ae.utils.queryString(t),r="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(n);return E(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:So.VIEW,layout:void 0}}))}(c,e)});var b=se.a.createElement(Yy,{fetchUrl:c,designDocs:n,ddocsOnly:s,databaseName:i,fetchAtStartup:!0,queryDocs:h,docType:So.VIEW,deleteEnabled:u,partitionKey:f});return se.a.createElement("div",{id:"dashboard",className:"with-sidebar"},se.a.createElement(Th,{docURL:r,endpoint:o,endpointAddQueryOptions:!0,dbName:i,dropDownLinks:a,database:t,fetchUrl:c,ddocsOnly:s,queryDocs:h,selectedNavItem:p,showPartitionKeySelector:!s,partitionKey:f,onPartitionKeySelected:d,onGlobalModeSelected:m,globalMode:y}),se.a.createElement(Ph,{lowerContent:b,fetchUrl:c,databaseName:i,queryDocs:h,selectedNavItem:p,partitionKey:f}))},xh=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,i=e.dropDownLinks,a=e.selectedNavItem,c=e.partitionKey;return se.a.createElement("div",{id:"dashboard",className:"with-sidebar"},se.a.createElement(Th,{docURL:t,endpoint:r,dbName:o,dropDownLinks:i,database:n,hideQueryOptions:!0}),se.a.createElement(Ph,{upperContent:se.a.createElement(cf,null),lowerContent:se.a.createElement(Kp,{databaseName:o}),hideFooter:!0,selectedNavItem:a,partitionKey:c}))},Ah=function(e){var t=e.showEditView,n=e.database,r=e.docURL,o=e.endpoint,i=e.dbName,a=e.dropDownLinks,c=e.selectedNavItem,s=e.designDocInfo,l=e.partitionKey,u=t?se.a.createElement(Dl.IndexEditorContainer,{partitionKey:l}):se.a.createElement(Sf,{designDocInfo:s,designDocName:c.designDocName});return se.a.createElement("div",{id:"dashboard",className:"with-sidebar"},se.a.createElement(Th,{endpoint:o,docURL:r,dbName:i,dropDownLinks:a,database:n,partitionKey:l,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),se.a.createElement(Ph,{lowerContent:u,hideFooter:!0,selectedNavItem:c,partitionKey:l}))};Ah.defaultProps={showEditView:!0},Ah.propTypes={showEditView:xt.a.bool,docURL:xt.a.string.isRequired,endpoint:xt.a.string,dbName:xt.a.string.isRequired,dropDownLinks:xt.a.array.isRequired,designDocInfo:xt.a.object};var kh,jh=fs.extend({routes:{"database/:database/_partition/:partitionkey/_all_docs":{route:"partitionedAllDocs",roles:["fx_loggedIn"]},"database/:database/_all_docs(:extra)":{route:"globalAllDocs",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadataNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionKey/_changes":{route:"changes",roles:["fx_loggedIn"]},"database/:database/_changes":{route:"changes",roles:["fx_loggedIn"]}},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new qc.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadataNoPartition:function(e,t){return this.designDocMetadata(e,"",t)},designDocMetadata:function(e,t,n){var r=new ht.DdocInfo({_id:"_design/"+n},{database:this.database}),o=new ds("designDoc",{designDocName:n,designDocSection:"metadata"});Pt.fetchSelectedDatabaseInfo(e);var i=this.getCrumbs(this.database);return se.a.createElement(Ah,{showEditView:!1,docURL:r.documentation(),endpoint:r.url("apiurl"),dbName:this.database.id,dropDownLinks:i,database:this.database,selectedNavItem:o,designDocInfo:r,partitionKey:t})},globalAllDocs:function(e,t){return this.allDocs(e,"",t)},partitionedAllDocs:function(e,t){return this.allDocs(e,t)},allDocs:function(e,t,n){var r=this.createParams(n).docParams,o=t?oe.urls("partitioned_allDocs","server",encodeURIComponent(e),encodeURIComponent(t)):oe.urls("allDocsSanitized","server",e);this.database.buildAllDocs(r);var i=!!(r.startkey&&r.startkey.indexOf("_design")>-1),a="all-docs";i&&(a="design-docs");var c=new ds(a);sr.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var s=t?oe.urls("partitioned_allDocs","apiurl",encodeURIComponent(e),encodeURIComponent(t)):this.database.allDocs.urlRef("apiurl",{}),l=oe.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return Pt.fetchSelectedDatabaseInfo(e),se.a.createElement(Ih,{docURL:l,endpoint:s,dbName:this.database.id,dropDownLinks:u,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:i,selectedNavItem:c,partitionKey:t,onPartitionKeySelected:function(t){var n=oe.urls("partitioned_allDocs","app",encodeURIComponent(e),encodeURIComponent(t));oe.navigate("#/"+n)},onGlobalModeSelected:function(){var t=oe.urls("allDocs","app",encodeURIComponent(e));oe.navigate("#/"+t)},globalMode:""===t})},changes:function(e,t){var n=new ds("changes");return Pt.fetchSelectedDatabaseInfo(e),se.a.createElement(xh,{endpoint:oe.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database,selectedNavItem:n,partitionKey:t})}}),Lh="RESET_DOC",Mh="DOC_LOADED",Uh="SHOW_CLONE_DOC_MODAL",qh="HIDE_CLONE_DOC_MODAL",Vh="SHOW_DELETE_DOC_CONFIRMATION_MODAL",Fh="HIDE_DELETE_DOC_CONFIRMATION_MODAL",Bh="SHOW_UPLOAD_MODAL",Kh="HIDE_UPLOAD_MODAL",Hh="RESET_UPLOAD_MODAL",zh="FILE_UPLOAD_SUCCESS",Gh="FILE_UPLOAD_ERROR",Wh="START_FILE_UPLOAD",Xh="SET_FILE_UPLOAD_PERCENTAGE",Qh=function(e){return function(t){var n=e.doc;t({type:Lh}),n.fetch().then((function(){t({type:Mh,options:{doc:n}}),e.onLoaded&&e.onLoaded()}),(function(t){404===t.status&&Yh("The ".concat(n.id," document does not exist.")),oe.navigate(oe.urls("allDocs","app",e.database.id,""))}))}},Jh=function(){return function(e){e({type:qh})}};function Yh(e){oe.addNotification({msg:e,type:"error",clear:!0})}var $h=function(e){oe.reduxDispatch(Qh(e))},Zh=function(e,t,n,r){t?(oe.addNotification({msg:"Saving document.",clear:!0}),e.save().then((function(){n(e.prettyJSON()),r?oe.navigate(r,{trigger:!0}):oe.navigate("#/"+oe.urls("allDocs","app",oe.url.encode(e.database.id)),{trigger:!0})})).fail((function(e){oe.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(Yh("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):Yh("Please fix the JSON errors and try saving again.")},eb=function(){return function(e){e({type:Uh})}},tb=Jh,nb=function(e,t,n){Jh(),t.copy(n).then((function(){var t=oe.urls("document","app",e.safeID(),encodeURIComponent(n));oe.navigate(t,{trigger:!0}),oe.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: ".concat(e.responseText,".");oe.addNotification({msg:t,type:"error"})}))},rb=function(){return function(e){e({type:Vh})}},ob=function(){return function(e){e({type:Fh})}},ib=function(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),r=oe.urls("document","server",t,e.safeID(),n);w(r).then((function(e){if(e.error)throw new Error(e.reason||e.error);oe.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),oe.navigate(oe.urls("allDocs","app",t,""))})).catch((function(e){oe.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})}))},ab=function(){return function(e){e({type:Bh})}},cb=function(){return function(e){e({type:Kh})}},sb=function(e){return function(t){if(0!==e.files.length){t({type:Wh});var n="?rev="+e.rev,r=e.doc.getDatabase().safeID(),o=e.doc.safeID(),i=e.files[0],a=oe.urls("document","attachment",r,o,encodeURIComponent(i.name),n),c=function(e){t({type:Gh,options:{error:e}})},s=new XMLHttpRequest;kh=s,s.withCredentials=!0,s.upload&&(s.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t({type:Xh,options:{percent:n}})}}),s.onloadend=function(){kh=void 0},s.onerror=function(){c("Error uploading file")},s.onload=function(n){if(s.status>=200&&s.status<300)i=e.doc,t(Qh({doc:i,onLoaded:function(){t({type:zh}),oe.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}}));else{var r="Error uploading file. ";if(n.responseText)try{var o=JSON.parse(n.responseText);o.error&&(r+="Reason: "+(o.reason||o.error))}catch(e){}c(r)}var i},s.open("PUT",a),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-Type",i.type||"application/octet-stream"),s.setRequestHeader("Accept","application/json"),s.send(i)}else t({type:Gh,options:{error:"Please select a file to be uploaded."}})}},lb=function(){kh&&kh.abort()},ub=function(){return function(e){e({type:Hh})}};function pb(e){return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mb(e,t){return!t||"object"!==pb(t)&&"function"!=typeof t?yb(e):t}function yb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function bb(e){return(bb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gb(e,t){return(gb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gb(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=bb(t);if(hb()){var r=bb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return mb(this,e)});function a(){var e;fb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vb(yb(e=i.call.apply(i,[this].concat(n))),"getAttachmentList",(function(){var t=encodeURIComponent(e.props.doc.database.get("id")),n=encodeURIComponent(e.props.doc.get("_id"));return _.map(e.props.doc.get("_attachments"),(function(e,r){var o=oe.urls("document","attachment",t,n,encodeURIComponent(r));return se.a.createElement(sn.e,{key:r,href:o,target:"_blank","data-bypass":"true"},se.a.createElement("strong",null,r),se.a.createElement("span",{className:"attachment-delimiter"},"-"),se.a.createElement("span",null,e.content_type,e.content_type?", ":"",R.formatSize(e.length)))}))})),e}return n=a,(r=[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&se.a.createElement("div",{className:"panel-section view-attachments-section btn-group"},se.a.createElement(sn.d,{id:"view-attachments-menu"},se.a.createElement(sn.d.Toggle,{noCaret:!0,className:"panel-button dropdown-toggle btn","data-bypass":"true"},se.a.createElement("i",{className:"icon icon-paper-clip"}),se.a.createElement("span",{className:"button-text"},"View Attachments"),se.a.createElement("span",{className:"caret"})),se.a.createElement(sn.d.Menu,null,this.getAttachmentList())))}}])&&db(n.prototype,r),o&&db(n,o),a}(se.a.Component);function _b(e){return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ob(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sb(e,t){return!t||"object"!==_b(t)&&"function"!=typeof t?Db(e):t}function Db(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Rb(e){return(Rb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cb(e,t){return(Cb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vb(Eb,"propTypes",{isLoading:xt.a.bool.isRequired,doc:xt.a.object}),vb(Eb,"defaultProps",{isLoading:!0,doc:{}});var Pb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cb(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Rb(t);if(Nb()){var r=Rb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Sb(this,e)});function a(){var e;wb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tb(Db(e=i.call.apply(i,[this].concat(n))),"state",{uuid:null}),Tb(Db(e),"cloneDoc",(function(){e.props.onSubmit&&e.props.onSubmit(),e.props.cloneDoc(e.props.database,e.props.doc,e.state.uuid)})),Tb(Db(e),"closeModal",(function(t){t&&t.preventDefault(),e.props.hideCloneDocModal()})),Tb(Db(e),"docIDChange",(function(t){e.setState({uuid:t.target.value})})),e}return n=a,(r=[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&R.getUUID().then((function(t){if(t.uuids){var n={uuid:t.uuids[0]},r=e.props.doc?e.props.doc.attributes._id.indexOf(":"):-1;if(r>=0){var o=e.props.doc.attributes._id.substring(0,r);n.uuid=o+":"+n.uuid}e.setState(n)}})).catch((function(){}))}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&se.a.createElement(sn.f,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,"Clone Document")),se.a.createElement(sn.f.Body,null,se.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},se.a.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),se.a.createElement("p",null,"You can modify the following generated ID for your new document."),se.a.createElement("input",{ref:function(t){return e.newDocId=t},type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),se.a.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},se.a.createElement("i",{className:"icon-repeat"})," Clone Document")))}}])&&Ob(n.prototype,r),o&&Ob(n,o),a}(se.a.Component);function Ib(e){return(Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ab(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kb(e,t){return!t||"object"!==Ib(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mb(e,t){return(Mb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ub(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Tb(Pb,"propTypes",{visible:xt.a.bool.isRequired,doc:xt.a.object,database:xt.a.object.isRequired,onSubmit:xt.a.func.isRequired,hideCloneDocModal:xt.a.func.isRequired,cloneDoc:xt.a.func.isRequired});var qb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mb(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Lb(t);if(jb()){var r=Lb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return kb(this,e)});function a(){return xb(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e="icon "+this.props.iconClass;return se.a.createElement("div",{className:"panel-section"},se.a.createElement("button",{className:"panel-button ".concat(this.props.className),title:this.props.title,onClick:this.props.onClick},se.a.createElement("i",{className:e}),se.a.createElement("span",null,this.props.title)))}}])&&Ab(n.prototype,r),o&&Ab(n,o),a}(se.a.Component);function Vb(e){return(Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fb(){return(Fb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hb(e,t){return!t||"object"!==Vb(t)&&"function"!=typeof t?zb(e):t}function zb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wb(e){return(Wb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xb(e,t){return(Xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ub(qb,"propTypes",{title:xt.a.string.isRequired,onClick:xt.a.func.isRequired,className:xt.a.string}),Ub(qb,"defaultProps",{title:"",iconClass:"",onClick:function(){},className:""});var Jb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xb(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Wb(t);if(Gb()){var r=Wb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Hb(this,e)});function a(){var e;Bb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qb(zb(e=i.call.apply(i,[this].concat(n))),"closeModal",(function(t){t&&t.preventDefault(),e.props.inProgress&&e.props.cancelUpload(),e.props.hideUploadModal(),e.props.resetUploadModal()})),Qb(zb(e),"upload",(function(){e.props.uploadAttachment({doc:e.props.doc,rev:e.props.doc.get("_rev"),files:e.attachments.files})})),e}return n=a,(r=[{key:"render",value:function(){var e=this,t="alert alert-error";""===this.props.errorMessage&&(t+=" hide");var n="progress progress-info",r={disabled:"disabled"};return this.props.inProgress||(n+=" hide",r={}),se.a.createElement(sn.f,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,"Upload Attachment")),se.a.createElement(sn.f.Body,null,se.a.createElement("div",{className:t},this.props.errorMessage),se.a.createElement("div",null,se.a.createElement("form",{ref:function(t){return e.uploadForm=t},className:"form"},se.a.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),se.a.createElement("input",Fb({ref:function(t){return e.attachments=t},type:"file",name:"_attachments"},r)),se.a.createElement("br",null)),se.a.createElement("div",{className:n},se.a.createElement("div",{className:"bar",style:{width:this.props.uploadPercentage+"%"}})))),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),se.a.createElement("button",Fb({href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},r),se.a.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}])&&Kb(n.prototype,r),o&&Kb(n,o),a}(se.a.Component);function Yb(e){return(Yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eg(e,t){return!t||"object"!==Yb(t)&&"function"!=typeof t?tg(e):t}function tg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ng(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function rg(e){return(rg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function og(e,t){return(og=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ig(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qb(Jb,"propTypes",{visible:xt.a.bool.isRequired,doc:xt.a.object,inProgress:xt.a.bool.isRequired,uploadPercentage:xt.a.number.isRequired,errorMessage:xt.a.string,cancelUpload:xt.a.func.isRequired,hideUploadModal:xt.a.func.isRequired,resetUploadModal:xt.a.func.isRequired,uploadAttachment:xt.a.func.isRequired});var ag=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&og(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=rg(t);if(ng()){var r=rg(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return eg(this,e)});function a(){var e;$b(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ig(tg(e=i.call.apply(i,[this].concat(n))),"getCodeEditor",(function(){if(e.props.isLoading)return se.a.createElement(Ra.LoadLines,null);var t=e.props.doc.attributes;e.props.isDbPartitioned&&(-1!==t._id.indexOf(":")||t._id.startsWith("_design")||(t._id=":"+t._id));var n=JSON.stringify(t,null,"  "),r=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:e.saveDoc}];return se.a.createElement(Ra.CodeEditor,{id:"doc-editor",ref:function(t){return e.docEditor=t},defaultCode:n,mode:"json",autoFocus:!0,editorCommands:r,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})})),ig(tg(e),"saveDoc",(function(){e.props.saveDoc(e.props.doc,e.checkDocIsValid(),e.onSaveComplete,e.props.previousUrl)})),ig(tg(e),"onSaveComplete",(function(){e.getEditor().clearChanges()})),ig(tg(e),"hideDeleteDocModal",(function(){e.props.hideDeleteDocModal()})),ig(tg(e),"deleteDoc",(function(){e.props.hideDeleteDocModal(),e.props.deleteDoc(e.props.doc)})),ig(tg(e),"getEditor",(function(){return e.docEditor?e.docEditor.getEditor():null})),ig(tg(e),"checkDocIsValid",(function(){if(e.getEditor().hasErrors())return!1;var t=JSON.parse(e.getEditor().getValue());return e.props.doc.clear().set(t,{validate:!0}),!e.props.doc.validationError})),ig(tg(e),"clearChanges",(function(){e.docEditor.clearChanges()})),ig(tg(e),"getExtensionIcons",(function(){var t=oe.getExtensions("DocEditor:icons");return _.map(t,(function(t,n){return se.a.createElement(t,{doc:e.props.doc,key:n,database:e.props.database})}))})),ig(tg(e),"getButtonRow",(function(){return!e.props.isNewDoc&&se.a.createElement("div",null,se.a.createElement(Eb,{doc:e.props.doc,isLoading:e.props.isLoading}),se.a.createElement("div",{className:"doc-editor-extension-icons"},e.getExtensionIcons()),e.props.conflictCount?se.a.createElement(qb,{title:"Conflicts (".concat(e.props.conflictCount,")"),iconClass:"icon-columns",className:"conflicts",onClick:function(){oe.navigate(oe.urls("revision-browser","app",e.props.database.safeID(),e.props.doc.id))}}):null,se.a.createElement(qb,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",onClick:e.props.showUploadModal}),se.a.createElement(qb,{title:"Clone Document",iconClass:"icon-repeat",onClick:e.props.showCloneDocModal}),se.a.createElement(qb,{title:"Delete",iconClass:"icon-trash",onClick:e.props.showDeleteDocModal}))})),e}return n=a,(r=[{key:"UNSAFE_componentWillUpdate",value:function(e){(this.props.numFilesUploaded!==e.numFilesUploaded||this.props.doc&&this.props.doc.hasChanged()||this.props.doc&&e.doc&&this.props.doc.id!==e.doc.id)&&(this.getEditor().setValue(JSON.stringify(e.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isNewDoc?"Create Document":"Save Changes",n=this.props.previousUrl?this.props.previousUrl:oe.urls("allDocs","app",oe.url.encode(this.props.database.id));return se.a.createElement("div",null,se.a.createElement("div",{id:"doc-editor-actions-panel"},se.a.createElement("div",{className:"doc-actions-left"},se.a.createElement("button",{className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},se.a.createElement("i",{className:"icon fonticon-ok-circled"})," ",t),se.a.createElement("div",null,se.a.createElement("a",{href:"#/".concat(n),className:"js-back cancel-button"},"Cancel"))),se.a.createElement("div",{className:"alignRight"},this.getButtonRow())),se.a.createElement("div",{className:"code-region"},se.a.createElement("div",{className:"bgEditorGutter"}),se.a.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),se.a.createElement(Jb,{ref:function(t){return e.uploadModal=t},visible:this.props.isUploadModalVisible,doc:this.props.doc,inProgress:this.props.uploadInProgress,uploadPercentage:this.props.uploadPercentage,errorMessage:this.props.uploadErrorMessage,cancelUpload:this.props.cancelUpload,hideUploadModal:this.props.hideUploadModal,resetUploadModal:this.props.resetUploadModal,uploadAttachment:this.props.uploadAttachment}),se.a.createElement(Pb,{doc:this.props.doc,database:this.props.database,visible:this.props.isCloneDocModalVisible,onSubmit:this.clearChanges,hideCloneDocModal:this.props.hideCloneDocModal,cloneDoc:this.props.cloneDoc}),se.a.createElement("span",{id:"hey"},"bb"),se.a.createElement($a.ConfirmationModal,{title:"Confirm Deletion",visible:this.props.isDeleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}])&&Zb(n.prototype,r),o&&Zb(n,o),a}(se.a.Component);ig(ag,"defaultProps",{database:{},isNewDoc:!1}),ig(ag,"propTypes",{isLoading:xt.a.bool.isRequired,isNewDoc:xt.a.bool.isRequired,isDbPartitioned:xt.a.bool.isRequired,doc:xt.a.object,conflictCount:xt.a.number.isRequired,previousUrl:xt.a.string,saveDoc:xt.a.func.isRequired,isCloneDocModalVisible:xt.a.bool.isRequired,database:xt.a.object,showCloneDocModal:xt.a.func.isRequired,hideCloneDocModal:xt.a.func.isRequired,cloneDoc:xt.a.func.isRequired,isDeleteDocModalVisible:xt.a.bool.isRequired,showDeleteDocModal:xt.a.func.isRequired,hideDeleteDocModal:xt.a.func.isRequired,deleteDoc:xt.a.func.isRequired,isUploadModalVisible:xt.a.bool.isRequired,uploadInProgress:xt.a.bool.isRequired,uploadPercentage:xt.a.number.isRequired,uploadErrorMessage:xt.a.string,numFilesUploaded:xt.a.number.isRequired,showUploadModal:xt.a.func.isRequired,hideUploadModal:xt.a.func.isRequired,cancelUpload:xt.a.func.isRequired,resetUploadModal:xt.a.func.isRequired,uploadAttachment:xt.a.func.isRequired});var cg=Object(At.b)((function(e,t){var n=e.docEditor,r=e.databases;return{isLoading:n.isLoading||r.isLoadingDbInfo,isNewDoc:t.isNewDoc,isDbPartitioned:r.isDbPartitioned,doc:n.doc,database:t.database,conflictCount:n.docConflictCount,previousUrl:t.previousUrl,isCloneDocModalVisible:n.cloneDocModalVisible,isDeleteDocModalVisible:n.deleteDocModalVisible,isUploadModalVisible:n.uploadModalVisible,uploadInProgress:n.uploadInProgress,uploadPercentage:n.uploadPercentage,uploadErrorMessage:n.uploadErrorMessage,numFilesUploaded:n.numFilesUploaded}}),(function(e){return{saveDoc:function(e,t,n,r){Zh(e,t,n,r)},showCloneDocModal:function(){e(eb())},hideCloneDocModal:function(){e(tb())},cloneDoc:function(e,t,n){nb(e,t,n)},showDeleteDocModal:function(){e(rb())},hideDeleteDocModal:function(){e(ob())},deleteDoc:function(e){ib(e)},showUploadModal:function(){e(ab())},hideUploadModal:function(){e(cb())},cancelUpload:function(){lb()},resetUploadModal:function(){e(ub())},uploadAttachment:function(t){e(sb(t))}}}))(ag),sg=function(e){var t=e.onClick,n=e.forward?"fonticon-right-open":"fonticon-left-open";return se.a.createElement("div",{style:{height:"20px",width:"11px",marginTop:"7px"},className:n,onClick:t})};sg.propTypes={onClick:xt.a.func.isRequired};var lg=function(e){var t=e.options,n=e.selected,r=e.onRevisionClick,o=e.onBackwardClick,i=e.onForwardClick;return se.a.createElement("div",{className:"conflicting-revs-dropdown"},se.a.createElement(sg,{backward:!0,onClick:o}),se.a.createElement("div",{style:{width:"345px",margin:"0 5px"}},se.a.createElement(ba.a,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:r})),se.a.createElement(sg,{forward:!0,onClick:i}))};lg.propTypes={options:xt.a.array.isRequired,selected:xt.a.string.isRequired,onRevisionClick:xt.a.func.isRequired,onBackwardClick:xt.a.func.isRequired,onForwardClick:xt.a.func.isRequired};var ug=lg;function pg(e){return(pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dg(e,t){return!t||"object"!==pg(t)&&"function"!=typeof t?mg(e):t}function mg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yg(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function hg(e){return(hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bg(e,t){return(bg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gg=Ra.ConfirmButton,vg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bg(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=hg(t);if(yg()){var r=hg(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return dg(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={checked:!1},t.close=t.close.bind(mg(t)),t.onDeleteConflicts=t.onDeleteConflicts.bind(mg(t)),t}return n=a,(r=[{key:"close",value:function(){this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return se.a.createElement(sn.f,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},se.a.createElement(sn.f.Header,{closeButton:!1},se.a.createElement(sn.f.Title,null,"Solve Conflicts")),se.a.createElement(sn.f.Body,null,se.a.createElement("p",null,se.a.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),se.a.createElement(sn.f.Footer,null,se.a.createElement("div",{style:{float:"left",marginTop:"10px"}},se.a.createElement("label",null,se.a.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),se.a.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),se.a.createElement(gg,{onClick:this.onDeleteConflicts,text:"Delete Revisions",buttonType:"btn-danger"})))}}])&&fg(n.prototype,r),o&&fg(n,o),a}(se.a.Component);function Eg(e){return(Eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wg(e,t){return!t||"object"!==Eg(t)&&"function"!=typeof t?Og(e):t}function Og(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sg(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Dg(e){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ng(e,t){return(Ng=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}vg.propTypes={onConfirm:xt.a.func.isRequired,toggleConfirmModal:xt.a.func.isRequired};var Rg=Ra.ConfirmButton,Cg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ng(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Dg(t);if(Sg()){var r=Dg(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return wg(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={showModal:!1},t.selectAsWinner=t.selectAsWinner.bind(Og(t)),t.onSelectAsWinnerClickOurs=t.onSelectAsWinnerClick.bind(Og(t),t.props.ours),t.onSelectAsWinnerClickTheirs=t.onSelectAsWinnerClick.bind(Og(t),t.props.theirs),t.onRevisionClick=t.onRevisionClick.bind(Og(t)),t.onForwardClick=t.onForwardClick.bind(Og(t)),t.onBackwardClick=t.onBackwardClick.bind(Og(t)),t}return n=a,(r=[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&ae.utils.localStorageSet("deleteConflictsHideModal",!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){!0===ae.utils.localStorageGet("deleteConflictsHideModal")?this.selectAsWinner(e):this.props.toggleConfirmModal(!0,e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return se.a.createElement("div",{className:"revision-browser-controls"},se.a.createElement(vg,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),se.a.createElement("table",{style:{margin:"10px 60px",width:"100%"}},se.a.createElement("tbody",null,se.a.createElement("tr",{style:{height:"60px"}},se.a.createElement("td",{style:t},"Server-Selected Rev: "),se.a.createElement("td",{style:t},se.a.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},se.a.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),se.a.createElement("td",null,se.a.createElement(Rg,{onClick:this.onSelectAsWinnerClickOurs,style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),se.a.createElement("tr",{style:{height:"60px"}},se.a.createElement("td",{style:t},"Conflicting Revisions: "),se.a.createElement("td",{style:t},se.a.createElement(ug,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),se.a.createElement("td",null,se.a.createElement(Rg,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}])&&_g(n.prototype,r),o&&_g(n,o),a}(se.a.Component);function Tg(e){return(Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ig(e,t){return!t||"object"!==Tg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xg(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ag(e){return(Ag=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kg(e,t){return(kg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Cg.propTypes={tree:xt.a.object.isRequired,ours:xt.a.object.isRequired,conflictingRevs:xt.a.array.isRequired},n(605);var jg=ar.a.acequire("ace/ext/static_highlight");n(184);var Lg=ar.a.acequire("ace/mode/json").Mode;n(185);var Mg=ar.a.acequire("ace/theme/idle_fingers"),Ug=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kg(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Ag(t);if(xg()){var r=Ag(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ig(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new Lg,n=this.revLeftOurs,r=this.revRightTheirs,o=jg.render(e(this.props.ours),t,Mg,0,!0);n.innerHTML=o.html;var i=jg.render(e(this.props.theirs),t,Mg,0,!0);r.innerHTML=i.html}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,r=t.theirs;return n&&r?se.a.createElement("div",{className:"revision-split-area"},se.a.createElement("div",{"data-id":"ours",style:{width:"50%"}},se.a.createElement("div",{style:{marginBottom:"20px"}},n._rev," (Server-Selected Rev)"),se.a.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),se.a.createElement("div",{"data-id":"theirs",style:{width:"50%"}},se.a.createElement("div",{style:{marginBottom:"20px"}},r._rev),se.a.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):se.a.createElement("div",null)}}])&&Pg(n.prototype,r),o&&Pg(n,o),a}(se.a.Component),qg=n(220),Vg=(n(607),function(e){var t=e.ours,n=e.theirs;if(!t||!n)return se.a.createElement("div",null);var r=qg.diff(t,n),o=qg.formatters.html.format(r,t);return se.a.createElement("div",{className:"revision-diff-area"},se.a.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))});Vg.propTypes={ours:xt.a.object,theirs:xt.a.object,currentRev:xt.a.string};var Fg=Vg;function Bg(e){return(Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hg(e,t){return!t||"object"!==Bg(t)&&"function"!=typeof t?zg(e):t}function zg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gg(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wg(e){return(Wg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xg(e,t){return(Xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xg(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Wg(t);if(Gg()){var r=Wg(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Hg(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).toggleDiffViewFalse=t.toggleDiffView.bind(zg(t),!1),t.toggleDiffViewTrue=t.toggleDiffView.bind(zg(t),!0),t}return n=a,(r=[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,r=e.theirs,o=e.conflictingRevs,i=e.isDiffViewEnabled;return t.length||r?r&&o.length?se.a.createElement("div",{className:"revision-wrapper scrollable"},se.a.createElement(Cg,this.props),se.a.createElement("div",{className:"revision-view-controls"},se.a.createElement(sn.b,{className:"two-sides-toggle-button"},se.a.createElement(sn.a,{style:{width:"120px"},className:i?"active":"",onClick:this.toggleDiffViewTrue},se.a.createElement("i",{className:"icon-columns"})," Diff"),se.a.createElement(sn.a,{style:{width:"120px"},className:i?"":"active",onClick:this.toggleDiffViewFalse},se.a.createElement("i",{className:"icon-file-text"})," Document"))),i?se.a.createElement(Fg,{ours:n,theirs:r}):se.a.createElement(Ug,{ours:n,theirs:r})):se.a.createElement("div",{style:{textAlign:"center",color:"#fff"}},se.a.createElement("h2",null,"No conflicts")):se.a.createElement(Lo,null)}}])&&Kg(n.prototype,r),o&&Kg(n,o),a}(se.a.Component),Jg="REV_TREE_LOADED",Yg="REV_BROWSER_DIFF_DOCS_READY",$g="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",Zg="REV_BROWSER_SHOW_CONFIRM_MODAL";function ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(n),!0).forEach((function(t){nv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rv,ov={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null},iv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ov,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case"REV_TREE_LOADED":var o=r.tree,i=r.doc,a=r.conflictDoc,c=r.conflictingRevs,s=r.databaseName;return tv({},e,{tree:o,doc:i,conflictDoc:a,conflictingRevs:c,databaseName:s,theirs:a,ours:i});case"REV_BROWSER_DIFF_DOCS_READY":return tv({},e,{theirs:r.theirs});case"REV_BROWSER_DIFF_ENABLE_DIFF_VIEW":return tv({},e,{isDiffViewEnabled:r.enableDiff});case"REV_BROWSER_SHOW_CONFIRM_MODAL":return tv({},e,{showConfirmModal:r.show,docToWin:r.docToWin});default:return e}},av=function(e){return e.doc},cv=function(e){return e.conflictDoc},sv=function(e){return e.conflictingRevs},lv=function(e){return e.databaseName},uv=function(e){return e.ours},pv=function(e){return e.theirs},fv=function(e){return e.showConfirmModal},dv=function(e){return e.conflictingRevs.map((function(e){return{value:e,label:e}}))},mv=function(e){return e.isDiffViewEnabled},yv=function(e){return e.docToWin},hv=n(320),bv=n.n(hv),gv=n(222),vv=n(322);function Ev(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gv.a.plugin(vv.a);function wv(e,t,n){return e.reduce((function(e,n){return n[0]!==t&&e.push(n[0]),e}),[]).filter((function(e){return-1===n.indexOf(e)}))}var Ov=function(e,t,n,r,o){return{type:Jg,options:{tree:e,doc:t,conflictDoc:r,conflictingRevs:n,databaseName:o}}},Sv=function(e,t){return{type:Yg,options:{theirs:t,ours:e}}},Dv=function(e,t){return{type:Zg,options:{show:e,docToWin:t}}};var Nv=Object(At.b)((function(e,t){var n,r=e.revisionBrowser;return{docId:t.docId,tree:(n=r,n.tree),doc:av(r),conflictDoc:cv(r),conflictingRevs:sv(r),databaseName:lv(r),ours:uv(r),theirs:pv(r),showConfirmModal:fv(r),dropdownData:dv(r),isDiffViewEnabled:mv(r),docToWin:yv(r)}}),(function(e,t){return{toggleConfirmModal:function(t,n){e(Dv(t,n))},initDiffEditor:function(){var n,r;e((n=t.databaseName,r=t.docId,function(e){var t=oe.urls("databaseBaseURL","apiurl",n);rv=Object(gv.a)(t),Promise.all([rv.get(r),bv()(rv,r)]).then((function(t){var r=Ev(t,2),o=r[0],i=r[1],a=wv(i.paths,i.winner,Object.keys(i.deleted)),c=a[0];if(!c)return e(Ov(i,o,a,null,n));rv.get(o._id,{rev:c}).then((function(t){e(Ov(i,o,a,t,n))}))}))}))},chooseLeaves:function(t,n){e(function(e,t){return function(n){rv.get(e._id,{rev:t}).then((function(t){n(Sv(e,t))}))}}(t,n))},selectRevAsWinner:function(n,r,o){var i,a,c,s;e((i=t.databaseName,a=n,c=o.paths,s=r,function(e){var t=wv(c,s,[]),n=function(e,t){return{docs:t.map((function(t){return{_id:e,_rev:t,_deleted:!0}}))}}(a,t);O(oe.urls("bulk_docs","server",i,""),n).then((function(t){if(t.error)return oe.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});oe.addNotification({msg:"Conflicts successfully solved.",clear:!0}),e(Dv(!1,null)),oe.navigate(oe.urls("allDocs","app",i,""))}))}))},toggleDiffView:function(t){e(function(e){return{type:$g,options:{enableDiff:e}}}(t))}}}))(Qg),Rv={DocEditorRouteObject:oe.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new qc.Model({id:this.databaseName}),this.doc=new ht.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/_new":"codeEditorNewDoc","database/:database/_new?(:extra)":"codeEditorNewDoc"},revisionBrowser:function(e,t){var n=oe.urls("allDocs","app",oe.url.encode(this.database.safeID())),r=oe.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return se.a.createElement(on,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:r,component:se.a.createElement(Nv,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditorNewDoc:function(e,t){return this.codeEditor(e,null,t)},codeEditor:function(e,t,n){var r=ae.getParams(n),o=[{name:e,link:oe.urls("allDocs","app",oe.url.encode(e))},{name:t||"New Document"}];if(this.database=new qc.Model({id:e}),t)this.doc=new ht.Doc({_id:t},{database:this.database,fetchConflicts:!0});else{var i=r?r.partitionKey:void 0;this.doc=new ht.NewDoc(null,{database:this.database,partitionKey:i})}Pt.fetchSelectedDatabaseInfo(e),$h({doc:this.doc,database:this.database});var a=void 0,c=oe.router.lastPages.filter((function(e){return-1!==e.indexOf("/_all_docs")||e.match(/_design\/(\S)*\/_/)||-1!==e.indexOf("/_find")}));return c.length>0&&(a=c[c.length-1]),se.a.createElement(on,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),partitionKey:r.partitionKey,component:se.a.createElement(cg,{database:this.database,isNewDoc:!t,previousUrl:a})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}})},Cv=fs.extend({routes:{"database/:database/_partition/:partitionkey/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view":{route:"showPartitionedView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showGlobalView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editViewNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new qc.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showGlobalView:function(e,t,n){return this.showView(e,"",t,n)},showPartitionedView:function(e,t,n,r){return this.showView(e,t,n,r)},showView:function(e,t,n,r){r=r.replace(/\?.*$/,""),pl.dispatchClearIndex(),pl.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Pt.fetchSelectedDatabaseInfo(e);var o=new ds("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});ps(o);var i=t?encodeURIComponent(t):"",a=oe.urls("view","server",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r)),c=oe.urls("view","apiurl",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r)),s=oe.constants.DOC_URLS.GENERAL,l=this.getCrumbs(this.database);return se.a.createElement(Ih,{docURL:s,endpoint:c,dbName:this.database.id,dropDownLinks:l,database:this.database,fetchUrl:a,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:o,partitionKey:t,onPartitionKeySelected:function(t){var o=oe.urls("partitioned_view","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));oe.navigate("#/"+o+encodeURIComponent(r))},onGlobalModeSelected:function(){var t=oe.urls("view","app",encodeURIComponent(e),encodeURIComponent(n));oe.navigate("#/"+t+encodeURIComponent(r))},globalMode:""===t})},createViewNoPartition:function(e,t){return this.createView(e,"",t)},createView:function(e,t,n){var r=!0,o="new-doc";n&&(o="_design/"+n,r=!1),pl.dispatchFetchDesignDocsBeforeEdit({viewName:"new-view",isNewView:!0,database:this.database,designDocs:this.designDocs,designDocId:o,isNewDesignDoc:r}),Pt.fetchSelectedDatabaseInfo(e);var i=new ds(""),a=this.getCrumbs(this.database);return se.a.createElement(Ah,{showIncludeAllDocs:!0,docURL:oe.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:a,database:this.database,selectedNavItem:i,partitionKey:t})},editViewNoPartition:function(e,t,n){return this.editView(e,"",t,n)},editView:function(e,t,n,r){pl.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Pt.fetchSelectedDatabaseInfo(e);var o=new ds("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});ps(o);var i=oe.constants.DOC_URLS.GENERAL,a=oe.urls("view","apiurl",e,n,r),c=this.getCrumbs(this.database);return se.a.createElement(Ah,{showIncludeAllDocs:!0,docURL:i,endpoint:a,dbName:this.database.id,dropDownLinks:c,database:this.database,selectedNavItem:o,partitionKey:t})}});function Tv(e){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iv(e,t){return!t||"object"!==Tv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xv(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Av(e){return(Av=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kv(e,t){return(kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kv(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Av(t);if(xv()){var r=Av(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Iv(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return[n," ",n>1?"minutes":"minute",", ",t=Math.floor(t-60*n)," ",t>1?"seconds":"second"].join("")}},{key:"getWarning",value:function(e){if(e){var t=e.split("\n").map((function(e,t){return se.a.createElement(se.a.Fragment,{key:t},e,se.a.createElement("br",null))}));return se.a.createElement("span",null,t)}}},{key:"warningPopupComponent",value:function(e){if(e)return se.a.createElement("div",{className:"warning"},se.a.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=0!==t||n?"true":"false";return se.a.createElement("div",{"data-status":o},e+": ",se.a.createElement("span",{className:"value"},t.toLocaleString()," ",r))}},{key:"executionStatsPopupComponent",value:function(e){return e?se.a.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",Math.round(e.execution_time_ms),!1,"ms")):null}},{key:"popup",value:function(e,t){return se.a.createElement(sn.i,{id:"popover-execution-stats",title:"Execution Statistics"},se.a.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,r=this.getWarning(n),o=null;r&&(o=se.a.createElement("i",{className:"fonticon-attention-circled"}));var i=null;t?i=se.a.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):r&&(i=se.a.createElement("span",{className:"execution-stats-component"},"Warning"));var a=this.popup(t,r);return se.a.createElement(sn.h,{trigger:["hover","focus","click"],placement:"right",overlay:a},se.a.createElement("span",{className:"execution-stats"},o,i))}}])&&Pv(n.prototype,r),o&&Pv(n,o),a}(se.a.Component);function Lv(e){return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mv(Object(n),!0).forEach((function(t){qv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fv(e,t){return!t||"object"!==Lv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bv(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Kv(e){return(Kv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hv(e,t){return(Hv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}jv.propTypes={executionStats:xt.a.object,warning:xt.a.string};var zv=Ra.PaddedBorderedBox,Gv=Ra.CodeEditorPanel,Wv=ae.helpers.getDocUrl,Xv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hv(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Kv(t);if(Bv()){var r=Kv(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Fv(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"componentDidMount",value:function(){var e=this;prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults();var t=this.codeEditor.codeEditor.editor;t.commands.byName.runQuery||t.commands.addCommand({name:"runQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Option-Enter"},exec:function(){e.runQuery({preventDefault:function(){}})},readOnly:!0})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return se.a.createElement("div",{className:"mango-editor-wrapper"},se.a.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},se.a.createElement("div",{className:"padded-box"},se.a.createElement(ba.a,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),se.a.createElement(zv,null,se.a.createElement(Gv,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:Wv("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),se.a.createElement("div",{className:"padded-box"},se.a.createElement("div",{className:"control-group"},se.a.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),se.a.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),se.a.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),se.a.createElement("div",null,se.a.createElement(jv,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?se.a.createElement("div",{className:"mango-editor-wrapper"},se.a.createElement(Ra.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(oe.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+oe.urls("mango","index-app",encodeURIComponent(this.props.databaseName),t);oe.navigate(n)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:JSON.parse(this.getEditorValue()),fetchParams:Uv({},this.props.fetchParams,{skip:0})}))}}])&&Vv(n.prototype,r),o&&Vv(n,o),a}(ce.Component);Xv.propTypes={description:xt.a.string.isRequired,editorTitle:xt.a.string.isRequired,queryFindCode:xt.a.string.isRequired,queryFindCodeChanged:xt.a.bool,databaseName:xt.a.string.isRequired,partitionKey:xt.a.string,runExplainQuery:xt.a.func.isRequired,runQuery:xt.a.func.isRequired,manageIndexes:xt.a.func.isRequired,loadQueryHistory:xt.a.func.isRequired,clearResults:xt.a.func.isRequired};var Qv={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"};function Jv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $v=function(e,t){var n=ae.utils.queryString(t),r=oe.urls("mango","index-server",ae.utils.safeURLName(e));return r="".concat(r).concat(-1!==r.indexOf("?")?"&":"?").concat(n),E(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:So.MANGO_INDEX,layout:Oo.JSON}}))},Zv=null,eE=function(e,t){var n=t.limit,r=t.limit-1,o=(Math.floor(t.skip/r)+1)*r-e.limit;return o>=0&&(n=r-o),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jv(Object(n),!0).forEach((function(t){Yv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{limit:n,skip:e.skip?t.skip+e.skip:t.skip})},tE=function(e,t,n,r){var o=t?encodeURIComponent(t):"",i=oe.urls("mango","query-server",encodeURIComponent(e),o),a=eE(n,r);return O(i,a,{raw:!0})},nE=function(e,t,n,r){return function(e){return null===Zv?new oe.Promise((function(t){tE(e,"",{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then((function(e){Zv=200==e.status,t(Zv)}))})):Promise.resolve(Zv)}(e).then((function(o){return o&&(n.execution_stats=!0),tE(e,t,n,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:So.MANGO_QUERY,executionStats:e.execution_stats,warning:e.warning}}))}))},rE={loadQueryHistory:function(e){return{type:Qv.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:Qv.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:Qv.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:Qv.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:Qv.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:Qv.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:Qv.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,r=e.indexCode,o=e.fetchParams;return oe.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),function(e,t){var n=oe.urls("mango","index-server",ae.utils.safeURLName(e));return O(n,t,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r).then((function(){var t="#"+oe.urls("mango","query-app",ae.utils.safeURLName(n),"");e(Md((function(e){return $v(n,e)}),o,{})),oe.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})})).catch((function(e){oe.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})}))}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,r=e.partitionKey,o=e.queryCode;return function(e){return function(e,t,n){var r=t?encodeURIComponent(t):"",o=oe.urls("mango","explain-server",encodeURIComponent(e),r);return O(o,n,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r,o).then((function(n){e(t.showQueryExplain({explainPlan:n}))})).catch((function(){oe.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})}))}}},oE=function(e){var t=e.additionalIndexes;if(!t)return[];var n=oe.getExtensions("mango:additionalIndexes")[0];return n?t.filter((function(e){return-1!==e.get("type").indexOf(n.type)})):void 0},iE=Object(At.b)((function(e,t){var n,r,o=e.mangoQuery,i=e.indexResults;return{databaseName:t.databaseName,queryFindCode:Yd(o.queryFindCode),queryFindCodeChanged:o.queryFindCodeChanged,availableIndexes:(n=o,r=n.availableIndexes,r?r.filter((function(e){var t=e.type;return-1!==["json","special"].indexOf(t)})):[]),additionalIndexes:oE(o),isLoading:o.isLoading,history:o.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:i.fetchParams,executionStats:i.executionStats,warning:i.warning,partitionKey:t.partitionKey}}),(function(e){return{loadQueryHistory:function(t){e(rE.loadQueryHistory(t))},runExplainQuery:function(t){e(rE.runExplainQuery(t))},runQuery:function(t){e(rE.hideQueryExplain()),e(rE.newQueryFindCode(t)),e(Md((function(e){return nE(t.databaseName,t.partitionKey,t.queryCode,e)}),t.fetchParams,{}))},clearResults:function(){e(xd())},manageIndexes:function(){e(rE.hideQueryExplain())}}}))(Xv);function aE(e){return(aE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pE(e,t){return!t||"object"!==aE(t)&&"function"!=typeof t?fE(e):t}function fE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dE(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function mE(e){return(mE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yE(e,t){return(yE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hE=Ra.PaddedBorderedBox,bE=Ra.CodeEditorPanel,gE=Ra.ConfirmButton,vE=Ra.LoadLines,EE=ae.helpers.getDocUrl,_E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yE(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=mE(t);if(dE()){var r=mE(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return pE(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={partitionedSelected:!0},t.onTemplateSelected=t.onTemplateSelected.bind(fE(t)),t.onTogglePartitioned=t.onTogglePartitioned.bind(fE(t)),t.saveIndex=t.saveIndex.bind(fE(t)),t}return n=a,(r=[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:sE({},this.props.fetchParams,{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.codeEditor)return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedCheckobx",value:function(){return this.props.isDbPartitioned?se.a.createElement("label",null,se.a.createElement("input",{id:"js-partitioned-index",type:"checkbox",checked:this.state.partitionedSelected,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"}}),"Partitioned"):null}},{key:"editor",value:function(){var e=this,t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+oe.urls("mango","query-app",encodeURIComponent(this.props.databaseName),t);return se.a.createElement("div",{className:"mango-editor-wrapper"},se.a.createElement("form",{className:"form-horizontal",onSubmit:this.saveIndex},se.a.createElement("div",{className:"padded-box"},se.a.createElement(ba.a,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:this.onTemplateSelected})),se.a.createElement(hE,null,se.a.createElement(bE,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:EE("MANGO_INDEX"),defaultCode:this.props.queryIndexCode}),this.partitionedCheckobx()),se.a.createElement("div",{className:"padded-box"},se.a.createElement("div",{className:"control-group"},se.a.createElement(gE,{text:"Create index",id:"create-index-btn",showIcon:!1}),se.a.createElement("a",{className:"edit-link",href:n},"edit query")))))}},{key:"render",value:function(){return this.props.isLoading?se.a.createElement(vE,null):this.editor()}},{key:"saveIndex",value:function(e){e.preventDefault();var t=function(){oe.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0})};if(this.editorHasErrors())t();else{var n=this.getEditorValue();if(this.props.isDbPartitioned)try{var r=JSON.parse(n);!0!==r.partitioned&&!1!==r.partitioned&&(r.partitioned=this.state.partitionedSelected),n=JSON.stringify(r)}catch(e){t()}this.props.saveIndex({databaseName:this.props.databaseName,indexCode:n,fetchParams:this.props.fetchParams})}}}])&&uE(n.prototype,r),o&&uE(n,o),a}(ce.Component);_E.propTypes={isLoading:xt.a.bool.isRequired,databaseName:xt.a.string.isRequired,isDbPartitioned:xt.a.bool.isRequired,saveIndex:xt.a.func.isRequired,queryIndexCode:xt.a.string.isRequired,partitionKey:xt.a.string,loadIndexTemplates:xt.a.func.isRequired,clearResults:xt.a.func.isRequired,loadIndexList:xt.a.func.isRequired},_E.defaultProps={isLoading:!0,isDbPartitioned:!1};var wE=Object(At.b)((function(e,t){var n=e.mangoQuery,r=e.indexResults,o=e.databases;return{description:t.description,databaseName:t.databaseName,queryIndexCode:Yd(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:r.fetchParams,partitionKey:t.partitionKey,isLoading:o.isLoadingDbInfo,isDbPartitioned:o.isDbPartitioned}}),(function(e,t){return{saveIndex:function(t){e(rE.saveIndex(t))},loadIndexList:function(n){e(Md((function(e){return $v(t.databaseName,e)}),n.fetchParams,{}))},clearResults:function(){e(xd())},loadIndexTemplates:function(){e(rE.loadIndexTemplates())}}}))(_E);function OE(e){return(OE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NE(e,t){return!t||"object"!==OE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RE(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function CE(e){return(CE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TE(e,t){return(TE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TE(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=CE(t);if(RE()){var r=CE(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return NE(this,e)});function a(){return SE(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return se.a.createElement("div",null,se.a.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}])&&DE(n.prototype,r),o&&DE(n,o),a}(ce.Component);PE.propTypes={explainPlan:xt.a.object.isRequired};var IE={MangoIndexEditorContainer:wE,MangoQueryEditorContainer:iE,ExplainPage:PE};function xE(e){return(xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kE(e,t){return!t||"object"!==xE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jE(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function LE(e){return(LE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ME(e,t){return(ME=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var UE=function(e){var t=e.docURL,n=e.endpoint,r=e.databaseName,o=e.showPartitionKeySelector,i=e.partitionKey,a=e.onPartitionKeySelected,c=e.onGlobalModeSelected,s=e.globalMode,l=se.a.createElement(hh,{docURL:t,endpoint:n,includeQueryOptionsParams:!1}),u=null;return o&&(u=se.a.createElement(Ch,{databaseName:r,partitionKey:i,onPartitionKeySelected:a,onGlobalModeSelected:c,globalMode:s})),se.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},se.a.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},u),se.a.createElement("div",{id:"right-header",className:"flex-body"}),l,se.a.createElement("div",{id:"notification-center-btn"},se.a.createElement(zt,null)))},qE=function(e){var t=e.databaseName,n=e.fetchUrl,r=e.queryDocs;return se.a.createElement("div",{id:"footer"},se.a.createElement(mh,{databaseName:t,fetchUrl:n,queryDocs:r}))},VE=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint,o=e.databaseName,i=e.partitionKey,a=e.showPartitionKeySelector,c=e.onPartitionKeySelected,s=e.onGlobalModeSelected,l=e.globalMode;return se.a.createElement("div",{className:"header-wrapper flex-layout flex-row"},se.a.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},se.a.createElement(Xt,{crumbs:t})),se.a.createElement(UE,{docURL:n,endpoint:r,databaseName:o,showPartitionKeySelector:a,partitionKey:i,onPartitionKeySelected:c,onGlobalModeSelected:s,globalMode:l}))};VE.defaultProps={crumbs:[]};var FE=function(e){var t=e.edit,n=e.designDocs,r=e.explainPlan,o=e.databaseName,i=e.fetchUrl,a=e.queryDocs,c=e.docType,s=e.partitionKey,l=t?se.a.createElement(IE.MangoIndexEditorContainer,{description:ae.i18n.en_US["mango-descripton-index-editor"],databaseName:o,partitionKey:s}):se.a.createElement(IE.MangoQueryEditorContainer,{description:ae.i18n.en_US["mango-descripton"],editorTitle:ae.i18n.en_US["mango-title-editor"],additionalIndexesText:ae.i18n.en_US["mango-additional-indexes-heading"],databaseName:o,partitionKey:s}),u=se.a.createElement(Yy,{fetchUrl:i,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:a,docType:c,partitionKey:s}),p=se.a.createElement(qE,{databaseName:o,fetchUrl:i,queryDocs:a});return r&&(u=se.a.createElement(IE.ExplainPage,{explainPlan:r}),p=null),se.a.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},se.a.createElement("div",{id:"left-content",className:"flex-body"},l),se.a.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},se.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},u),p))},BE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ME(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=LE(t);if(jE()){var r=LE(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return kE(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,r=e.docURL,o=e.crumbs,i=e.designDocs,a=e.fetchUrl,c=e.databaseName,s=e.queryFindCode,l=e.partitionKey,u=e.onPartitionKeySelected,p=e.onGlobalModeSelected,f=e.globalMode,d=this.props.endpoint;if(this.props.explainPlan){var m=l?encodeURIComponent(l):"";d=oe.urls("mango","explain-apiurl",encodeURIComponent(t),m)}var y=function(e){return nE(c,l,s,e)},h=So.MANGO_QUERY;return n&&(y=function(e){return $v(c,e)},h=So.MANGO_INDEX),se.a.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},se.a.createElement(VE,{docURL:r,endpoint:d,crumbs:o,databaseName:c,partitionKey:l,showPartitionKeySelector:!n,onPartitionKeySelected:u,onGlobalModeSelected:p,globalMode:f}),se.a.createElement(FE,{edit:n,designDocs:i,explainPlan:this.props.explainPlan,databaseName:c,fetchUrl:a,queryDocs:y,docType:h,partitionKey:l}))}}])&&AE(n.prototype,r),o&&AE(n,o),a}(ce.Component),KE=Object(At.b)((function(e,t){var n=e.mangoQuery;return{explainPlan:n.explainPlan,queryFindCode:n.queryFindCode,partitionKey:t.partitionKey,databaseName:t.databaseName,onPartitionKeySelected:t.onPartitionKeySelected,onGlobalModeSelected:t.onGlobalModeSelected,globalMode:t.globalMode}}))(BE),HE={MangoIndexEditorAndQueryEditor:oe.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_partition/:partitionkey/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_index":{route:"createIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndexNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new gt.Model({id:n})},findUsingIndexNoPartition:function(e){return this.findUsingIndex(e,"")},findUsingIndex:function(e,t){var n=t?encodeURIComponent(t):"",r=oe.urls("allDocs","app",encodeURIComponent(this.databaseName),n),o=t?"/".concat(n):"",i="/"+encodeURIComponent(this.databaseName)+o+"/_find",a=[{name:e,link:r},{name:ae.i18n.en_US["mango-title-editor"]}],c=oe.urls("mango","query-apiurl",encodeURIComponent(this.databaseName),n);return se.a.createElement(KE,{database:e,crumbs:a,docURL:oe.constants.DOC_URLS.MANGO_SEARCH,endpoint:c,edit:!1,databaseName:this.databaseName,fetchUrl:i,partitionKey:t,onPartitionKeySelected:function(t){var n=oe.urls("mango","query-app",encodeURIComponent(e),encodeURIComponent(t));oe.navigate("#/"+n)},onGlobalModeSelected:function(){var t=oe.urls("mango","query-app",encodeURIComponent(e));oe.navigate("#/"+t)},globalMode:""===t})},createIndexNoPartition:function(e){return this.createIndex(e,"")},createIndex:function(e,t){var n=new yt.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),r=t?encodeURIComponent(t):"",o=oe.urls("allDocs","app",encodeURIComponent(this.databaseName),r),i=oe.urls("mango","index-apiurl",encodeURIComponent(this.databaseName),r),a=[{name:e,link:o},{name:ae.i18n.en_US["mango-indexeditor-title"]}];return Pt.fetchSelectedDatabaseInfo(e),se.a.createElement(KE,{showIncludeAllDocs:!1,crumbs:a,docURL:oe.constants.DOC_URLS.MANGO_INDEX,endpoint:i,edit:!0,designDocs:n,databaseName:this.databaseName,partitionKey:t})}})};yt.RouteObjects=[Rv.DocEditorRouteObject,jh,Cv,HE.MangoIndexEditorAndQueryEditor];var zE=yt;function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GE(Object(n),!0).forEach((function(t){XE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QE={isLoading:!0,viewIndex:void 0};var JE={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]};function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YE(Object(n),!0).forEach((function(t){ZE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var e_={selector:{_id:{$gt:null}}},t_=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:Yd(t),className:"mango-select-entry"}},n_=function(){return[t_(e_)]},r_=function(){return JE.INDEX_TEMPLATES.map((function(e){var t=t_(e.code);return t.label=e.label||t.label,t}))},o_=function(){var e=oe.getExtensions("mango:indexTemplates")[0];return e?e.filter((function(e){return!!e.code})).map((function(e){var t=t_(e.code);return t.label=e.label||t.label,t})):r_()},i_={queryFindCode:e_,queryIndexCode:{index:{fields:["_id"]},type:"json"},queryFindCodeChanged:!1,explainPlan:void 0,history:n_(),historyKey:"default",queryIndexTemplates:r_()},a_=function(e){var t=e+"_queryhistory",n=ae.utils.localStorageGet(t);return n||((n=oe.getExtensions("mango:queryHistory")[0])?n.filter((function(e){return!!e.code})).map((function(e){var t=t_(e.code);return t.label=e.label||t.label,t})):n_())},c_=function(e,t,n){var r=e.historyKey,o=e.history.slice(),i=t_(t);i.label=n||i.label;var a=o.findIndex((function(e){return e.value===i.value}));return a>-1&&o.splice(a,1),o.unshift(i),o.length>5&&o.splice(5,1),ae.utils.localStorageSet(r,o),o},s_=function(e,t,n){var r=e.queryIndexTemplates.slice(),o=t_(t);o.label=n||o.label,r.find((function(e){return e.value===o.value}))||r.push(o)};function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l_(Object(n),!0).forEach((function(t){p_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f_={selectorVisible:!1};function d_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d_(Object(n),!0).forEach((function(t){y_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h_={doc:null,isLoading:!0,cloneDocModalVisible:!1,deleteDocModalVisible:!1,uploadModalVisible:!1,numFilesUploaded:0,uploadErrorMessage:"",uploadInProgress:!1,uploadPercentage:0,docConflictCount:0};function b_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b_(Object(n),!0).forEach((function(t){v_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E_={isLoaded:!1,filters:[],changes:[],filteredChanges:[],maxChangesListed:100,showingSubset:!1,lastSequenceNum:null};function __(e,t,n){var r=g_({},e,{lastSequenceNum:t,isLoaded:!0}),o=0===r.changes.length;r.changes.forEach((function(e){e.isNew=!1}));var i=n.map((function(e){var t=fr.getSeqNum(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!o}}));return r.changes=i.concat(r.changes),S_(r),r}function w_(e,t){var n=e.filters.slice();n.push(t);var r=g_({},e,{filters:n});return S_(r),r}function O_(e,t){var n=e.filters.slice(),r=n.indexOf(t);r>=0&&n.splice(r,1);var o=g_({},e,{filters:n});return S_(o),o}function S_(e){e.showingSubset=!1;var t=0;e.filteredChanges=e.changes.filter((function(n){if(t>=e.maxChangesListed)return e.showingSubset=!0,!1;var r=JSON.stringify(n),o=e.filters.every((function(e){return new RegExp(e,"i").test(r)}));return o&&t++,o}))}n(614);function D_(e){return e||(e=""),e}function N_(e){return e?"/_partition/".concat(e):""}oe.addReducers({indexResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lm,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Od:var n=cm({},e.resultsStyle,{},t.resultsStyle);return um(n),cm({},e,{resultsStyle:n});case vd:return cm({},lm,{noResultsWarning:e.noResultsWarning,selectedLayout:e.selectedLayout,selectedDocs:[],fetchParams:{limit:Cd()+1,skip:0},pagination:im({},lm.pagination,{perPage:e.pagination.perPage}),queryOptionsPanel:im({},lm.queryOptionsPanel,e.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1,resultsStyle:e.resultsStyle});case pd:return cm({},e,{isLoading:!0});case _d:return im({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case wd:return im({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});case bd:return cm({},e,{selectedDocs:t.selectedDocs});case ud:var r=e.selectedLayout;return t.docType===So.MANGO_QUERY&&e.selectedLayout===Oo.METADATA&&(r=Oo.TABLE),cm({},e,{docs:t.docs,isLoading:!1,noResultsWarning:"",isEditable:!0,fetchParams:im({},e.fetchParams,t.params),pagination:im({},e.pagination,{canShowNext:t.canShowNext}),docType:t.docType,selectedLayout:r,executionStats:t.executionStats,warning:t.warning});case fd:return cm({},e,{selectedLayout:t.layout});case dd:return cm({},e,{tableView:im({},e.tableView,{showAllFieldsTableView:!e.tableView.showAllFieldsTableView,cachedFieldsTableView:e.tableView.selectedFieldsTableView})});case gd:return cm({},e,{tableView:im({},e.tableView,{selectedFieldsTableView:t.selectedFieldsTableView})});case md:return ae.utils.localStorageSet("fauxton:perpageredux",t.perPage),cm({},e,{pagination:im({},lm.pagination,{perPage:t.perPage})});case yd:return cm({},e,{pagination:im({},e.pagination,{pageStart:e.pagination.pageStart+e.pagination.perPage,currentPage:e.pagination.currentPage+1})});case hd:return cm({},e,{pagination:im({},e.pagination,{pageStart:e.pagination.pageStart-e.pagination.perPage,currentPage:e.pagination.currentPage-1})});case Ed:return t.options.includeDocs&&t.options.reduce||t.options.includeDocs&&e.queryOptionsPanel.reduce?t.options.reduce=!1:t.options.reduce&&e.queryOptionsPanel.includeDocs&&(t.options.includeDocs=!1),cm({},e,{queryOptionsPanel:im({},e.queryOptionsPanel,t.options)});default:return e}},mangoQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i_,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Qv.MANGO_SET_DB:return $E({},e,{database:n.database,historyKey:n.database?n.database.id:"default"});case Qv.MANGO_LOAD_QUERY_HISTORY:var r=a_(n.databaseName);return $E({},e,{history:r,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(r[0].value)});case Qv.MANGO_NEW_QUERY_FIND_CODE:return $E({},e,{queryFindCode:n.queryCode,history:c_(e,n.queryCode)});case Qv.MANGO_RESET:return $E({},e,{getLoadingIndexes:n.isLoading});case Qv.MANGO_LOAD_INDEX_TEMPLATES:var o=o_();return $E({},e,{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case Qv.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return $E({},e,{queryIndexCode:n.code,queryIndexTemplates:s_(e,n.code,n.label)});case Qv.MANGO_SHOW_EXPLAIN_RESULTS:return $E({},e,{explainPlan:n.explainPlan});case Qv.MANGO_HIDE_EXPLAIN_RESULTS:return $E({},e,{explainPlan:!1});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qu,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Vc:return Bu(e,n);case Fc:return Vu(e,n);case Bc:return Fu(e,t.designDoc,t.indexGroup);case Kc:return Mu({},e,{loading:!0});case Hc:return Mu({},e,{deleteIndexModalIndexName:n.indexName,deleteIndexModalDesignDocName:n.designDocName,deleteIndexModalVisible:!0,deleteIndexModalText:se.a.createElement("div",null,"Are you sure you want to delete the ",se.a.createElement("code",null,n.indexName)," ",n.indexLabel,"?"),deleteIndexModalOnSubmit:n.onDelete});case zc:return Mu({},e,{deleteIndexModalVisible:!1});case Gc:return Mu({},e,{cloneIndexModalIndexLabel:n.indexLabel,cloneIndexModalTitle:n.cloneIndexModalTitle,cloneIndexModalSourceIndexName:n.sourceIndexName,cloneIndexModalSourceDesignDocName:n.sourceDesignDocName,cloneIndexModalSelectedDesignDoc:"_design/"+n.sourceDesignDocName,cloneIndexDesignDocProp:"",cloneIndexModalVisible:!0,cloneIndexModalOnSubmit:n.onSubmit});case Wc:return Mu({},e,{cloneIndexModalVisible:!1});case Xc:return Mu({},e,{cloneIndexModalSelectedDesignDoc:n.value});case Qc:return Mu({},e,{cloneIndexModalNewDesignDocName:n.value});case Jc:return Mu({},e,{cloneIndexModalNewDesignDocPartitioned:n.value});case Yc:return Mu({},e,{cloneIndexModalNewIndexName:n.value});case $c:return Mu({},e,{designDocs:n.designDocs,designDocList:Ku(n.designDocs),loading:!1});default:return e}},revisionBrowser:iv,partitionKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dh:return u_({},e,{selectorVisible:!0});case Nh:return u_({},e,{selectorVisible:!1});default:return e}},docEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h_,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case Lh:return m_({},h_);case Mh:var o=n.doc.get("_conflicts")?n.doc.get("_conflicts").length:0;return n.doc.unset("_conflicts"),m_({},e,{isLoading:!1,doc:n.doc,docConflictCount:o});case Uh:return m_({},e,{cloneDocModalVisible:!0});case qh:return m_({},e,{cloneDocModalVisible:!1});case Vh:return m_({},e,{deleteDocModalVisible:!0});case Fh:return m_({},e,{deleteDocModalVisible:!1});case Bh:return m_({},e,{uploadModalVisible:!0});case Kh:return m_({},e,{uploadModalVisible:!1});case zh:return m_({},e,{numFilesUploaded:e.numFilesUploaded+1});case Gh:return m_({},e,{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:n.error});case Hh:return m_({},e,{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:""});case Wh:return m_({},e,{uploadInProgress:!0,uploadPercentage:0,fileUploadErrorMsg:""});case Xh:return m_({},e,{uploadPercentage:n.percent});default:return e}},changes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jp:return e.lastSequenceNum!==t.seqNum?__(e,t.seqNum,t.changes):e;case Lp:return w_(e,t.filter);case Mp:return O_(e,t.filter);default:return e}},designDocInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QE,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case vf.DESIGN_FETCHING:return WE({},e,{isLoading:!0});case vf.DESIGN_DOC_MONITOR:return WE({},e,{isLoading:!1,viewIndex:n.designDocInfo.get("view_index")});case vf.DESIGN_DOC_REFRESH:return WE({},e,{viewIndex:n.designDocInfo.get("view_index")});default:return e}},indexEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vl,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Gs:return dl({},vl);case Ws:case Xs:return El(e,n);case tl:return dl({},e,{viewName:t.name});case Qs:var r=t.reduceSelectedOption;return"NONE"===r&&(r=""),"CUSTOM"===r&&(r=hl),dl({},e,{view:dl({},e.view,{reduce:r})});case $s:return dl({},e,{designDocId:n.value});case Js:case Ys:return e;case nl:return dl({},e,{designDocId:t.designDoc._id});case rl:return dl({},e,{view:dl({},e.view,{map:t.code})});case ol:return dl({},e,{view:dl({},e.view,{reduce:t.code})});case Zs:return dl({},e,{newDesignDocName:n.value});case el:return dl({},e,{newDesignDocPartitioned:n.value});default:return e}}}),oe.registerUrls("allDocs",{server:function(e,t){return R.getServerUrl("/"+e+"/_all_docs"+D_(t))},app:function(e,t,n){return"database/"+e+N_(t)+"/_all_docs"+D_(n)},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_all_docs"+D_(t))}}),oe.registerUrls("partitioned_allDocs",{app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_all_docs"+D_(n)},apiurl:function(e,t,n){return R.getApiUrl("/"+e+"/_partition/"+t+"/_all_docs"+D_(n))},server:function(e,t,n){return R.getServerUrl("/"+e+"/_partition/"+t+"/_all_docs"+D_(n))}}),oe.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),R.getServerUrl("/"+e+"/_all_docs"+D_(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+D_(t)},apiurl:function(e,t){return e=encodeURIComponent(e),R.getApiUrl("/"+e+"/_all_docs"+D_(t))}}),oe.registerUrls("bulk_docs",{server:function(e,t){return R.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+D_(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+D_(t)},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_bulk_docs"+D_(t))}}),oe.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+t+"/conflicts"}}),oe.registerUrls("designDocs",{server:function(e,t){return R.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t,n){return"database/"+e+N_(t)+"/_design/"+ae.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return R.getApiUrl("/"+e+"/"+t+"/_info")}}),oe.registerUrls("view",{server:function(e,t,n,r){return R.getServerUrl("/"+e+N_(t)+"/_design/"+n+"/_view/"+r)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n,r){return R.getApiUrl("/"+e+N_(t)+"/_design/"+n+"/_view/"+r)},edit:function(e,t,n,r){return"database/"+e+N_(t)+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return"/database/"+e+N_(t)+"/"+n+"/_view/"+r},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),oe.registerUrls("partitioned_view",{server:function(e,t,n,r){return R.getServerUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)},app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"},apiurl:function(e,t,n,r){return R.getApiUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)}}),oe.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),R.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,r){return _.isUndefined(r)&&(r=""),R.getServerUrl("/"+e+"/"+t+"/"+n+r)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?R.getApiUrl("/"+e+"/"+t):R.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),oe.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/_new"},newView:function(e,t){return"/database/"+e+N_(t)+"/new_view"},addView:function(e,t,n){return"/database/"+e+N_(t)+"/new_view/"+n}}),oe.registerUrls("base",{server:function(e){return R.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),oe.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),R.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t,n){return n||(n=""),R.getApiUrl("/"+e+N_(t)+"/_index"+n)},"index-app":function(e,t,n){return n||(n=""),"database/"+e+N_(t)+"/_index"+n},"index-server-bulk-delete":function(e){return R.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t,n){return n||(n=""),R.getServerUrl("/"+e+N_(t)+"/_find"+n)},"query-apiurl":function(e,t,n){return n||(n=""),R.getApiUrl("/"+e+N_(t)+"/_find"+n)},"query-app":function(e,t,n){return n||(n=""),"database/"+e+N_(t)+"/_find"+n},"explain-server":function(e,t){return R.getServerUrl("/"+e+N_(t)+"/_explain")},"explain-apiurl":function(e,t){return R.getApiUrl("/"+e+N_(t)+"/_explain")}});var R_=zE,C_=function(){return E(R.getServerUrl("/_membership")).then((function(e){if(!e.all_nodes){var t=e.reason?e.reason:"";throw new Error("Failed to load list of nodes."+t)}var n=e.all_nodes.reduce((function(t,n){var r=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:r}),t}),[]);return e.nodes_mapped=n,e}))},T_="CLUSTER_FETCH_NODES",P_={fetchNodes:function(){var e=this;C_().then((function(t){e.updateNodes({nodes:t.nodes_mapped})})).catch((function(e){oe.addNotification({type:"error",msg:e.message,clear:!0})}))},updateNodes:function(e){oe.reduxDispatch({type:T_,options:e})},navigateToNodeBasedOnNodeCount:function(e){C_().then((function(t){var n=t.all_nodes;return 1===n.length?oe.navigate(e+n[0]):oe.navigate("/cluster/disabled",{trigger:!0})})).catch((function(e){oe.addNotification({type:"error",msg:e.message,clear:!0})}))}};function I_(e){return(I_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k_(e,t){return!t||"object"!==I_(t)&&"function"!=typeof t?j_(e):t}function j_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L_(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function M_(e){return(M_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U_(e,t){return(U_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U_(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=M_(t);if(L_()){var r=M_(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k_(this,e)});function a(){var e;x_(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return q_(j_(e=i.call.apply(i,[this].concat(n))),"getNodeType",(function(){var t=e.props.clusterState;return"cluster_finished"===t?"clustered":"single_node_enabled"===t?"single":"unknown state"})),e}return n=a,(r=[{key:"render",value:function(){var e=this.getNodeType();return se.a.createElement("div",{className:"setup-screen"},ae.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",se.a.createElement("br",null),se.a.createElement("br",null),"Do you want to ",se.a.createElement("a",{href:"#replication"},"replicate data"),"?")}}])&&A_(n.prototype,r),o&&A_(n,o),a}(se.a.Component);V_.propTypes={clusterState:xt.a.string};function F_(){return(F_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(n),!0).forEach((function(t){H_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z_={clusterState:"",username:"",password:"",setupNode:{bindAddress:"0.0.0.0",port:5984,nodeCount:3},nodeList:[],additionalNode:{bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}};var G_=function(e){return K_({},e,{setupNode:K_({},e.setupNode),additionalNode:K_({},e.additionalNode)})},W_=function(e,t,n){var r=G_(e);return c.a.isNaN(n)?r:c.a.set(r,t,n)},X_=function(e,t,n){var r=G_(e);return c.a.set(r,t,n)},Q_=function(e){return e.additionalNode=F_({},z_.additionalNode),e},J_=function(e){return e.clusterState},Y_=function(e){return e.nodeList},$_=function(){return oe.session.isAdminParty()},Z_=function(e){return e.username},ew=function(e){return e.password},tw=function(e){return e.setupNode},nw=function(e){return e.setupNode.bindAddress},rw=Object(At.b)((function(e){var t=e.setup;return{clusterState:J_(t)}}))(V_);function ow(e){return(ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cw(e,t){return!t||"object"!==ow(t)&&"function"!=typeof t?sw(e):t}function sw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function uw(e){return(uw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pw(e,t){return(pw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dw,mw=Ra.ConfirmButton,yw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pw(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=uw(t);if(lw()){var r=uw(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return cw(this,e)});function a(){var e;iw(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fw(sw(e=i.call.apply(i,[this].concat(n))),"redirectToSingleNodeSetup",(function(e){e.preventDefault(),oe.navigate("#setup/singlenode")})),fw(sw(e),"redirectToMultiNodeSetup",(function(e){e.preventDefault(),oe.navigate("#setup/multinode")})),e}return n=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.getClusterState()}},{key:"render",value:function(){return"cluster_finished"===this.props.clusterState||"single_node_enabled"===this.props.clusterState?se.a.createElement(V_,this.props):se.a.createElement("div",{className:"setup-screen"},se.a.createElement("h2",null,"Welcome to ",ae.i18n.en_US["couchdb-productname"],"!"),se.a.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),se.a.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),se.a.createElement("div",null,se.a.createElement(mw,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),se.a.createElement(mw,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,id:"setup-btn-no-thanks",text:"Configure a Single Node"})))}}])&&aw(n.prototype,r),o&&aw(n,o),a}(se.a.Component);function hw(e){return c.a.isEmpty(e.username)?"Admin name is required":c.a.isEmpty(e.password)?"Admin password is required":e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&c.a.isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&c.a.isNaN(+e.nodeCount)?"Node count must be a number":!!(0===e.nodeCount||e.nodeCount&&e.nodeCount<1)&&"Node count must be >= 1"}yw.propTypes={clusterState:xt.a.string};var bw={createAdmin:function(e){var t=e.name,n=e.password,r=e.node,o=R.getServerUrl("/_node/".concat(r,"/_config/admins/").concat(t));return S(o,n)},login:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),D(e,"POST",n)}(R.getServerUrl("/_session"),ae.utils.queryParams(e))},logout:function(){return dw=null,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),D(e,"DELETE",n)}(R.getServerUrl("/_session"),ae.utils.queryParams({username:"_",password:"_"}))},getSession:function(){if(dw)return dw;var e=R.getServerUrl("/_session"),t=E(e).then((function(e){return e.userCtx.name&&(dw=t),e.userCtx}));return t}};function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gw(Object(n),!0).forEach((function(t){Ew(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ew(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _w(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ww(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_w(i,r,o,a,c,"next",e)}function c(e){_w(i,r,o,a,c,"throw",e)}a(void 0)}))}}var Ow=function(e,t){var n=t?" Error:"+t:"";oe.addNotification({msg:e+n,type:"error",fade:!1,clear:!0})},Sw=function(e){return{type:"SETUP_SET_USERNAME",options:{value:e}}},Dw=function(e){return{type:"SETUP_SET_PASSWORD",options:{value:e}}},Nw=function(e){return{type:"SETUP_PORT_FOR_SINGLE_NODE",options:{value:e}}},Rw=function(e){return{type:"SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",options:{value:e}}},Cw=Object(At.b)((function(e){var t=e.setup;return{clusterState:J_(t)}}),(function(e){return{getClusterState:function(){e(function(){var e=ww(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe.urls("cluster_setup","server"),e.next=3,E(n);case 3:r=e.sent,t({type:"SETUP_SET_CLUSTERSTATUS",options:{state:r.state}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(yw);function Tw(e){return(Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xw(e,t){return!t||"object"!==Tw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Aw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function kw(e){return(kw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jw(e,t){return(jw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jw(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=kw(t);if(Aw()){var r=kw(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return xw(this,e)});function a(){return Pw(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.isAdminParty&&(e="Create Admin credentials."),se.a.createElement("div",{className:"setup-creds"},se.a.createElement("div",null,se.a.createElement("p",null,e)),se.a.createElement("input",{className:"setup-username",onChange:this.props.onAlterUsername,placeholder:"Username",value:this.props.username,type:"text"}),se.a.createElement("input",{className:"setup-password",onChange:this.props.onAlterPassword,placeholder:"Password",value:this.props.password,type:"password"}))}}])&&Iw(n.prototype,r),o&&Iw(n,o),a}(se.a.Component);function Mw(e){return(Mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vw(e,t){return!t||"object"!==Mw(t)&&"function"!=typeof t?Fw(e):t}function Fw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Kw(e){return(Kw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hw(e,t){return(Hw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Lw.propTypes={onAlterUsername:xt.a.func.isRequired,onAlterPassword:xt.a.func.isRequired,username:xt.a.string.isRequired,password:xt.a.string.isRequired,isAdminParty:xt.a.bool};var Gw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hw(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Kw(t);if(Bw()){var r=Kw(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Vw(this,e)});function a(){var e;Uw(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zw(Fw(e=i.call.apply(i,[this].concat(n))),"handleIpChange",(function(t){e.props.onAlterBindAddress(t)})),zw(Fw(e),"handlePortChange",(function(t){e.props.onAlterPort(t)})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"setup-opt-settings"},se.a.createElement("p",null,"Bind address the node will listen on"),se.a.createElement("input",{className:"setup-input-ip",value:this.props.ip,onChange:this.handleIpChange,placeholder:"IP Address",type:"text"}),se.a.createElement("div",{className:"setup-port"},se.a.createElement("p",null,"Port that the node will use"),se.a.createElement("input",{className:"setup-input-port",value:this.props.port,onChange:this.handlePortChange,type:"text"})))}}])&&qw(n.prototype,r),o&&qw(n,o),a}(se.a.Component);function Ww(e){return(Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xw(){return(Xw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jw(e,t){return!t||"object"!==Ww(t)&&"function"!=typeof t?Yw(e):t}function Yw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Zw(e){return(Zw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eO(e,t){return(eO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gw.propTypes={ip:xt.a.string.isRequired,port:xt.a.number.isRequired,onAlterBindAddress:xt.a.func.isRequired,onAlterPort:xt.a.func.isRequired};var nO=Ra.ConfirmButton,rO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eO(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Zw(t);if($w()){var r=Zw(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Jw(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),tO(Yw(e=i.call(this)),"onChangeUsername",(function(t){return e.props.alterUsername(t.target.value)})),tO(Yw(e),"onChangePassword",(function(t){return e.props.alterPassword(t.target.value)})),tO(Yw(e),"onChangeBindAddress",(function(t){return e.props.alterBindAddress(t.target.value)})),tO(Yw(e),"onChangePort",(function(t){return e.props.alterPort(t.target.value)})),tO(Yw(e),"finishSingleNode",(function(t){t.preventDefault();var n=e.props,r={username:n.username,password:n.password},o={port:n.port,bindAddress:n.bindAddress};e.props.setupSingleNode(r,o)})),e.finishSingleNode=e.finishSingleNode.bind(Yw(e)),e.onChangeUsername=e.onChangeUsername.bind(Yw(e)),e.onChangePassword=e.onChangePassword.bind(Yw(e)),e.onChangeBindAddress=e.onChangeBindAddress.bind(Yw(e)),e.onChangePort=e.onChangePort.bind(Yw(e)),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"setup-nodes"},se.a.createElement("div",{className:"setup-setupnode-section"},se.a.createElement(Lw,Xw({},this.props,{onAlterUsername:this.onChangeUsername,onAlterPassword:this.onChangePassword})),se.a.createElement(Gw,Xw({},this.props,{onAlterPort:this.onChangePort,onAlterBindAddress:this.onChangeBindAddress,ip:this.props.bindAddress,port:this.props.port})),se.a.createElement(nO,Xw({},this.props,{onClick:this.finishSingleNode,text:"Configure Node"}))))}}])&&Qw(n.prototype,r),o&&Qw(n,o),a}(se.a.Component);rO.propTypes={username:xt.a.string.isRequired,password:xt.a.string.isRequired,port:xt.a.number.isRequired,bindAddress:xt.a.string.isRequired,isAdminParty:xt.a.bool.isRequired};var oO=Object(At.b)((function(e){var t,n=e.setup;return{nodeList:Y_(n),isAdminParty:$_(),setupNode:tw(n),username:Z_(n),password:ew(n),port:(t=n,t.setupNode.port),bindAddress:nw(n)}}),(function(e){return{alterUsername:function(t){e(Sw(t))},alterPassword:function(t){e(Dw(t))},alterBindAddress:function(t){e(Rw(t))},alterPort:function(t){e(Nw(t))},setupSingleNode:function(t,n){e(function(e,t){return ww(regeneratorRuntime.mark((function n(){var r,o,i,a,c,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=oe.urls("cluster_setup","server"),o={action:"enable_single_node",username:e.username,password:e.password,bind_address:t.bindAddress,port:t.port,singlenode:!0},!(i=hw(o))){n.next=5;break}return n.abrupt("return",Ow(i));case 5:return n.prev=5,n.next=8,O(r,o,{raw:!0});case 8:if((a=n.sent).ok){n.next=15;break}return n.next=12,a.json();case 12:return c=n.sent,s=c.reason?c.reason:c.error,n.abrupt("return",Ow(s));case 15:return n.next=17,bw.login({name:e.username,password:e.password});case 17:oe.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),oe.navigate("#setup/finish"),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),Ow("The cluster has not been setuped successfully.",n.t0);case 24:case"end":return n.stop()}}),n,null,[[5,21]])})))}(t,n))}}}))(rO);function iO(e){return(iO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sO(e,t){return!t||"object"!==iO(t)&&"function"!=typeof t?lO(e):t}function lO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uO(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pO(e){return(pO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fO(e,t){return(fO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fO(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=pO(t);if(uO()){var r=pO(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return sO(this,e)});function a(){var e;aO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dO(lO(e=i.call.apply(i,[this].concat(n))),"handleNodeCountChange",(function(t){e.props.onAlterNodeCount(t)})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"setup-node-count"},se.a.createElement("p",null,"Number of nodes to be added to the cluster (including this one)"),se.a.createElement("input",{className:"setup-input-nodecount",value:this.props.nodeCount,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n",type:"text"}))}}])&&cO(n.prototype,r),o&&cO(n,o),a}(se.a.Component);function yO(e){return(yO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hO(){return(hO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vO(e,t){return!t||"object"!==yO(t)&&"function"!=typeof t?EO(e):t}function EO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function wO(e){return(wO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OO(e,t){return(OO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}mO.propTypes={onAlterNodeCount:xt.a.func.isRequired,nodeCount:xt.a.number.isRequired};var DO=Ra.ConfirmButton,NO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OO(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=wO(t);if(_O()){var r=wO(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return vO(this,e)});function a(){var e;bO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return SO(EO(e=i.call.apply(i,[this].concat(n))),"getNodeList",(function(){return e.props.nodeList.map((function(e,t){return se.a.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)}))})),SO(EO(e),"_addNode",(function(){var t=e.props,n=t.username,r=t.password,o=t.setupNode,i=t.additionalNode;e.props.addNode(e.isAdminParty,{username:n,password:r},o,i)})),SO(EO(e),"_alterPortAdditionalNode",(function(t){e.props.alterPortAdditionalNode(t.target.value)})),SO(EO(e),"_alterBindAddressAdditionalNode",(function(t){e.props.alterBindAddressAdditionalNode(t.target.value)})),SO(EO(e),"_alterRemoteAddressAdditionalNode",(function(t){e.props.alterRemoteAddressAdditionalNode(t.target.value)})),SO(EO(e),"_alterUsername",(function(t){e.props.alterUsername(t.target.value)})),SO(EO(e),"_alterPassword",(function(t){e.props.alterPassword(t.target.value)})),SO(EO(e),"_alterBindAddressSetupNode",(function(t){e.props.alterBindAddressForSetupNode(t.target.value)})),SO(EO(e),"_alterPortSetupNode",(function(t){e.props.alterPortForSetupNode(t.target.value)})),SO(EO(e),"_alterNodeCount",(function(t){e.props.alterNodeCount(t.target.value)})),SO(EO(e),"_finishClusterSetup",(function(){e.props.finishClusterSetup("CouchDB Cluster set up!")})),e}return n=a,(r=[{key:"componentDidMount",value:function(){this.isAdminParty=$_()}},{key:"render",value:function(){var e=this.props,t=e.setupNode,n=e.additionalNode;return se.a.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",se.a.createElement("div",{className:"setup-setupnode-section"},se.a.createElement(Lw,hO({},this.props,{onAlterUsername:this._alterUsername,onAlterPassword:this._alterPassword})),se.a.createElement(Gw,hO({},this.props,{onAlterPort:this._alterPortSetupNode,onAlterBindAddress:this._alterBindAddressSetupNode,ip:t.bindAddress,port:t.port})),se.a.createElement(mO,hO({},this.props,{onAlterNodeCount:this._alterNodeCount,nodeCount:t.nodeCount}))),se.a.createElement("hr",null),se.a.createElement("div",{className:"setup-add-nodes-section"},se.a.createElement("h2",null,"Add Nodes to the Cluster"),se.a.createElement("p",null,"Remote host"),se.a.createElement("input",{value:n.remoteAddress,onChange:this._alterRemoteAddressAdditionalNode,className:"input-remote-node",type:"text",placeholder:"IP Address"}),se.a.createElement(Gw,hO({},this.props,{onAlterPort:this._alterPortAdditionalNode,onAlterBindAddress:this._alterBindAddressAdditionalNode,ip:n.bindAddress,port:n.port})),se.a.createElement("div",{className:"setup-add-button"},se.a.createElement(DO,{onClick:this._addNode,showIcon:!1,id:"setup-btn-no-thanks",text:"Add Node"}))),se.a.createElement("div",{className:"setup-nodelist"},this.getNodeList()),se.a.createElement("div",{className:"centered setup-finish"},se.a.createElement(DO,{onClick:this._finishClusterSetup,showIcon:!1,text:"Configure Cluster"})))}}])&&gO(n.prototype,r),o&&gO(n,o),a}(se.a.Component);NO.propTypes={username:xt.a.string.isRequired,password:xt.a.string.isRequired,nodeList:xt.a.array.isRequired,isAdminParty:xt.a.bool.isRequired,setupNode:xt.a.shape({bindAddress:xt.a.string.isRequired,port:xt.a.number.isRequired,nodeCount:xt.a.number.isRequired}).isRequired,additionalNode:xt.a.shape({bindAddress:xt.a.string.isRequired,port:xt.a.number.isRequired,remoteAddress:xt.a.string.isRequired}).isRequired};var RO=Object(At.b)((function(e){var t,n=e.setup;return{nodeList:Y_(n),isAdminParty:$_(),setupNode:tw(n),username:Z_(n),password:ew(n),additionalNode:(t=n,t.additionalNode)}}),(function(e){return{addNode:function(t,n,r,o){e(function(e,t,n,r){return function(){var o=ww(regeneratorRuntime.mark((function o(i){var a,c,s,l,u,p;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=oe.urls("cluster_setup","server"),c={action:"enable_cluster",username:t.username,password:t.password,bind_address:n.bindAddress,port:n.port,node_count:n.nodeCount,singlenode:!1},!(s=hw(vw({username:t.username,password:t.password},n)))){o.next=5;break}return o.abrupt("return",Ow(s));case 5:if(l={action:"enable_cluster",username:t.username,password:t.password,bind_address:r.bindAddress,port:r.port,node_count:n.nodeCount,remote_node:r.remoteAddress,remote_current_user:t.username,remote_current_password:t.password},e&&(delete l.remote_current_user,delete l.remote_current_password),!(u=hw(l))){o.next=10;break}return o.abrupt("return",Ow(u));case 10:return p=function(){var e=ww(regeneratorRuntime.mark((function e(){var n,o,c,s,u,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"add_node",username:t.username,password:t.password,host:r.remoteAddress,port:r.port,singlenode:!1},e.next=3,O(a,l,{raw:!0});case 3:if((o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:return c=e.sent,s=c.reason?c.reason:c.error,e.abrupt("return",Ow(s));case 10:return e.next=12,O(a,n,{raw:!0});case 12:if((u=e.sent).ok){e.next=19;break}return e.next=16,u.json();case 16:return p=e.sent,f=p.reason?p.reason:p.error,e.abrupt("return",Ow(f));case 19:i({type:"SETUP_ADD_NODE_TO_LIST",options:{value:{port:r.port,remoteAddress:r.remoteAddress}}}),oe.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.prev=11,o.next=14,O(a,c,{raw:!0});case 14:return o.next=16,bw.login({name:t.username,password:t.password});case 16:return o.next=18,p();case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(11),Ow("An error occured while adding the node.",o.t0);case 23:case"end":return o.stop()}}),o,null,[[11,20]])})));return function(e){return o.apply(this,arguments)}}()}(t,n,r,o))},alterPortAdditionalNode:function(t){e(function(e){return{type:"SETUP_PORT_ADDITIONAL_NODE",options:{value:e}}}(t))},alterBindAddressAdditionalNode:function(t){e(function(e){return{type:"SETUP_BIND_ADDRESS_ADDITIONAL_NODE",options:{value:e}}}(t))},alterRemoteAddressAdditionalNode:function(t){e(function(e){return{type:"SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",options:{value:e}}}(t))},alterUsername:function(t){e(Sw(t))},alterPassword:function(t){e(Dw(t))},alterBindAddressForSetupNode:function(t){e(Rw(t))},alterPortForSetupNode:function(t){e(Nw(t))},finishClusterSetup:function(t){var n;e((n=t,ww(regeneratorRuntime.mark((function e(){var t,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=oe.urls("cluster_setup","server"),r={action:"finish_cluster"},e.prev=2,e.next=5,O(t,r,{raw:!0});case 5:if(!(o=e.sent).ok){e.next=11;break}oe.addNotification({msg:n,type:"success",fade:!1,clear:!0}),oe.navigate("#setup/finish"),e.next=15;break;case 11:return e.next=13,o.json();case 13:i=e.sent,Ow("The cluster is already finished",i.reason);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Ow("There was an error. Please check your setup and try again.",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))))},alterNodeCount:function(t){e(function(e){return{type:"SETUP_NODE_COUNT",options:{value:e}}}(t))}}}))(NO),CO={RouteObjects:[oe.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=oe.urls("cluster_setup","apiurl");return P_.fetchNodes(),se.a.createElement(nn,{component:se.a.createElement(Cw,null),endpoint:e,docURL:oe.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ae.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=oe.urls("cluster_setup","apiurl");return P_.fetchNodes(),se.a.createElement(nn,{component:se.a.createElement(oO,null),endpoint:e,docURL:oe.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ae.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=oe.urls("cluster_setup","apiurl");return P_.fetchNodes(),se.a.createElement(nn,{component:se.a.createElement(RO,null),endpoint:e,docURL:oe.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ae.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=oe.urls("cluster_setup","apiurl");return se.a.createElement(nn,{component:se.a.createElement(rw,null),endpoint:e,docURL:oe.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ae.i18n.en_US["couchdb-productname"]}]})}})]};n(615);CO.initialize=function(){oe.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})},oe.addReducers({setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z_,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case"SETUP_SET_CLUSTERSTATUS":return X_(e,"clusterState",n.state);case"SETUP_SET_USERNAME":return X_(e,"username",n.value);case"SETUP_SET_PASSWORD":return X_(e,"password",n.value);case"SETUP_BIND_ADDRESS_FOR_SINGLE_NODE":return X_(e,"setupNode.bindAddress",n.value);case"SETUP_PORT_FOR_SINGLE_NODE":return W_(e,"setupNode.port",parseInt(n.value));case"SETUP_PORT_ADDITIONAL_NODE":return W_(e,"additionalNode.port",parseInt(n.value));case"SETUP_BIND_ADDRESS_ADDITIONAL_NODE":return X_(e,"additionalNode.bindAddress",n.value);case"SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE":return X_(e,"additionalNode.remoteAddress",n.value);case"SETUP_ADD_NODE_TO_LIST":var o=G_(e);return o.nodeList.push(n.value),Q_(o),o;case"SETUP_RESET_ADDITIONAL_NODE":return Q_(G_(e));case"SETUP_NODE_COUNT":return W_(e,"setupNode.nodeCount",parseInt(n.value));default:return e}}}),oe.registerUrls("cluster_setup",{server:function(){return ae.host+"/_cluster_setup"},app:function(){return"/_cluster_setup"},apiurl:function(){return window.location.origin+"/_cluster_setup"}});var TO=CO;function PO(e){return(PO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AO(e,t){return!t||"object"!==PO(t)&&"function"!=typeof t?kO(e):t}function kO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jO(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function LO(e){return(LO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MO(e,t){return(MO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qO=Ra.TabElement,VO=Ra.TabElementWrapper,FO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MO(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=LO(t);if(jO()){var r=LO(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return AO(this,e)});function a(){var e;IO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return UO(kO(e=i.call.apply(i,[this].concat(n))),"checked",(function(t){return e.props.selectedRadio===t})),UO(kO(e),"onRadioClick",(function(t){var n=t.target.value;e.props.onRadioClick(n)})),UO(kO(e),"createFilterTabs",(function(){return e.props.radioNames.map((function(t,n){var r=e.checked(t);return se.a.createElement(qO,{key:n,selected:r,text:t,onChange:e.onRadioClick})}))})),UO(kO(e),"searchTermChange",(function(t){var n=t.target.value;e.props.onSearch(n)})),e}return n=a,(r=[{key:"render",value:function(){var e=this.createFilterTabs();return se.a.createElement(VO,null,e,se.a.createElement("li",{className:"component-tab-list-element"},se.a.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}])&&xO(n.prototype,r),o&&xO(n,o),a}(se.a.Component);function BO(e){return(BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zO(e,t){return!t||"object"!==BO(t)&&"function"!=typeof t?GO(e):t}function GO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WO(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function XO(e){return(XO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QO(e,t){return(QO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}UO(FO,"defaultProps",{radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]});var YO=function(e){return[ae.helpers.formatDate(e),ae.helpers.getDateFromNow(e)]},$O=function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},ZO=function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},eS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QO(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=XO(t);if(WO()){var r=XO(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return zO(this,e)});function a(){var e;KO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return JO(GO(e=i.call.apply(i,[this].concat(n))),"getInfo",(function(e){return{type:e.type,objectField:$O(e),started_on:YO(e.started_on),updated_on:YO(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:ZO(e)}})),JO(GO(e),"multilineMessage",(function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map((function(e,t){return se.a.createElement("p",{key:t,className:n},e)}))})),e}return n=a,(r=[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),r=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return se.a.createElement("tr",null,se.a.createElement("td",null,e.type),se.a.createElement("td",null,t),se.a.createElement("td",null,n),se.a.createElement("td",null,r),se.a.createElement("td",null,e.pid),se.a.createElement("td",null,o))}}])&&HO(n.prototype,r),o&&HO(n,o),a}(se.a.Component);function tS(e){return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oS(e,t){return!t||"object"!==tS(t)&&"function"!=typeof t?iS(e):t}function iS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aS(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function cS(e){return(cS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sS(e,t){return(sS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sS(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=cS(t);if(aS()){var r=cS(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return oS(this,e)});function a(){var e;nS(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lS(iS(e=i.call.apply(i,[this].concat(n))),"createRows",(function(){var t=""===e.props.searchTerm.trim();return 0===e.props.tasks.length||e.props.isLoading?t?e.noActiveTasks():e.noActiveTasksMatchFilter():e.props.tasks.map((function(e,t){return se.a.createElement(eS,{key:t,item:e})}))})),lS(iS(e),"getType",(function(){var t=e.props.selectedRadio;return"All Tasks"===t?"":t})),lS(iS(e),"noActiveTasks",(function(){var t=e.getType(),n=se.a.createElement("td",{colSpan:"6"},"No active ",t," tasks.");return e.props.isLoading&&(n=se.a.createElement("td",{colSpan:"6"},"Loading tasks.")),se.a.createElement("tr",{className:"no-matching-database-on-search"},n)})),lS(iS(e),"noActiveTasksMatchFilter",(function(){var t=e.getType();return se.a.createElement("tr",{className:"no-matching-database-on-search"},se.a.createElement("td",{colSpan:"6"},"No active ",t,' tasks match with filter: "',e.props.searchTerm,'"'))})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}])&&rS(n.prototype,r),o&&rS(n,o),a}(se.a.Component);function pS(e){return(pS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mS(e,t,n){return t&&dS(e.prototype,t),n&&dS(e,n),e}function yS(e){return function(){var t,n=vS(e);if(gS()){var r=vS(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return hS(this,t)}}function hS(e,t){return!t||"object"!==pS(t)&&"function"!=typeof t?bS(e):t}function bS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gS(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function vS(e){return(vS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ES(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_S(e,t)}function _S(e,t){return(_S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var OS=function(e){ES(n,e);var t=yS(n);function n(e){var r;return fS(this,n),wS(bS(r=t.call(this,e)),"arrow",(function(){var e=r.props.sortByHeader,t=r.props.headerName,n=r.props.headerIsAscending?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return se.a.createElement("i",{className:n})})),wS(bS(r),"onTableHeaderClick",(function(){r.props.onTableHeaderClick(r.props.headerName)})),r.onTableHeaderClick=r.onTableHeaderClick.bind(bS(r)),r}return mS(n,[{key:"render",value:function(){return se.a.createElement("td",{className:"header-field ".concat(this.props.headerName," tableheader"),onClick:this.onTableHeaderClick},se.a.createElement("label",{className:"header-field label-text active-tasks-header noselect"},this.props.displayName," ",this.arrow()))}}]),n}(se.a.Component),SS=function(e){ES(n,e);var t=yS(n);function n(){var e;fS(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return wS(bS(e=t.call.apply(t,[this].concat(o))),"createTableHeadingFields",(function(){var t=e.props,n=t.onTableHeaderClick,r=t.sortByHeader,o=t.headerIsAscending;return e.props.headerNames.map((function(e){return se.a.createElement(OS,{headerName:e[0],displayName:e[1],key:e[0],onTableHeaderClick:n,sortByHeader:r,headerIsAscending:o})}))})),e}return mS(n,[{key:"render",value:function(){return se.a.createElement("thead",null,se.a.createElement("tr",null,this.createTableHeadingFields()))}}]),n}(se.a.Component);function DS(e){return(DS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CS(e,t){return!t||"object"!==DS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TS(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function PS(e){return(PS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IS(e,t){return(IS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}wS(SS,"defaultProps",{headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]});var xS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IS(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=PS(t);if(TS()){var r=PS(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return CS(this,e)});function a(){return NS(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.selectedRadio,r=e.searchTerm,o=e.sortByHeader,i=e.onTableHeaderClick,a=e.headerIsAscending,c=e.isLoading;return se.a.createElement("div",{id:"dashboard-lower-content"},se.a.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},se.a.createElement(SS,{onTableHeaderClick:i,sortByHeader:o,headerIsAscending:a}),se.a.createElement(uS,{tasks:t,selectedRadio:n,isLoading:c,searchTerm:r})))}}])&&RS(n.prototype,r),o&&RS(n,o),a}(se.a.Component);function AS(e){return(AS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LS(e,t){return!t||"object"!==AS(t)&&"function"!=typeof t?MS(e):t}function MS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function US(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qS(e){return(qS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VS(e,t){return(VS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VS(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=qS(t);if(US()){var r=qS(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return LS(this,e)});function a(){var e;kS(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return FS(MS(e=i.call.apply(i,[this].concat(n))),"setNewSearchTerm",(function(t){e.props.setSearchTerm(t)})),FS(MS(e),"switchTab",(function(t){e.props.switchTab(t)})),FS(MS(e),"tableHeaderOnClick",(function(t){e.props.sortByColumnHeader(t)})),e}return n=a,(r=[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.tasks,r=e.searchTerm,o=e.selectedRadio,i=e.sortByHeader,a=e.headerIsAscending,c=this.setNewSearchTerm,s=this.tableHeaderOnClick;return se.a.createElement("div",{id:"active-tasks-page",className:"scrollable"},se.a.createElement("div",{className:"inner"},se.a.createElement(FO,{searchTerm:r,selectedRadio:o,onSearch:c,onRadioClick:this.switchTab}),se.a.createElement(xS,{isLoading:t,tasks:n,searchTerm:r,selectedRadio:o,onTableHeaderClick:s,sortByHeader:i,headerIsAscending:a})))}}])&&jS(n.prototype,r),o&&jS(n,o),a}(se.a.Component);function KS(e){return(KS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GS(e,t){return!t||"object"!==KS(t)&&"function"!=typeof t?WS(e):t}function WS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XS(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function QS(e){return(QS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JS(e,t){return(JS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $S=Ra.Polling,ZS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JS(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=QS(t);if(XS()){var r=QS(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return GS(this,e)});function a(){var e;HS(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return YS(WS(e=i.call.apply(i,[this].concat(n))),"runPollingUpdate",(function(){e.props.runPollingUpdate()})),YS(WS(e),"getPluralForLabel",(function(){return"1"===e.state.pollingInterval?"":"s"})),e}return n=a,(r=[{key:"render",value:function(){var e="active-tasks__polling-wrapper";return R.isIE1X()&&(e+=" "+e+"--ie1X"),se.a.createElement("div",{className:e},se.a.createElement($S,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}])&&zS(n.prototype,r),o&&zS(n,o),a}(se.a.Component),eD=[{name:"Active Tasks"}],tD=function(e){return se.a.createElement($t,null,se.a.createElement(Zt,{crumbs:eD,docURL:oe.constants.DOC_URLS.ACTIVE_TASKS,endpoint:R.getApiUrl("/_active_tasks")},se.a.createElement(ZS,e)),se.a.createElement(en,null,se.a.createElement(BS,e)))},nD={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"},rD=function(){return E(R.getServerUrl("/_active_tasks")).then((function(e){if(e.error)throw new Error(e.reason);return e}))},oD=function(e){return{type:nD.ACTIVE_TASKS_SET_IS_LOADING,options:e}},iD=function(e){return{type:nD.ACTIVE_TASKS_FETCH_AND_SET,options:e}};function aD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aD(Object(n),!0).forEach((function(t){sD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lD={isLoading:!1,sortByHeader:"started-on",headerIsAscending:!0,selectedRadio:"All Tasks",searchTerm:"",tasks:[],filteredTasks:[]},uD=function(e,t){return cD({},e,{filteredTasks:pD(t,e.selectedRadio,e.sortbyHeader,e.tasks,e.headerIsAscending),searchTerm:t})},pD=function(e,t,n,r,o){return function(e,t,n){var r=Object(a.sortBy)(t,(function(t){var n=e;return Object(a.isUndefined)(t[n])&&(n="source"),t[n]}));return n?r:r.reverse()}(n,r.filter((function(n){return function(e,t){var n=t.toLowerCase().replace(" ","_");return e.type===n||"all_tasks"===n}(n,t)&&function(e,t){var n=new RegExp(t,"g"),r="";return Object(a.has)(e,"database")&&(r+=e.database),Object(a.has)(e,"source")&&(r+=e.source),Object(a.has)(e,"target")&&(r+=e.target),n.test(r)}(n,e)})),o)},fD=function(e,t,n){return e!==t||!n},dD=function(e){return e.headerIsAscending},mD=function(e){return e.isLoading},yD=function(e){return e.selectedRadio},hD=function(e){return e.sortByHeader},bD=function(e){return e.searchTerm},gD=Object(At.b)((function(e){var t,n=e.activetasks;return{tasks:(t=n,t.filteredTasks),headerIsAscending:dD(n),selectedRadio:yD(n),sortByHeader:hD(n),searchTerm:bD(n),isLoading:mD(n)}}),(function(e){return{init:function(){return e((function(e){e(oD(!0)),rD().then((function(t){e(oD(!1)),e(iD(t))})).catch((function(e){oe.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))},setSearchTerm:function(t){return e({type:nD.ACTIVE_TASKS_SET_SEARCH_TERM,options:t})},sortByColumnHeader:function(t){return e({type:nD.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:t})},switchTab:function(t){return e(function(e){return{type:nD.ACTIVE_TASKS_SWITCH_TAB,options:e}}(t))},runPollingUpdate:function(){return e((function(e){rD().then((function(t){e(iD(t))})).catch((function(e){oe.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))}}}))(tD),vD={RouteObjects:[oe.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return se.a.createElement(gD,null)}})]};n(616);vD.initialize=function(){oe.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})},oe.addReducers({activetasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lD,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case nD.ACTIVE_TASKS_FETCH_AND_SET:return cD({},e,{tasks:r,filteredTasks:pD(e.searchTerm,e.selectedRadio,e.sortByHeader,r,e.headerIsAscending)});case nD.ACTIVE_TASKS_SWITCH_TAB:var o=pD(e.searchTerm,r,e.sortByHeader,e.tasks,c);return cD({},e,{selectedRadio:r,filteredTasks:o});case nD.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL:return cD({},e,{pollingIntervalSeconds:r});case nD.ACTIVE_TASKS_SET_SEARCH_TERM:return uD(e,r);case nD.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:var i=e.sortByHeader,a=r,c=fD(i,a,e.headerIsAscending),s=pD(e.searchTerm,e.selectedRadio,a,e.tasks,c);return cD({},e,{sortByHeader:a,headerIsAscending:c,filteredTasks:s});case nD.ACTIVE_TASKS_SET_IS_LOADING:return cD({},e,{isLoading:r})}return e}});var ED=vD;function _D(e){return(_D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SD(e,t){return!t||"object"!==_D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DD(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ND(e){return(ND=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RD(e,t){return(RD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RD(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ND(t);if(DD()){var r=ND(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return SD(this,e)});function a(){return wD(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",{className:"config-warning-cluster-wrapper"},se.a.createElement("div",{className:"config-warning-cluster-container"},se.a.createElement("div",null,se.a.createElement("div",{className:"config-warning-icon-container pull-left"},se.a.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.props.nodes.length," nodes. For CouchDB 2.0 we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",se.a.createElement("br",null),se.a.createElement("br",null),se.a.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}])&&OD(n.prototype,r),o&&OD(n,o),a}(se.a.Component),TD=Object(At.b)((function(e){return{nodes:e.clusters.nodes}}),null)(CD),PD={RouteObjects:[oe.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},showDisabledFeatureScreen:function(){return P_.fetchNodes(),se.a.createElement(nn,{component:se.a.createElement(TD,null),endpoint:R.getServerUrl("/_membership"),docURL:oe.constants.DOC_URLS.MEMBERSHIP,crumbs:[{name:"Config disabled"}]})}})]};function ID(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ID(Object(n),!0).forEach((function(t){AD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kD={nodes:[]};PD.initialize=function(){},oe.addReducers({clusters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kD,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case T_:return xD({},e,{nodes:r.nodes})}return e}});var jD=PD,LD=function(e){return R.getServerUrl("/_node/"+e+"/_config")},MD=function(e,t,n){var r="/_node/"+e+"/_config/"+encodeURIComponent(t)+"/"+encodeURIComponent(n);return R.getServerUrl(r)},UD=function(e,t,n,r){var o=MD(e,t,n);return S(o,r).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},qD="EDIT_CONFIG",VD="LOADING_CONFIG",FD="EDIT_OPTION",BD="CANCEL_EDIT",KD="SAVING_OPTION",HD="OPTION_SAVE_SUCCESS",zD="OPTION_SAVE_FAILURE",GD="DELETING_OPTION",WD="OPTION_DELETE_SUCCESS",XD="OPTION_DELETE_FAILURE",QD="ADDING_OPTION",JD="OPTION_ADD_SUCCESS",YD="OPTION_ADD_FAILURE",$D=function(e){return function(t){t({type:VD}),function(e){var t=LD(e);return E(t).then((function(e){if(e.error)throw new Error(e.reason);return{sections:e}}))}(e).then((function(n){t({type:qD,options:{sections:n.sections,node:e}})})).catch((function(n){oe.addNotification({msg:"Failed to load the configuration. "+n.message,type:"error",clear:!0}),t({type:qD,options:{sections:[],node:e}})}))}},ZD=function(e,t){t({type:HD,options:e}),oe.addNotification({msg:"Option ".concat(e.optionName," saved"),type:"success"})},eN=function(e,t,n){n({type:zD,options:e}),oe.addNotification({msg:"Option save failed: ".concat(t),type:"error"})},tN=function(e,t){t({type:JD,options:e}),oe.addNotification({msg:"Option ".concat(e.optionName," added"),type:"success"})},nN=function(e,t,n){n({type:YD,options:e}),oe.addNotification({msg:"Option add failed: ".concat(t),type:"error"})},rN=function(e,t){return function(n){n({type:GD,options:t});var r=t.sectionName,o=t.optionName;return function(e,t,n){var r=MD(e,t,n);return w(r).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,r,o).then((function(){return oN(t,n)})).catch((function(e){return iN(t,e.message,n)}))}},oN=function(e,t){t({type:WD,options:e}),oe.addNotification({msg:"Option ".concat(e.optionName," deleted"),type:"success"})},iN=function(e,t,n){n({type:XD,options:e}),oe.addNotification({msg:"Option delete failed: ".concat(t),type:"error"})};function aN(e){return(aN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sN(e,t){return!t||"object"!==aN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lN(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function uN(e){return(uN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pN(e,t){return(pN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pN(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=uN(t);if(lN()){var r=uN(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return sN(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state=t.getInitialState(),t}return n=a,(r=[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return se.a.createElement(sn.i,{className:"tray",id:"add-option-popover",title:"Add Option"},se.a.createElement("input",{className:"input-section-name",onChange:this.updateSectionName.bind(this),type:"text",name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),se.a.createElement("input",{className:"input-option-name",onChange:this.updateOptionName.bind(this),type:"text",name:"name",placeholder:"Name"}),se.a.createElement("input",{className:"input-value",onChange:this.updateValue.bind(this),type:"text",name:"value",placeholder:"Value"}),se.a.createElement("a",{className:"btn btn-create",onClick:this.onAdd.bind(this)},"Create"))}},{key:"render",value:function(){var e=this;return se.a.createElement("div",{id:"add-option-panel"},se.a.createElement(sn.a,{id:"add-option-button",onClick:this.togglePopover.bind(this),ref:function(t){return e.target=t}},se.a.createElement("i",{className:"icon icon-plus header-icon"}),"Add Option"),se.a.createElement(sn.g,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom",rootClose:!0,target:function(){return e.target}},this.getPopover()))}}])&&cN(n.prototype,r),o&&cN(n,o),a}(se.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fN,"propTypes",{onAdd:xt.a.func.isRequired});var dN=Object(At.b)((function(){return{}}),(function(e,t){return{onAdd:function(n){e(function(e,t){return function(n){n({type:QD});var r=t.sectionName,o=t.optionName,i=t.value;return UD(e,r,o,i).then((function(){return tN(t,n)})).catch((function(e){return nN(t,e.message,n)}))}}(t.node,n))}}}))(fN);function mN(e){return(mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bN(e,t){return!t||"object"!==mN(t)&&"function"!=typeof t?gN(e):t}function gN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vN(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function EN(e){return(EN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _N(e,t){return(_N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ON=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_N(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=EN(t);if(vN()){var r=EN(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return bN(this,e)});function a(){var e;yN(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wN(gN(e=i.call.apply(i,[this].concat(n))),"state",{value:e.props.value}),wN(gN(e),"onChange",(function(t){e.setState({value:t.target.value})})),wN(gN(e),"onSave",(function(){e.state.value!==e.props.value?e.props.onSave(e.state.value):e.props.onCancelEdit()})),wN(gN(e),"getButtons",(function(){return e.props.saving?null:se.a.createElement("span",null,se.a.createElement("button",{className:"btn btn-primary fonticon-ok-circled btn-small btn-config-save",onClick:e.onSave.bind(gN(e))}),se.a.createElement("button",{className:"btn fonticon-cancel-circled btn-small btn-config-cancel",onClick:e.props.onCancelEdit}))})),e}return n=a,(r=[{key:"render",value:function(){return this.props.editing?se.a.createElement("td",null,se.a.createElement("div",{className:"config-value-form"},se.a.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.props.saving,autoFocus:!0,type:"text",className:"config-value-input"}),this.getButtons())):se.a.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}])&&hN(n.prototype,r),o&&hN(n,o),a}(se.a.Component);function SN(e){return(SN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NN(e,t){return!t||"object"!==SN(t)&&"function"!=typeof t?RN(e):t}function RN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CN(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function TN(e){return(TN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PN(e,t){return(PN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wN(ON,"propTypes",{value:xt.a.string.isRequired,editing:xt.a.bool.isRequired,onEdit:xt.a.func.isRequired,onCancelEdit:xt.a.func.isRequired,onSave:xt.a.func.isRequired});var xN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PN(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=TN(t);if(CN()){var r=TN(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return NN(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),IN(RN(t=i.call(this,e)),"onDelete",(function(){t.props.onDelete()})),IN(RN(t),"showModal",(function(){t.setState({show:!0})})),IN(RN(t),"hideModal",(function(){t.setState({show:!1})})),t.onDelete=t.onDelete.bind(RN(t)),t.showModal=t.showModal.bind(RN(t)),t.hideModal=t.hideModal.bind(RN(t)),t.state={show:!1},t}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("td",{className:"text-center config-item-trash config-delete-value"},se.a.createElement("i",{className:"icon icon-trash",onClick:this.showModal}),se.a.createElement($a.ConfirmationModal,{text:"Are you sure you want to delete ".concat(this.props.sectionName,"/").concat(this.props.optionName,"?"),onClose:this.hideModal,onSubmit:this.onDelete,visible:this.state.show}))}}])&&DN(n.prototype,r),o&&DN(n,o),a}(se.a.Component);function AN(e){return(AN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LN(e,t){return!t||"object"!==AN(t)&&"function"!=typeof t?MN(e):t}function MN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UN(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qN(e){return(qN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VN(e,t){return(VN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}IN(xN,"propTypes",{sectionName:xt.a.string.isRequired,optionName:xt.a.string.isRequired,onDelete:xt.a.func.isRequired});var BN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VN(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=qN(t);if(UN()){var r=qN(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return LN(this,e)});function a(){var e;kN(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return FN(MN(e=i.call.apply(i,[this].concat(n))),"onSave",(function(t){var n=e.props.option;n.value=t,e.props.onSave(n)})),FN(MN(e),"onDelete",(function(){e.props.onDelete(e.props.option)})),FN(MN(e),"onEdit",(function(){e.props.onEdit(e.props.option)})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("tr",{className:"config-item"},se.a.createElement("th",null,this.props.option.header&&this.props.option.sectionName),se.a.createElement("td",null,this.props.option.optionName),se.a.createElement(ON,{value:this.props.option.value,editing:this.props.option.editing,saving:this.props.saving,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),se.a.createElement(xN,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}])&&jN(n.prototype,r),o&&jN(n,o),a}(se.a.Component);function KN(e){return(KN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GN(e,t){return!t||"object"!==KN(t)&&"function"!=typeof t?WN(e):t}function WN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XN(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function QN(e){return(QN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JN(e,t){return(JN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}FN(BN,"propTypes",{option:xt.a.object.isRequired,saving:xt.a.bool.isRequired,onSave:xt.a.func.isRequired,onDelete:xt.a.func.isRequired,onEdit:xt.a.func.isRequired,onCancelEdit:xt.a.func.isRequired});var $N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JN(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=QN(t);if(XN()){var r=QN(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return GN(this,e)});function a(){var e;HN(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return YN(WN(e=i.call.apply(i,[this].concat(n))),"createOptions",(function(){return _.map(e.props.options,(function(t){return se.a.createElement(BN,{option:t,saving:e.props.saving,onDelete:e.props.onDeleteOption,onSave:e.props.onSaveOption,onEdit:e.props.onEditOption,onCancelEdit:e.props.onCancelEdit,key:"".concat(t.sectionName,"/").concat(t.optionName)})}))})),e}return n=a,(r=[{key:"render",value:function(){var e=this.createOptions();return se.a.createElement("table",{className:"config table table-striped table-bordered"},se.a.createElement("thead",null,se.a.createElement("tr",null,se.a.createElement("th",{id:"config-section",width:"22%"},"Section"),se.a.createElement("th",{id:"config-option",width:"22%"},"Option"),se.a.createElement("th",{id:"config-value"},"Value"),se.a.createElement("th",{id:"config-trash"}))),se.a.createElement("tbody",null,e))}}])&&zN(n.prototype,r),o&&zN(n,o),a}(se.a.Component);function ZN(e){return(ZN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tR(e,t){return!t||"object"!==ZN(t)&&"function"!=typeof t?nR(e):t}function nR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rR(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function oR(e){return(oR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iR(e,t){return(iR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}YN($N,"propTypes",{options:xt.a.arrayOf(xt.a.shape({editing:xt.a.bool.isRequired,header:xt.a.bool,optionName:xt.a.string.isRequired,sectionName:xt.a.string.isRequired,value:xt.a.string})).isRequired,saving:xt.a.bool.isRequired,onDeleteOption:xt.a.func.isRequired,onEditOption:xt.a.func.isRequired,onSaveOption:xt.a.func.isRequired,onCancelEdit:xt.a.func.isRequired});var cR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iR(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=oR(t);if(rR()){var r=oR(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return tR(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),aR(nR(t=i.call(this,e)),"saveOption",(function(e){t.props.saveOption(t.props.node,e)})),aR(nR(t),"deleteOption",(function(e){t.props.deleteOption(t.props.node,e)})),aR(nR(t),"editOption",(function(e){t.props.editOption(e)})),aR(nR(t),"cancelEdit",(function(){t.props.cancelEdit()})),t.props.fetchAndEditConfig(t.props.node),t}return n=a,(r=[{key:"render",value:function(){return this.props.loading?se.a.createElement("div",{className:"view"},se.a.createElement(Ra.LoadLines,null)):se.a.createElement($N,{saving:this.props.saving,onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.props.options})}}])&&eR(n.prototype,r),o&&eR(n,o),a}(se.a.Component);function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sR(Object(n),!0).forEach((function(t){uR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}aR(cR,"propTypes",{options:xt.a.array.isRequired,loading:xt.a.bool.isRequired,saving:xt.a.bool.isRequired,saveOption:xt.a.func.isRequired,deleteOption:xt.a.func.isRequired,editOption:xt.a.func.isRequired,cancelEdit:xt.a.func.isRequired,fetchAndEditConfig:xt.a.func.isRequired});var pR={sections:{},loading:!0,editSectionName:null,editOptionName:null,saving:!1};function fR(e,t){var n=t.sectionName,r=t.optionName,o=t.value,i=lR({},e.sections);return i[n]||(i[n]={}),i[n][r]=o||!0,i}function dR(e,t){var n=t.sectionName,r=t.optionName,o=lR({},e.sections);return o[n]&&(o[n]=lR({},o[n]),delete o[n][r],0==Object.keys(o[n]).length&&delete o[n]),o}function mR(e,t){var n=e.sections[t],r=Object.keys(n).map((function(r){return{editing:yR(e,t,r),sectionName:t,optionName:r,value:n[r]}})).sort((function(e,t){return e.optionName<t.optionName?-1:e.optionName>t.optionName?1:0}));return r.length>0&&(r[0].header=!0),r}function yR(e,t,n){return t===e.editSectionName&&n===e.editOptionName}var hR=Object(At.b)((function(e,t){var n,r=e.config;return{node:t.node,options:(n=r,Object.keys(n.sections).map((function(e){return{sectionName:e,options:mR(n,e)}})).sort((function(e,t){return e.sectionName<t.sectionName?-1:e.sectionName>t.sectionName?1:0})).map((function(e){return e.options})).reduce((function(e,t){return e.concat(t)}),[])),loading:r.loading,saving:r.saving,editSectionName:r.editSectionName,editOptionName:r.editOptionName}}),(function(e){return{fetchAndEditConfig:function(t){e($D(t))},saveOption:function(t,n){e(function(e,t){return function(n){n({type:KD,options:t});var r=t.sectionName,o=t.optionName,i=t.value;return UD(e,r,o,i).then((function(){return ZD(t,n)})).catch((function(e){return eN(t,e.message,n)}))}}(t,n))},deleteOption:function(t,n){e(rN(t,n))},editOption:function(t){e(function(e){return function(t){t({type:FD,options:e})}}(t))},cancelEdit:function(t){e(function(e){return function(t){t({type:BD,options:e})}}(t))}}}))(cR),bR=function(e){var t=e.active,n=e.link,r=e.title;return se.a.createElement("li",{className:t?"active":""},se.a.createElement("a",{href:"#".concat(n)},r))};bR.propTypes={active:xt.a.bool.isRequired,link:xt.a.string.isRequired,icon:xt.a.string,title:xt.a.string.isRequired};var gR=function(e){var t=e.sidebarItems,n=e.selectedTab,r=t.map((function(e){return se.a.createElement(bR,{key:e.title,active:n===e.title,title:e.title,link:e.link})}));return se.a.createElement("nav",{className:"sidenav"},se.a.createElement("ul",{className:"nav nav-list"},r))};function vR(e){return(vR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ER(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _R(e,t){return!t||"object"!==vR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wR(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function OR(e){return(OR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SR(e,t){return(SR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SR(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=OR(t);if(wR()){var r=OR(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _R(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?se.a.createElement("div",null,se.a.createElement("p",null,se.a.createElement("strong",null," Origin Domains ")," "),se.a.createElement("p",null,"Databases will accept requests from these domains: "),se.a.createElement("label",{className:"radio"},se.a.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),se.a.createElement("label",{className:"radio"},se.a.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}])&&ER(n.prototype,r),o&&ER(n,o),a}(ce.Component);DR.propTypes={corsEnabled:xt.a.bool,isAllOrigins:xt.a.bool,originChange:xt.a.func.isRequired};var NR=function(e){return!!RR(e)||(oe.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},RR=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)};function CR(e){return(CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PR(e,t){return!t||"object"!==CR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IR(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function xR(e){return(xR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AR(e,t){return(AR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AR(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=xR(t);if(IR()){var r=xR(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return PR(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={origin:""},t}return n=a,(r=[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!NR(this.state.origin))return!1;var t=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?se.a.createElement("div",{id:"origin-domains-container"},se.a.createElement("div",{className:"origin-domains"},se.a.createElement("div",{className:"input-append"},se.a.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),se.a.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},se.a.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}])&&TR(n.prototype,r),o&&TR(n,o),a}(ce.Component);function jR(e){return(jR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MR(e,t){return!t||"object"!==jR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UR(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qR(e){return(qR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VR(e,t){return(VR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}kR.propTypes={isVisible:xt.a.bool.isRequired,addOrigin:xt.a.func.isRequired};var FR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VR(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=qR(t);if(UR()){var r=qR(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return MR(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={edit:!1,updatedOrigin:t.props.origin},t}return n=a,(r=[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),NR(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?se.a.createElement("div",{className:"input-append edit-domain-section"},se.a.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),se.a.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):se.a.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return se.a.createElement("tr",null,se.a.createElement("td",null,e),se.a.createElement("td",{width:"30"},se.a.createElement("span",null,se.a.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),se.a.createElement("td",{width:"30"},se.a.createElement("span",null,se.a.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}])&&LR(n.prototype,r),o&&LR(n,o),a}(ce.Component);function BR(e){return(BR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HR(e,t){return!t||"object"!==BR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zR(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function GR(e){return(GR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WR(e,t){return(WR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}FR.propTypes={origin:xt.a.string.isRequired,updateOrigin:xt.a.func.isRequired,deleteOrigin:xt.a.func.isRequired};var XR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WR(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=GR(t);if(zR()){var r=GR(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return HR(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"createRows",value:function(){var e=this;return this.props.origins.map((function(t,n){return se.a.createElement(FR,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})}))}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var r=this.createRows();return se.a.createElement("table",{id:"origin-domain-table",className:"table table-striped"},se.a.createElement("tbody",null,r))}}])&&KR(n.prototype,r),o&&KR(n,o),a}(ce.Component);function QR(e){return(QR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JR(e){return function(e){if(Array.isArray(e))return YR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return YR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZR(e,t){return!t||"object"!==QR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eC(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function tC(e){return(tC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nC(e,t){return(nC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}XR.propTypes={isVisible:xt.a.bool.isRequired,origins:xt.a.arrayOf(xt.a.string),updateOrigin:xt.a.func.isRequired,deleteOrigin:xt.a.func.isRequired};var rC=Ra.LoadLines,oC=$a.ConfirmationModal,iC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nC(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=tC(t);if(eC()){var r=tC(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ZR(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node;(!t||_.isEmpty(n)||window.confirm(ae.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:r})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),r=_.indexOf(n,t);-1!==r&&(n[r]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node,o=e.domainToDelete,i=this.props.origins.indexOf(o);if(-1!==i){var a=[].concat(JR(n.slice(0,i)),JR(n.slice(i+1)));this.props.saveCORS({corsEnabled:t,origins:a,node:r})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every((function(e){return!0===e})),t=se.a.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},se.a.createElement(DR,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),se.a.createElement(XR,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),se.a.createElement(kR,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=se.a.createElement(rC,null));var n=se.a.createElement("span",null,"Are you sure you want to delete ",se.a.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return se.a.createElement("div",{className:"cors-page flex-body"},se.a.createElement("header",{id:"cors-header"},se.a.createElement("p",null,ae.i18n.en_US["cors-notice"])),se.a.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},se.a.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",se.a.createElement("br",null),se.a.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),se.a.createElement(oC,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}])&&$R(n.prototype,r),o&&$R(n,o),a}(ce.Component),aC="EDIT_CORS",cC="CORS_SET_IS_LOADING",sC="CORS_SHOW_DELETE_DOMAIN_MODAL",lC="CORS_HIDE_DELETE_DOMAIN_MODAL",uC=function(e,t,n,r){if(!t)throw new Error("node not set");return S(e+"/cors/"+n,r).then((function(e){if(e.error)throw new Error(e.reason);return e}))},pC=function(){return{type:cC,isLoading:!1}},fC=function(e){return{type:aC,options:e,isLoading:!1}},dC=function(){return{type:lC}},mC=function(e){return"Reason: "+(e&&e.message||"n/a")},yC=function(e){return _.isEmpty(e)?"":e.join(",")},hC={fetchAndLoadCORSOptions:function(e,t){return function(n){var r=E(e+"/cors").then((function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})),o=function(e){return E(e+"/httpd").then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e);oe.Promise.join(r,o,(function(e,r){var o=fC({origins:e.origins,corsEnabled:"true"===r.enable_cors,node:t});n(o)})).catch((function(e){oe.addNotification({msg:"Could not load CORS settings.  "+mC(e),type:"error"})}))}},showLoadingBars:function(){return{type:cC,isLoading:!0}},hideLoadingBars:pC,showDomainDeleteConfirmation:function(e){return{type:sC,domainToDelete:e}},hideDomainDeleteConfirmation:dC,loadCORSOptions:fC,sanitizeOrigins:yC,saveCors:function(e,t){return function(n){var r,o,i,a=[];return a.push(function(e,t,n){if(!t)throw new Error("node not set");return S(e+"/httpd/enable_cors",n.toString()).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,t.node,t.corsEnabled)),t.corsEnabled&&(a.push((r=e,o=t.node,i=yC(t.origins),uC(r,o,"origins",i))),a.push(function(e,t){return uC(e,t,"credentials","true")}(e,t.node)),a.push(function(e,t){return uC(e,t,"headers","accept, authorization, content-type, origin, referer")}(e,t.node)),a.push(function(e,t){return uC(e,t,"methods","GET, PUT, POST, HEAD, DELETE")}(e,t.node))),oe.Promise.all(a).then((function(){oe.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(fC(t))})).catch((function(e){oe.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+mC(e),type:"error",clear:!0}),n(dC()),n(pC())}))}},overrideFetchAndLoadCORSOptions:function(e){hC.fetchAndLoadCORSOptions=e},overrideSaveCors:function(e){hC.saveCors=e}},bC=hC,gC={CORSContainer:Object(At.b)((function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}}),(function(e,t){return{saveCORS:function(n){e(bC.showLoadingBars()),e(bC.saveCors(t.url,n))},fetchAndLoadCORSOptions:function(){e(bC.fetchAndLoadCORSOptions(t.url,t.node))},showDeleteDomainConfirmation:function(t){e(bC.showDomainDeleteConfirmation(t))},hideDeleteDomainConfirmation:function(){e(bC.hideDomainDeleteConfirmation())}}}))(iC),CORSScreen:iC,OriginInput:kR,Origins:DR,OriginTable:XR,OriginRow:FR},vC=function(e){var t=e.node,n=e.crumbs,r=e.docURL,o=e.endpoint;return se.a.createElement("header",{className:"two-panel-header"},se.a.createElement("div",{className:"flex-layout flex-row"},se.a.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},se.a.createElement(Xt,{crumbs:n})),se.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},se.a.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),se.a.createElement("div",{id:"right-header",className:"flex-fill"},se.a.createElement(dN,{node:t})),se.a.createElement(Yt,{docURL:r,endpoint:o}),se.a.createElement("div",{id:"notification-center-btn",className:"flex-fill"},se.a.createElement(zt,null)))))},EC=function(e){var t=e.showCors,n=e.docURL,r=e.node,o=e.endpoint,i=e.crumbs,a=[{title:"Main config",link:"_config/"+r},{title:"CORS",link:"_config/"+r+"/cors"}],c=t?"CORS":"Main config",s=t?se.a.createElement(gC.CORSContainer,{node:r,url:o}):se.a.createElement(hR,{node:r});return se.a.createElement("div",{id:"dashboard",className:"with-sidebar"},se.a.createElement(vC,{docURL:n,endpoint:o,node:r,crumbs:i}),se.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},se.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},se.a.createElement(gR,{sidebarItems:a,selectedTab:c})),se.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},se.a.createElement("div",{id:"dashboard-upper-content"}),se.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},s),se.a.createElement("div",{id:"footer"}))))},_C=oe.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){P_.navigateToNodeBasedOnNodeCount("/_config/")}}),wC=oe.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(){},configForNode:function(e){return se.a.createElement(EC,{node:e,docURL:oe.constants.DOC_URLS.CONFIG,endpoint:LD(e),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return se.a.createElement(EC,{node:e,docURL:oe.constants.DOC_URLS.CONFIG,endpoint:LD(e),crumbs:[{name:"Config"}],showCors:!0})}}),OC=oe.addon();OC.RouteObjects=[wC,_C];var SC=OC;n(617);SC.initialize=function(){oe.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},oe.addReducers({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pR,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case qD:return lR({},e,{sections:n.sections,loading:!1,editOptionName:null,editSectionName:null});case FD:return lR({},e,{editSectionName:n.sectionName,editOptionName:n.optionName});case VD:return lR({},e,{loading:!0});case BD:return lR({},e,{editOptionName:null,editSectionName:null});case KD:return lR({},e,{saving:!0});case HD:return lR({},e,{editOptionName:null,editSectionName:null,sections:fR(e,n),saving:!1});case zD:return lR({},e,{saving:!1});case JD:return lR({},e,{sections:fR(e,n),saving:!1});case YD:return lR({},e,{saving:!1});case WD:return lR({},e,{sections:dR(e,n)});default:return e}}});var DC=SC,NC=n(96),RC=n.n(NC),CC={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}};function TC(e){return(TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xC(e,t){return!t||"object"!==TC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AC(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function kC(e){return(kC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jC(e,t){return(jC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LC=Ra.StyledSelect,MC=function(e){var t=e.onChange,n=e.value;return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Database URL:"),se.a.createElement("div",{className:""},se.a.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};MC.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var UC=function(e){var t=e.value,n=e.onChange,r=e.databases.map((function(e){return{value:e,label:e}}));return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Name:"),se.a.createElement("div",{className:"replication__input-react-select"},se.a.createElement(ba.a,{name:"source-name",value:t,placeholder:"Database name",options:r,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};UC.propTypes={value:xt.a.string.isRequired,databases:xt.a.array.isRequired,onChange:xt.a.func.isRequired};var qC=function(e){var t=e.replicationSource,n=e.databases,r=e.localSource,o=e.remoteSource,i=e.onChangeRemote,a=e.onChangeLocal;return t===CC.REPLICATION_SOURCE.LOCAL?se.a.createElement(UC,{value:r,databases:n,onChange:a}):se.a.createElement(MC,{value:o,onChange:i})};qC.propTypes={replicationSource:xt.a.string.isRequired,databases:xt.a.array.isRequired,localSource:xt.a.string.isRequired,remoteSource:xt.a.string.isRequired,onChangeRemote:xt.a.func.isRequired,onChangeLocal:xt.a.func.isRequired};var VC=function(e){var t=e.onChange,n=e.value;return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Type:"),se.a.createElement("div",{className:"replication__input-select"},se.a.createElement(LC,{selectContent:[{value:"",label:"Select source type"},{value:CC.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:CC.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map((function(e){return se.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};VC.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var FC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jC(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=kC(t);if(AC()){var r=kC(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return xC(this,e)});function a(){return PC(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,r=e.onLocalSourceChange,o=e.onRemoteSourceChange,i=e.remoteSource,a=e.databases;return t?se.a.createElement(qC,{replicationSource:t,databases:a,localSource:n,remoteSource:i,onChangeLocal:r,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return se.a.createElement("div",null,se.a.createElement("h3",null,"Source"),se.a.createElement(VC,{onChange:n,value:t}),this.getReplicationSourceRow())}}])&&IC(n.prototype,r),o&&IC(n,o),a}(se.a.Component);function BC(e){return(BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zC(e,t){return!t||"object"!==BC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GC(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function WC(e){return(WC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XC(e,t){return(XC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}FC.propTypes={replicationSource:xt.a.string.isRequired,localSource:xt.a.string.isRequired,remoteSource:xt.a.string.isRequired,databases:xt.a.array.isRequired,onLocalSourceChange:xt.a.func.isRequired,onRemoteSourceChange:xt.a.func.isRequired};var QC=Ra.StyledSelect,JC=function(e){var t=e.value,n=e.onChange;return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Type:"),se.a.createElement("div",{id:"replication-target",className:"replication__input-select"},se.a.createElement(QC,{selectContent:[{value:"",label:"Select target type"},{value:CC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:CC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map((function(e){return se.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};JC.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var YC=function(e){var t=e.onChange,n=e.value;return se.a.createElement("div",null,se.a.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}))};YC.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var $C=function(e){var t=e.onChange,n=e.value,r=e.databases.map((function(e){return{value:e,label:e}}));return se.a.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},se.a.createElement(ba.a,{value:n,options:r,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};$C.propTypes={value:xt.a.string.isRequired,databases:xt.a.array.isRequired,onChange:xt.a.func.isRequired};var ZC=function(e){var t=e.onChange,n=e.value;return se.a.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};ZC.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var eT=function(e){var t,n=e.replicationTarget,r=e.onLocalTargetChange,o=e.onRemoteTargetChange,i=e.localTarget,a=e.remoteTarget,c=e.databases;if(!n)return null;n===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(s="New database:",t=se.a.createElement(ZC,{value:i,onChange:r})):t=n===CC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?se.a.createElement($C,{onChange:r,databases:c,value:i}):se.a.createElement(YC,{onChange:o,value:a,newRemote:CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE===n});var s="Name:";return n!==CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&n!==CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(s="New database:"),se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},s),se.a.createElement("div",null,t))};eT.propTypes={databases:xt.a.array.isRequired,onLocalTargetChange:xt.a.func.isRequired,onRemoteTargetChange:xt.a.func.isRequired,remoteTarget:xt.a.string.isRequired,localTarget:xt.a.string.isRequired,replicationTarget:xt.a.string.isRequired};var tT=function(e){var t=e.replicationTarget,n=e.targetDatabasePartitioned,r=e.onTargetDatabasePartitionedChange,o=e.allowNewPartitionedLocalDbs;if(!t)return null;if(t!==CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&t!==CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE)return null;var i=t===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!o,a=i?"Local server does not support partitioned databases":"Creates a new partitioned database",c=se.a.createElement(sn.k,{id:"new-db-partitioned-tooltip"},a);return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"New database options:"),se.a.createElement("div",{className:cn()("replication__input-checkbox",{"replication__input-checkbox--disabled":i})},se.a.createElement("input",{id:"target-db-is-partitioned",type:"checkbox",value:"true",checked:n,onChange:function(){r(!n)},disabled:i}),se.a.createElement(sn.h,{placement:"right",overlay:c},se.a.createElement("label",{htmlFor:"target-db-is-partitioned"},"Partitioned"))))};tT.propTypes={onTargetDatabasePartitionedChange:xt.a.func.isRequired,targetDatabasePartitioned:xt.a.bool.isRequired,replicationTarget:xt.a.string.isRequired,allowNewPartitionedLocalDbs:xt.a.bool.isRequired};var nT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XC(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=WC(t);if(GC()){var r=WC(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return zC(this,e)});function a(){return KC(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,r=e.onTargetChange,o=e.databases,i=e.localTarget,a=e.onRemoteTargetChange,c=e.remoteTarget,s=e.targetDatabasePartitioned,l=e.onTargetDatabasePartitionedChange,u=e.allowNewPartitionedLocalDbs;return se.a.createElement("div",null,se.a.createElement("h3",null,"Target"),se.a.createElement(JC,{value:t,onChange:r}),se.a.createElement(eT,{remoteTarget:c,replicationTarget:t,databases:o,localTarget:i,onRemoteTargetChange:a,onLocalTargetChange:n}),se.a.createElement(tT,{replicationTarget:t,onTargetDatabasePartitionedChange:l,targetDatabasePartitioned:s,allowNewPartitionedLocalDbs:u}))}}])&&HC(n.prototype,r),o&&HC(n,o),a}(se.a.Component);function rT(e){return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aT(e,t){return!t||"object"!==rT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cT(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function sT(e){return(sT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lT(e,t){return(lT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nT.propTypes={databases:xt.a.array.isRequired,onTargetChange:xt.a.func.isRequired,onLocalTargetChange:xt.a.func.isRequired,onRemoteTargetChange:xt.a.func.isRequired,remoteTarget:xt.a.string.isRequired,localTarget:xt.a.string.isRequired,replicationTarget:xt.a.string.isRequired};var uT=Ra.StyledSelect,pT=function(e){var t=e.value,n=e.onChange;return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Replication type:"),se.a.createElement("div",{className:"replication__input-select"},se.a.createElement(uT,{selectContent:[{value:CC.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:CC.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map((function(e){return se.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};pT.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var fT=function(e){var t=e.value,n=e.onChange;return se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Replication document:"),se.a.createElement("div",{className:"replication__doc-name"},se.a.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),se.a.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};fT.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var dT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lT(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=sT(t);if(cT()){var r=sT(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return aT(this,e)});function a(){return oT(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,r=e.onDocChange,o=e.onTypeChange;return se.a.createElement("div",null,se.a.createElement("h3",null,"Options"),se.a.createElement(pT,{onChange:o,value:t}),se.a.createElement(fT,{onChange:r,value:n}))}}])&&iT(n.prototype,r),o&&iT(n,o),a}(se.a.Component);dT.propTypes={replicationDocName:xt.a.string.isRequired,replicationType:xt.a.string.isRequired,onDocChange:xt.a.func.isRequired,onTypeChange:xt.a.func.isRequired};var mT=Ra.ConfirmButton,yT=function(e){var t=e.onClear,n=e.disabled,r=e.onClick;return se.a.createElement("div",{className:"replication__button-row"},se.a.createElement(mT,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:r,disabled:n}),se.a.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))};function hT(e){return(hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vT(e,t,n){return t&&gT(e.prototype,t),n&&gT(e,n),e}function ET(e){return function(){var t,n=ST(e);if(OT()){var r=ST(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _T(this,t)}}function _T(e,t){return!t||"object"!==hT(t)&&"function"!=typeof t?wT(e):t}function wT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OT(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ST(e){return(ST=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DT(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NT(e,t)}function NT(e,t){return(NT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yT.propTypes={disabled:xt.a.bool.isRequired,onClick:xt.a.func.isRequired,onClear:xt.a.func.isRequired};var RT=Ra.StyledSelect,CT=function(e){DT(n,e);var t=ET(n);function n(e){var r;return bT(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wT(r=t.call(this,e)),"getAuthOptions",(function(){var e=ae.i18n.en_US["replication-user-password-auth-label"],t=[{value:CC.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:CC.REPLICATION_AUTH_METHOD.BASIC,label:e}];return r.customAuths.map((function(e){t.push({value:e.typeValue,label:e.typeLabel})})),t.map((function(e){return se.a.createElement("option",{value:e.value,key:e.value},e.label)}))})),r.onChangeType=r.onChangeType.bind(wT(r)),r.onChangeValue=r.onChangeValue.bind(wT(r)),r.customAuths=oe.getExtensions("Replication:Auth"),r.customAuths||(r.customAuths=[]),r.customAuthTypes=r.customAuths.map((function(e){return e.typeValue})),r.customAuthHelp=oe.getExtensions("Replication:Auth-help"),r.customAuthHelp||(r.customAuthHelp=[]),r}return vT(n,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==CC.REPLICATION_AUTH_METHOD.BASIC)return se.a.createElement(TT,{onChange:this.onChangeValue,auth:e,authId:n});var r=this.customAuths.filter((function(e){return e.typeValue===t}));if(r&&r.length>0){var o=r[0].inputComponent;return se.a.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"getHelpText",value:function(e){var t=this.customAuthHelp.filter((function(t){return e===t.authType})).map((function(e){return e.helpText}));return 0==t.length?null:se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"}),se.a.createElement("div",{className:"replication__help-tile"},t[0]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,r=t.authType,o=t.authId;return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"},"Authentication:"),se.a.createElement("div",{className:"replication__input-select"},se.a.createElement(RT,{selectContent:this.getAuthOptions(),selectChange:function(t){return e.onChangeType(t.target.value)},selectId:"select-"+o,selectValue:r}))),this.getAuthInputFields(n,r),this.getHelpText(r))}}]),n}(se.a.Component);CT.propTypes={authId:xt.a.string.isRequired,authType:xt.a.string.isRequired,credentials:xt.a.object,onChangeAuth:xt.a.func.isRequired,onChangeAuthType:xt.a.func.isRequired},CT.defaultProps={authType:CC.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var TT=function(e){DT(n,e);var t=ET(n);function n(e){var r;return bT(this,n),(r=t.call(this,e)).updatePassword=r.updatePassword.bind(wT(r)),r.updateUsername=r.updateUsername.bind(wT(r)),r.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},r}return vT(n,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=ae.i18n.en_US["replication-username-input-placeholder"],n=ae.i18n.en_US["replication-password-input-placeholder"],r=this.props.authId;return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"}),se.a.createElement("div",null,se.a.createElement("input",{id:r+"-username",type:"text",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)},readOnly:this.props.usernameReadOnly}))),se.a.createElement("div",{className:"replication__section"},se.a.createElement("div",{className:"replication__input-label"}),se.a.createElement("div",null,se.a.createElement("input",{id:r+"-password",type:"password",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),n}(se.a.Component);TT.propTypes={auth:xt.a.object.isRequired,onChange:xt.a.func.isRequired};var PT=Ra.ConfirmButton,IT=function(e){var t=e.visible,n=e.onClose,r=e.onClick,o=e.multipleDocs,i=e.isReplicationDB;if(!t)return null;var a="",c="Delete ".concat(i?"Document":"Replication Job"),s="Deleting a replication ".concat(i?"document":"job"," stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.");return o>1&&(a="You are deleting <strong>".concat(o,"</strong> replication ").concat(i?"documents":"jobs","."),c="Delete ".concat(i?"Documents":"Replication Jobs")),se.a.createElement(sn.f,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,"Verify Deletion")),se.a.createElement(sn.f.Body,null,se.a.createElement("p",{dangerouslySetInnerHTML:{__html:a}}),se.a.createElement("p",null,s)),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),se.a.createElement(PT,{customIcon:"icon-trash",text:c,onClick:r})))};IT.propTypes={visible:xt.a.bool.isRequired,isReplicationDB:xt.a.bool.isRequired,onClick:xt.a.func.isRequired,onClose:xt.a.func.isRequired,multipleDocs:xt.a.number.isRequired},IT.defaultProps={isReplicationDB:!0};var xT=function(e){var t=e.visible,n=e.onClose,r=e.errorMsg,o=e.status;if(!t)return null;var i="Replication Error",a=se.a.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(i="Replication Error - Failed",a=null),se.a.createElement(sn.f,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,i)),se.a.createElement(sn.f.Body,null,se.a.createElement("p",null,r),a),se.a.createElement(sn.f.Footer,null))};xT.propTypes={visible:xt.a.bool.isRequired,onClick:xt.a.func.isRequired,onClose:xt.a.func.isRequired,errorMsg:xt.a.string.isRequired};var AT=function(e){var t=e.visible,n=e.docId,r=e.onClose,o=e.onClick;return t?se.a.createElement(sn.f,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return r()}},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,"Custom ID Conflict")),se.a.createElement(sn.f.Body,null,se.a.createElement("p",null,"A replication document with ID ",se.a.createElement("code",null,n)," already exists."),se.a.createElement("p",null,"You can overwrite the existing document, or change the new replication job’s document ID."),se.a.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),se.a.createElement(sn.f.Footer,null,se.a.createElement("button",{onClick:r,className:"btn replication__error-cancel"},"Change Document ID"),se.a.createElement("button",{onClick:o,className:"btn replication__error-continue"},se.a.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null};function kT(e){return(kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LT(e,t){return!t||"object"!==kT(t)&&"function"!=typeof t?MT(e):t}function MT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UT(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qT(e){return(qT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VT(e,t){return(VT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}AT.propTypes={visible:xt.a.bool.isRequired,onClick:xt.a.func.isRequired,onClose:xt.a.func.isRequired,docId:xt.a.string.isRequired};var FT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VT(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=qT(t);if(UT()){var r=qT(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return LT(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).submit=t.submit.bind(MT(t)),t.checkAuth=t.checkAuth.bind(MT(t)),t.runReplicationChecks=t.runReplicationChecks.bind(MT(t)),t}return n=c,(r=[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,r=t.replicationTarget,o=t.sourceAuthType,i=t.targetAuthType,a=t.sourceAuth,c=t.targetAuth,s=n===CC.REPLICATION_SOURCE.LOCAL,l=r===CC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!oe.session.isAdminParty()){if(s&&o===CC.REPLICATION_AUTH_METHOD.NO_AUTH)return void oe.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(l&&i===CC.REPLICATION_AUTH_METHOD.NO_AUTH)return void oe.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,a,"source",s).then((function(){e.checkLocalAccountCredentials(i,c,"target",l).then((function(){e.submit()}),(function(){}))}),(function(){}))}},{key:"checkLocalAccountCredentials",value:function(e,t,n,r){if(e!==CC.REPLICATION_AUTH_METHOD.BASIC||!r)return oe.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing ".concat(n," credentials.");return oe.addNotification({msg:o,type:"error",clear:!0}),oe.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then((function(e){if(e.error)throw e;return!0})).catch((function(e){throw oe.addNotification({msg:"Your username or password for ".concat(n," database is incorrect."),type:"error",clear:!0}),e}))}},{key:"checkCredentials",value:function(e,t){return v(R.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+RC.a.encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,r=t.replicationDocName,o=t.checkReplicationDocID;o(r).then((function(t){t?n():e.checkAuth()}))}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;this.checkSourceTargetDatabases()&&(e?this.checkReplicationDocID():this.checkAuth())}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,r=e.replicationSource,o=e.replicationTarget,i=e.localTarget,c=e.localSource,s=e.databases;if(o===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(s,i))return oe.addNotification({msg:"The <code>"+i+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(o===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE||o===CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var l="";if(/\s/.test(i)?l="The target database may not contain any spaces.":/^_/.test(i)&&(l="The target database may not start with an underscore."),l)return oe.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if(r===CC.REPLICATION_SOURCE.REMOTE&&!Object(a.isEmpty)(n)){var u="";try{""===new URL(n).pathname.slice(1)&&(u="Invalid source database URL. Database name is missing.")}catch(e){u="Invalid source database URL."}if(u)return oe.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}if((o===CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE||o===CC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)&&!Object(a.isEmpty)(t)){var p="";try{""===new URL(t).pathname.slice(1)&&(p="Invalid target database URL. Database name is missing.")}catch(e){p="Invalid target database URL."}if(p)return oe.addNotification({msg:p,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!Object(a.isEmpty)(t)||c===i&&!Object(a.isEmpty)(c))||(oe.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e,t=this.props,n=t.replicationTarget,r=t.replicationSource,o=t.replicationType,i=t.replicationDocName,a=t.remoteTarget,c=t.remoteSource,s=t.localTarget,l=t.localSource,u=t.sourceAuthType,p=t.sourceAuth,f=t.targetAuthType,d=t.targetAuth,m=t.targetDatabasePartitioned;if(i){var y=this.props.docs.find((function(e){return e._id===i}));y&&(e=y._rev)}this.props.replicate({replicationTarget:n,replicationSource:r,replicationType:o,replicationDocName:i,localTarget:s,localSource:l,remoteTarget:a,remoteSource:c,_rev:e,sourceAuthType:u,sourceAuth:p,targetAuthType:f,targetAuth:d,targetDatabasePartitioned:m})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,r=e.replicationSource,o=e.replicationTarget,i=e.localTargetKnown,a=e.localTarget;return!(e.submittedNoChange||!r||!o||r===CC.REPLICATION_SOURCE.LOCAL&&!n||o===CC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!i||o===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!a||r===CC.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,i=e.conflictModalVisible,a=e.databases,c=e.localSource,s=e.remoteSource,l=e.remoteTarget,u=e.localTarget,p=e.targetDatabasePartitioned,f=e.allowNewPartitionedLocalDbs,d=e.updateFormField,m=e.clearReplicationForm,y=e.sourceAuthType,h=e.sourceAuth,b=e.targetAuthType,g=e.targetAuth;return se.a.createElement("div",{style:{paddingBottom:20}},se.a.createElement(FC,{replicationSource:t,localSource:c,databases:a,remoteSource:s,onSourceSelect:d("replicationSource"),onRemoteSourceChange:d("remoteSource"),onLocalSourceChange:d("localSource")}),se.a.createElement(CT,{credentials:h,authType:y,onChangeAuthType:d("sourceAuthType"),onChangeAuth:d("sourceAuth"),authId:"replication-source-auth"}),se.a.createElement("hr",{className:"replication__seperator",size:"1"}),se.a.createElement(nT,{replicationTarget:n,onTargetChange:d("replicationTarget"),databases:a,localTarget:u,remoteTarget:l,allowNewPartitionedLocalDbs:f,targetDatabasePartitioned:p,onRemoteTargetChange:d("remoteTarget"),onLocalTargetChange:d("localTarget"),onTargetDatabasePartitionedChange:d("targetDatabasePartitioned")}),se.a.createElement(CT,{credentials:g,authType:b,onChangeAuthType:d("targetAuthType"),onChangeAuth:d("targetAuth"),authId:"replication-target-auth"}),se.a.createElement("hr",{className:"replication__seperator",size:"1"}),se.a.createElement(dT,{replicationType:r,replicationDocName:o,onDocChange:d("replicationDocName"),onTypeChange:d("replicationType")}),se.a.createElement(yT,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:m}),se.a.createElement(AT,{visible:i,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}])&&jT(n.prototype,r),o&&jT(n,o),c}(se.a.Component);function BT(e){return(BT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var KT=null,HT=function(e){return KT&&!e||(KT=new oe.Promise((function(e){var t=R.getServerUrl("/_scheduler/jobs");E(t,{raw:!0}).then((function(t){if(t.status>202)return e(!1);e(!0)}))}))),KT},zT=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(encodeURIComponent(t.pathname.slice(1)))},GT=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))},WT=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},XT=function(e){var t=e.replicationSource,n=e.localSource,r=e.remoteSource,o=e.sourceAuthType,i=e.sourceAuth,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,c=a.origin,s=a.pathname,l={};if(t===CC.REPLICATION_SOURCE.LOCAL){var u=encodeURIComponent(n),p=R.getRootUrl({origin:c,pathname:s});l.url="".concat(p).concat(u)}else l.url=zT(WT(r));return JT(l,o,i),l},QT=function(e){var t=e.replicationTarget,n=e.localTarget,r=e.remoteTarget,o=e.targetAuthType,i=e.targetAuth,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,c=a.origin,s=a.pathname,l={};if(t===CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===CC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)l.url=zT(WT(r));else{var u=encodeURIComponent(n),p=R.getRootUrl({origin:c,pathname:s});l.url="".concat(p).concat(u)}return JT(l,o,i),l},JT=function(e,t,n){if(t&&t!==CC.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===CC.REPLICATION_AUTH_METHOD.BASIC)e.headers=(o=n.username,i=n.password,o&&i?{Authorization:"Basic "+RC.a.encode(o+":"+i)}:{});else{var r=oe.getExtensions("Replication:Auth");r&&r.filter((function(e){return e.typeValue===t})).map((function(t){t.setCredentials&&t.setCredentials(e,n)}))}else e.headers={};var o,i},YT=function(e){return-1!==c.a.indexOf([CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE,CC.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},$T=function(e){return e===CC.REPLICATION_TYPE.CONTINUOUS},ZT=function(e){var t=e.replicationTarget,n=e.replicationSource,r=e.replicationType,o=e.replicationDocName,i=e.localTarget,a=e.localSource,c=e.remoteTarget,s=e.remoteSource,l=e._rev,u=e.sourceAuthType,p=e.sourceAuth,f=e.targetAuthType,d=e.targetAuth,m=e.targetDatabasePartitioned,y={user_ctx:{name:oe.session.user().name,roles:["_admin","_reader","_writer"]},source:XT({replicationSource:n,localSource:a,remoteSource:s,sourceAuthType:u,sourceAuth:p}),target:QT({replicationTarget:t,replicationSource:n,remoteTarget:c,localTarget:i,targetAuthType:f,targetAuth:d}),create_target:YT(t),continuous:$T(r)};return m&&(y.create_target_params={partitioned:!0}),function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n}(o,l,y)},eP=function(e){var t=e;return e?("object"===BT(e)&&(t=e.url),function(e){try{var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))}catch(t){return e}}(t)):""},tP=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},nP=function(){return HT().then((function(e){var t=R.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=100"),n=E(t).then((function(e){return e.error?[]:e.rows.filter((function(e){return-1===e.id.indexOf("_design/")})).map((function(e){return e.doc})).map((function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:eP(e.source),target:eP(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/".concat(encodeURIComponent(e._id)),raw:e}}))}));if(!e)return n;var r=rP();return oe.Promise.join(n,r,(function(e,t){return function(e,t){return e.map((function(e){var n=t.find((function(t){return t.doc_id===e._id}));return n?(e.status=tP(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e}))}(e,t)})).catch((function(){return[]}))}))},rP=function(){var e=R.getServerUrl("/_scheduler/docs?include_docs=true");return E(e).then((function(e){return e.error?[]:e.docs}))},oP=function(e){return new Promise((function(t){var n=R.getServerUrl("/_replicator/".concat(e));E(n).then((function(e){"not_found"!==e.error?t(!0):t(!1)}))}))},iP=function(){return HT().then((function(e){if(!e)return[];var t=R.getServerUrl("/_scheduler/jobs");return E(t).then((function(e){return function(e){return e.jobs.filter((function(e){return null===e.database})).map((function(e){return{_id:e.id,source:eP(e.source.slice(0,e.source.length-1)),target:eP(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:tP(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}}))}(e)}))}))};function aP(e){return(aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lP(e,t,n){return t&&sP(e.prototype,t),n&&sP(e,n),e}function uP(e){return function(){var t,n=dP(e);if(fP()){var r=dP(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return pP(this,t)}}function pP(e,t){return!t||"object"!==aP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function dP(e){return(dP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yP(e,t)}function yP(e,t){return(yP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hP=function(e){var t,n;try{t=new URL(WT(e))}catch(e){return""}var r=R.getRootUrl();return n=function(e,t){try{var n=new URL(t),r=e.pathname.substring(n.pathname.length);return encodeURIComponent(r)}catch(e){return""}}(t,r),e.indexOf(window.location.hostname)>-1?se.a.createElement("span",null,r,se.a.createElement("a",{href:"#/database/".concat(n,"/_all_docs")},decodeURIComponent(n))):"".concat(t.origin).concat(t.pathname)},bP=function(e){mP(n,e);var t=uP(n);function n(e){var r;return cP(this,n),(r=t.call(this,e)).state={modalVisible:!1},r}return lP(n,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:se.a.createElement("span",null,se.a.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),se.a.createElement(xT,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,r=m()(t),o=se.a.createElement("span",null,n);if(r.isValid()){var i=r.format("MMM Do, h:mm a"),a=se.a.createElement(sn.k,{id:""},"Last updated: ",i);o=se.a.createElement(sn.h,{placement:"top",overlay:a},se.a.createElement("span",null,n))}return se.a.createElement("td",{className:"replication__row-status replication__row-status--".concat(n)},o,this.getErrorIcon())}}]),n}(se.a.Component);bP.propTypes={statusTime:xt.a.any,status:xt.a.string,errorMsg:xt.a.string.isRequired},bP.defaultProps={status:""};var gP=function(e){var t=e.onlyDeleteAction,n=e._id,r=e.url,o=e.deleteDocs,i=[];return t||(i.push(se.a.createElement("li",{className:"replication__row-list",key:1},se.a.createElement("a",{href:"#replication/id/".concat(encodeURIComponent(n)),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),i.push(se.a.createElement("li",{className:"replication__row-list",key:2},se.a.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:r,"data-bypass":"true"})))),i.push(se.a.createElement("li",{className:"replication__row-list",key:3},se.a.createElement("a",{className:"replication__row-btn icon-trash ".concat(t?"replication__row-btn--no-left-pad":""," "),title:"Delete ".concat(t?"job":"document"," ").concat(n),onClick:function(){return o(n)}}))),se.a.createElement("ul",{className:"replication__row-actions-list"},i)};gP.propTypes={_id:xt.a.string.isRequired,url:xt.a.string,error:xt.a.bool.isRequired,errorMsg:xt.a.string.isRequired,deleteDocs:xt.a.func.isRequired};var vP=function(e){var t=e._id,n=e.source,r=e.target,o=e.type,i=e.startTime,a=e.status,c=e.statusTime,s=e.url,l=e.selected,u=e.selectDoc,p=e.errorMsg,f=e.deleteDocs,d=e.onlyDeleteAction,y=e.showStateRow,h=m()(i),b=h.isValid()?h.format("MMM Do, h:mm a"):"",g=null;return y&&(g=se.a.createElement(bP,{statusTime:c,status:a,errorMsg:p})),se.a.createElement("tr",{className:"replication__table-row"},se.a.createElement("td",{className:"replication__table-col"},se.a.createElement("input",{checked:l,type:"checkbox",onChange:function(){return u(t)}})," "),se.a.createElement("td",{className:"replication__table-col"},hP(n)),se.a.createElement("td",{className:"replication__table-col"},hP(r)),se.a.createElement("td",{className:"replication__table-col"},b),se.a.createElement("td",{className:"replication__table-col"},o),g,se.a.createElement("td",{className:"replication__table-col"},se.a.createElement(gP,{onlyDeleteAction:d,deleteDocs:f,_id:t,url:s,error:"error"===a||"retrying"===a,errorMsg:p})))};vP.propTypes={_id:xt.a.string.isRequired,source:xt.a.string.isRequired,target:xt.a.string.isRequired,type:xt.a.string.isRequired,status:xt.a.string,url:xt.a.string,statusTime:xt.a.object.isRequired,startTime:xt.a.object,selected:xt.a.bool.isRequired,selectDoc:xt.a.func.isRequired,errorMsg:xt.a.string.isRequired,deleteDocs:xt.a.func.isRequired,onlyDeleteAction:xt.a.bool.isRequired,showStateRow:xt.a.bool.isRequired};var EP=function(e){var t=e.isSelected,n=e.deleteDocs,r=e.someDocsSelected,o=e.onCheck,i=r?se.a.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return se.a.createElement("div",{className:"replication__bulk-select-wrapper"},se.a.createElement("div",{className:"replication__bulk-select-header"},se.a.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),i)};EP.propTypes={isSelected:xt.a.bool.isRequired,someDocsSelected:xt.a.bool.isRequired,onCheck:xt.a.func.isRequired,deleteDocs:xt.a.func.isRequired};var _P=function(e){var t=e.msg;return se.a.createElement("tr",null,se.a.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};_P.defaultProps={msg:"There is no replicator-db activity or history to display."};var wP=function(e){mP(n,e);var t=uP(n);function n(e){return cP(this,n),t.call(this,e)}return lP(n,[{key:"sort",value:function(e,t,n){var r=!1,o=n.sort((function(t,n){return t[e]<n[e]?(r=!0,-1):t[e]>n[e]?(r=!0,1):0}));return!t&&r&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?se.a.createElement(_P,null):this.sort(this.props.column,this.props.descending,this.props.docs).map((function(t,n){return se.a.createElement(vP,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})}))}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?se.a.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",se.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("status")," ").concat(this.isSelected("status"))})):null}},{key:"render",value:function(){return se.a.createElement(sn.j,{striped:!0},se.a.createElement("thead",null,se.a.createElement("tr",null,se.a.createElement("th",{className:"replication__table-bulk-select"},se.a.createElement(EP,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),se.a.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",se.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("source")," ").concat(this.isSelected("source"))})),se.a.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",se.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("target")," ").concat(this.isSelected("target"))})),se.a.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",se.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("statusTime")," ").concat(this.isSelected("statusTime"))})),se.a.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",se.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("continuous")," ").concat(this.isSelected("continuous"))})),this.stateCol(),se.a.createElement("th",{className:"replication__table-header-actions"},"Actions"))),se.a.createElement("tbody",null,this.renderRows()))}}]),n}(se.a.Component);wP.defaultProps={onlyDeleteAction:!1,showStateRow:!0};var OP=function(e){var t=e.value,n=e.onChange;return se.a.createElement("div",{className:"replication__filter"},se.a.createElement("i",{className:"replication__filter-icon fonticon-filter"}),se.a.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};OP.propTypes={value:xt.a.string.isRequired,onChange:xt.a.func.isRequired};var SP=function(e){var t=e.filter,n=e.onFilterChange;return se.a.createElement("div",{className:"replication__activity_header"},se.a.createElement("div",null),se.a.createElement(OP,{value:t,onChange:n}),se.a.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},se.a.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))};function DP(e){return(DP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RP(e,t){return!t||"object"!==DP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function TP(e){return(TP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PP(e,t){return(PP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}SP.propTypes={filter:xt.a.string.isRequired,onFilterChange:xt.a.func.isRequired};var IP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PP(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=TP(t);if(CP()){var r=TP(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return RP(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return n=a,(r=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,i=e.filter,a=e.selectAllDocs,c=e.someDocsSelected,s=e.allDocsSelected,l=e.selectDoc,u=this.state.modalVisible;return se.a.createElement("div",{className:"replication__activity"},se.a.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table."),se.a.createElement(SP,{filter:i,onFilterChange:t}),se.a.createElement(wP,{someDocsSelected:c,allDocsSelected:s,selectAllDocs:a,docs:o,selectDoc:l,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),se.a.createElement(IT,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:u,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}])&&NP(n.prototype,r),o&&NP(n,o),a}(se.a.Component);function xP(e){return(xP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kP(e,t){return!t||"object"!==xP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function LP(e){return(LP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MP(e,t){return(MP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}IP.propTypes={docs:xt.a.array.isRequired,filter:xt.a.string.isRequired,selectAllDocs:xt.a.func.isRequired,allDocsSelected:xt.a.bool.isRequired,someDocsSelected:xt.a.bool.isRequired,selectDoc:xt.a.func.isRequired,onFilterChange:xt.a.func.isRequired,deleteDocs:xt.a.func.isRequired,activitySort:xt.a.object.isRequired,changeActivitySort:xt.a.func.isRequired};var UP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MP(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=LP(t);if(jP()){var r=LP(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return kP(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return n=a,(r=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,i=e.filter,a=e.selectAllDocs,c=e.someDocsSelected,s=e.allDocsSelected,l=e.selectDoc,u=this.state.modalVisible;return se.a.createElement("div",{className:"replication__activity"},se.a.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),se.a.createElement(SP,{filter:i,onFilterChange:t}),se.a.createElement(wP,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:c,allDocsSelected:s,selectAllDocs:a,docs:o,selectDoc:l,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),se.a.createElement(IT,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:u,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}])&&AP(n.prototype,r),o&&AP(n,o),a}(se.a.Component);function qP(e){return(qP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BP(e,t){return!t||"object"!==qP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function HP(e){return(HP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zP(e,t){return(zP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}UP.propTypes={docs:xt.a.array.isRequired,filter:xt.a.string.isRequired,selectAllDocs:xt.a.func.isRequired,allDocsSelected:xt.a.bool.isRequired,someDocsSelected:xt.a.bool.isRequired,selectDoc:xt.a.func.isRequired,onFilterChange:xt.a.func.isRequired,deleteDocs:xt.a.func.isRequired,activitySort:xt.a.object.isRequired,changeActivitySort:xt.a.func.isRequired};var GP=Ra.LoadLines,WP=Ra.Polling,XP=Ra.RefreshBtn,QP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zP(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=HP(t);if(KP()){var r=HP(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return BP(this,e)});function a(){return VP(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,i=e.databases,a=e.localSource,c=e.remoteSource,s=e.remoteTarget,l=e.localTarget,u=e.statusDocs,p=e.statusFilter,f=e.loading,d=e.allDocsSelected,m=e.someDocsSelected,y=e.showConflictModal,h=e.localSourceKnown,b=e.localTargetKnown,g=e.updateFormField,v=e.authenticated,E=e.activityLoading,_=e.submittedNoChange,w=e.activitySort,O=e.tabSection,S=e.replicateInfo,D=e.replicateLoading,N=e.replicateFilter,R=e.allReplicateSelected,C=e.someReplicateSelected,T=e.hideConflictModal,P=e.isConflictModalVisible,I=e.filterDocs,x=e.filterReplicate,A=e.replicate,k=e.clearReplicationForm,j=e.selectAllDocs,L=e.changeActivitySort,M=e.selectDoc,U=e.deleteDocs,q=e.deleteReplicates,V=e.selectAllReplicates,F=e.selectReplicate,B=e.sourceAuthType,K=e.sourceAuth,H=e.targetAuthType,z=e.targetAuth,G=e.targetDatabasePartitioned,W=e.allowNewPartitionedLocalDbs;return"new replication"===O?f?se.a.createElement(GP,null):se.a.createElement(FT,{docs:u,localTargetKnown:b,localSourceKnown:h,clearReplicationForm:k,replicate:A,replicationSource:t,replicationTarget:n,replicationType:r,replicationDocName:o,databases:i,localSource:a,remoteSource:c,remoteTarget:s,localTarget:l,sourceAuthType:B,sourceAuth:K,targetAuthType:H,targetAuth:z,targetDatabasePartitioned:G,allowNewPartitionedLocalDbs:W,updateFormField:g,conflictModalVisible:P,hideConflictModal:T,showConflictModal:y,checkReplicationDocID:oP,authenticated:v,submittedNoChange:_}):"_replicate"===O?D?se.a.createElement(GP,null):se.a.createElement(UP,{docs:S,filter:N,onFilterChange:x,selectDoc:F,selectAllDocs:V,allDocsSelected:R,someDocsSelected:C,activitySort:w,changeActivitySort:L,deleteDocs:q}):E?se.a.createElement(GP,null):se.a.createElement(IP,{docs:u,filter:p,onFilterChange:I,selectAllDocs:j,selectDoc:M,allDocsSelected:d,someDocsSelected:m,deleteDocs:U,activitySort:w,changeActivitySort:L})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return R.isIE1X()&&(e+=" "+e+"--ie1X"),se.a.createElement("div",{className:e},se.a.createElement(WP,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),se.a.createElement(XP,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[se.a.createElement(Mi,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(se.a.createElement(Mi,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){oe.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:se.a.createElement(qi,null,this.getTabElements())}},{key:"render",value:function(){return this.props.checkingAPI?se.a.createElement(GP,null):se.a.createElement($t,null,se.a.createElement(Zt,{crumbs:this.getCrumbs()},this.getHeaderComponents()),se.a.createElement(en,null,se.a.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),se.a.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}])&&FP(n.prototype,r),o&&FP(n,o),a}(se.a.Component),JP="INIT_REPLICATION",YP="REPLICATION_DATABASES_LOADED",$P="REPLICATION_UPDATE_FORM_FIELD",ZP="REPLICATION_CLEAR_FORM",eI="REPLICATION_STARTING",tI="REPLICATION_STATUS",nI="REPLICATION_FETCHING_STATUS",rI="REPLICATION_FILTER_DOCS",oI="REPLICATION_TOGGLE_ALL_DOCS",iI="REPLICATION_TOGGLE_DOC",aI="REPLICATION_SET_STATE_FROM_DOC",cI="REPLICATION_SHOW_CONFLICT_MODAL",sI="REPLICATION_HIDE_CONFLICT_MODAL",lI="REPLICATION_CHANGE_ACTIVITY_SORT",uI="REPLICATION_CLEAR_SELECTED_DOCS",pI="REPLICATION_CHANGE_TAB_SECTION",fI="REPLICATION_FETCHING_REPLICATE_STATUS",dI="REPLICATION_REPLICATE_STATUS",mI="REPLICATION_SUPPORT_NEW_API",yI="REPLICATION_FILTER_REPLICATE",hI="REPLICATION_TOGGLE_ALL_REPLICATE",bI="REPLICATION_TOGGLE_REPLICATE",gI="REPLICATION_CLEAR_SELECTED_REPLICATES",vI="REPLICATION_FETCHING_FORM_STATE",EI=function(e){var t=c.a.isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()},_I=function e(t){return function(n){var r=ZT(t),o=R.getServerUrl("/_replicator"),i=O(o,r),a=EI(r.source),c=EI(r.target);n({type:eI});var s=function(e){oe.addNotification({msg:e.reason,type:"error",clear:!0})};return i.then((function(e){if(!e.ok)throw e;oe.addNotification({msg:"Replication from <code>".concat(decodeURIComponent(a),"</code> to <code>").concat(decodeURIComponent(c),"</code> has been scheduled."),type:"success",escape:!1,clear:!0}),n(wI()),oe.navigate("#/replication")})).catch((function(r){if(r.error&&"not_found"===r.error)return function(){var e=R.getServerUrl("/_replicator");return S(e).then((function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0}))}().then((function(){return e(t)(n)})).catch(s);s(r)}))}},wI=function(){return function(e){e({type:nI}),HT().then((function(e){return nP()})).then((function(t){e({type:tI,options:t})}))}},OI=function(){return function(e){HT().then((function(t){t&&(e({type:fI}),iP().then((function(t){e({type:dI,options:t})})))}))}},SI=function(e){return function(t){var n=e.map((function(e){var t=e.raw;return t._deleted=!0,t}));oe.addNotification({msg:"Deleting doc".concat(n.length>1?"s":"","."),type:"success",escape:!1,clear:!0});var r=R.getServerUrl("/_replicator/_bulk_docs");O(r,{docs:n},{raw:!0}).then((function(e){if(!e.ok)throw e;return e})).then((function(){var n="The selected documents have been deleted.";1===e.length&&(n="Document <code>".concat(e[0]._id,"</code> has been deleted")),oe.addNotification({msg:n,type:"success",escape:!1,clear:!0}),t({type:uI}),t(wI())})).catch((function(e){e.json().then((function(e){oe.addNotification({msg:e.reason,type:"error",clear:!0})}))}))}},DI=function(e){return function(t){oe.addNotification({msg:"Deleting _replicate".concat(e.length>1?"s":"","."),type:"success",escape:!1,clear:!0}),function(e){var t=e.map((function(e){var t={replication_id:e._id,cancel:!0},n=R.getServerUrl("/_replicate");return O(n,t)}));return oe.Promise.all(t)}(e).then((function(){var n="The selected replications have been deleted.";1===e.length&&(n="Replication <code>".concat(e[0]._id,"</code> has been deleted")),t({type:gI}),t(OI()),oe.addNotification({msg:n,type:"success",escape:!1,clear:!0})}),(function(e){var t=JSON.parse(e.responseText);oe.addNotification({msg:t.reason,type:"error",clear:!0})}))}},NI=function(e){var t={type:CC.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6),r=RC.a.decode(n);return t.type=CC.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:r.split(":")[0],password:r.split(":")[1]},t}var o=oe.getExtensions("Replication:Auth"),i=void 0,a=void 0;return o&&o.map((function(t){!i&&t.getCredentials&&(i=t.getCredentials(e),a=t.typeValue)})),i&&(t.type=a,t.creds=i),t},RI=function(){return function(e){HT().then((function(t){e({type:mI,options:t})}))}};function CI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CI(Object(n),!0).forEach((function(t){PI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var II=function(e){ae.utils.localStorageSet("replication-activity-sort",e)},xI=function(){var e=ae.utils.localStorageGet("replication-activity-sort");return e||(e={descending:!1,column:"statusTime"}),II(e),e},AI={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth",targetDatabasePartitioned:"targetDatabasePartitioned"},kI={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:CC.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:CC.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},targetDatabasePartitioned:!1,isConflictModalVisible:!1,replicationType:CC.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:xI()},jI=function(e){var t=TI({},e);return Object.values(AI).forEach((function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:"targetDatabasePartitioned"!==e&&""})),t.sourceAuthType=CC.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=CC.REPLICATION_AUTH_METHOD.NO_AUTH,t},LI=function(e,t,n){var r=TI({},e,{submittedNoChange:!1});if(r[AI[t]]=n,t===AI.sourceAuthType||t===AI.replicationSource){var o=r[AI.sourceAuthType]===CC.REPLICATION_AUTH_METHOD.BASIC,i=r[AI.replicationSource]===CC.REPLICATION_SOURCE.LOCAL,a=!r[AI.sourceAuth]||!r[AI.sourceAuth].username;o&&i&&a&&(r[AI.sourceAuth]={username:oe.session.user().name,password:""})}else if(t===AI.targetAuthType||t===AI.replicationTarget){var c=r[AI.targetAuthType]===CC.REPLICATION_AUTH_METHOD.BASIC,s=r[AI.replicationTarget]===CC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r[AI.replicationTarget]===CC.REPLICATION_TARGET.NEW_LOCAL_DATABASE,l=!r[AI.targetAuth]||!r[AI.targetAuth].username;c&&s&&l&&(r[AI.targetAuth]={username:oe.session.user().name,password:""})}return r},MI=function(e,t){var n=e.statusDocs.find((function(e){return e._id===t}));return n?(n.selected=!n.selected,TI({},e,{allDocsSelected:!1})):e},UI=function(e){var t=TI({},e,{allDocsSelected:!e.allDocsSelected});return nx(t).forEach((function(e){return e.selected=t.allDocsSelected})),t},qI=function(e,t){var n=TI({},e),r=n._replicateInfo.find((function(e){return e._id===t}));if(!r)return n;r.selected=!r.selected,n._allReplicateSelected=!1},VI=function(e){var t=TI({},e,{allReplicateSelected:!e.allReplicateSelected});return yx(t).forEach((function(e){return e.selected=t.allReplicateSelected})),t},FI=function(e,t){var n=TI({},e,{loading:!1});return Object.keys(t).reduce((function(e,n){return LI(e,n,t[n])}),n)},BI=function(e){return e.activityLoading},KI=function(e){return e.databases},HI=function(e){return e.replicationSource},zI=function(e){return e.localSource},GI=function(e){return-1!==_.indexOf(e.databases,e.localSource)},WI=function(e){return e.remoteSource},XI=function(e){return e.replicationTarget},QI=function(e){return e.localTarget},JI=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},YI=function(e){return e.remoteTarget},$I=function(e){return e.isConflictModalVisible},ZI=function(e){return e.replicationType},ex=function(e){return e.replicationDocName},tx=function(e){return e.submittedNoChange},nx=function(e){return e.statusDocs.filter((function(t){return Object.values(t).filter((function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null})).length>0}))},rx=function(e){return e.statusFilter},ox=function(e){return e.replicateFilter},ix=function(e){return e.allDocsSelected},ax=function(e){return nx(e).some((function(e){return e.selected}))},cx=function(e){return e.username},sx=function(e){return e.password},lx=function(e){return e.activitySort},ux=function(e){return e.checkingAPI},px=function(e){return e.supportNewApi},fx=function(e){return e.fetchingReplicateInfo},dx=function(e){return e.allReplicateSelected},mx=function(e){return yx(e).some((function(e){return e.selected}))},yx=function(e){return e.replicateInfo.filter((function(t){return Object.values(t).filter((function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)})).length>0}))},hx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kI,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case JP:var o=TI({},e,{loading:!0});return r.localSource&&(o.localSource=r.localSource,o.replicationSource=CC.REPLICATION_SOURCE.LOCAL,o.remoteSource="",o.replicationTarget="",o.localTarget="",o.remoteTarget=""),o;case YP:return TI({},e,{loading:!1,databases:r.databases});case vI:return TI({},e,{loading:!0});case $P:return LI(e,r.fieldName,r.value);case ZP:return jI(e);case eI:return TI({},e,{submittedNoChange:!0});case nI:return TI({},e,{activityLoading:!0});case tI:return TI({},e,{activityLoading:!1,statusDocs:r});case rI:return TI({},e,{statusFilter:r});case yI:return TI({},e,{replicateFilter:r});case iI:return MI(e,r);case oI:return UI(e);case bI:return qI(e,r);case hI:return VI(e);case aI:return FI(e,r);case cI:return TI({},e,{isConflictModalVisible:!0});case sI:return TI({},e,{isConflictModalVisible:!1});case lI:return II(r),TI({},e,{activitySort:xI()});case uI:return TI({},e,{allDocsSelected:!1});case pI:return TI({},e,{tabSection:r});case mI:return TI({},e,{checkingApi:!1,supportNewApi:r});case fI:return TI({},e,{fetchingReplicateInfo:!0});case dI:return TI({},e,{fetchingReplicateInfo:!1,replicateInfo:r});case gI:return TI({},e,{allReplicateSelected:!1});default:return e}},bx=Object(At.b)((function(e,t){var n,r=e.replication;return{allowNewPartitionedLocalDbs:e.databases.partitionedDatabasesAvailable,routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(n=r,n.isLoading),activityLoading:BI(r),databases:KI(r),replicationSource:HI(r),localSource:zI(r),localSourceKnown:GI(r),remoteSource:WI(r),sourceAuthType:r.sourceAuthType,sourceAuth:r.sourceAuth,replicationTarget:XI(r),localTarget:QI(r),localTargetKnown:JI(r),remoteTarget:YI(r),targetAuthType:r.targetAuthType,targetAuth:r.targetAuth,targetDatabasePartitioned:r.targetDatabasePartitioned,isConflictModalVisible:$I(r),replicationType:ZI(r),replicationDocName:ex(r),submittedNoChange:tx(r),statusDocs:nx(r),statusFilter:rx(r),replicateFilter:ox(r),allDocsSelected:ix(r),someDocsSelected:ax(r),username:cx(r),password:sx(r),activitySort:lx(r),checkingApi:ux(r),supportNewApi:px(r),replicateLoading:fx(r),replicateInfo:yx(r),allReplicateSelected:dx(r),someReplicateSelected:mx(r)}}),(function(e){return{checkForNewApi:function(){return e(RI())},updateFormField:function(t){return function(n){e(function(e,t){return{type:$P,options:{fieldName:e,value:t}}}(t,n))}},clearReplicationForm:function(){return e({type:ZP})},initReplicator:function(t){return e(function(e,t){return function(n){e&&e!==t&&n({type:JP,options:{localSource:e}})}}(t))},getReplicationActivity:function(){return e(wI())},getReplicateActivity:function(){return e(OI())},getReplicationStateFrom:function(t){return e(function(e){return function(t){t({type:vI});var n=R.getServerUrl("/_replicator/".concat(encodeURIComponent(e)));E(n).then((function(e){var n={replicationDocName:e._id,replicationType:e.continuous?CC.REPLICATION_TYPE.CONTINUOUS:CC.REPLICATION_TYPE.ONE_TIME},r=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(r.indexOf(window.location.hostname)>-1){var i=new URL(r);n.replicationSource=CC.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(i.pathname.slice(1))}else n.replicationSource=CC.REPLICATION_SOURCE.REMOTE,n.remoteSource=GT(r);var a=NI(e.source);if(n.sourceAuthType=a.type,n.sourceAuth=a.creds,o.indexOf(window.location.hostname)>-1){var c=new URL(o);n.replicationTarget=CC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(c.pathname.slice(1))}else n.replicationTarget=CC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=GT(o);var s,l=NI(e.target);n.targetAuthType=l.type,n.targetAuth=l.creds,n.targetDatabasePartitioned=!(!(s=e.create_target_params)||!0!==s.partitioned),t({type:aI,options:n})})).catch((function(e){oe.addNotification({msg:e.reason,type:"error",clear:!0})}))}}(t))},getDatabasesList:function(){return e((function(e){var t=R.getServerUrl("/_all_dbs");E(t).then((function(t){e({type:YP,options:{databases:t}})}))}))},replicate:function(t){return e(_I(t))},showConflictModal:function(){return e({type:cI})},hideConflictModal:function(){return e({type:sI})},filterReplicate:function(t){return e(function(e){return{type:yI,options:e}}(t))},filterDocs:function(t){return e(function(e){return{type:rI,options:e}}(t))},selectDoc:function(t){return e({type:iI,options:t})},deleteDocs:function(t){return e(SI(t))},selectAllDocs:function(){return e({type:oI})},changeActivitySort:function(t){return e(function(e){return{type:lI,options:e}}(t))},selectAllReplicates:function(){return e({type:hI})},deleteReplicates:function(t){return e(DI(t))},selectReplicate:function(t){return e({type:bI,options:t})}}}))(QP),gx={RouteObjects:[oe.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return se.a.createElement(bx,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return se.a.createElement(bx,{replicationId:e,section:"new replication"})},activityView:function(){return se.a.createElement(bx,{section:"activity"})},replicateView:function(){return se.a.createElement(bx,{section:"_replicate"})}})]};n(618);gx.initialize=function(){oe.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),oe.session.isAuthenticated().then((function(){RI()}))},oe.addReducers({replication:hx}),oe.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return R.getApiUrl("/_replicator")}});var vx=gx,Ex="SEARCH_INDEX_DESIGN_DOCS_LOADED",_x="SEARCH_INDEX_INIT",wx="SEARCH_INDEX_SELECT_TAB",Ox="SEARCH_INDEX_SET_NAME",Sx="SEARCH_INDEX_SET_ANALYZER_TYPE",Dx="SEARCH_INDEX_ADD_ANALYZER_ROW",Nx="SEARCH_INDEX_REMOVE_ANALYZER_ROW",Rx="SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME",Cx="SEARCH_INDEX_SET_ANALYZER_ROW",Tx="SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER",Px="SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX",Ix="SEARCH_INDEX_PREVIEW_MODEL_UPDATED",xx="SEARCH_INDEX_PREVIEW_REQUEST_MADE",Ax="PREVIEW_MODEL_REQUEST_ERROR",kx="SEARCH_INDEX_SELECT_DESIGN_DOC",jx="SEARCH_INDEX_SET_SINGLE_ANALYZER",Lx="SEARCH_INDEX_SET_SEARCH_QUERY",Mx="SEARCH_INDEX_SET_LOADING",Ux="SEARCH_INDEX_CLEAR",qx="SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED",Vx="SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED",Fx="SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED",Bx="SEARCH_INDEX_PARTITION_PARAM_MANDATORY",Kx="single",Hx="multiple",zx="newSearch",Gx="single",Wx="standard",Xx='function (doc) {\n  index("name", doc.name);\n}',Qx=[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}},{label:"Single field (text)",code:{index:{fields:[{name:"foo",type:"string"}]},name:"foo-text",type:"text"}},{label:"All fields (text)",code:{index:{default_field:{enabled:!1},index_array_lengths:!1},name:"all-text",type:"text"}},{label:"All fields with default field (text)",code:{index:{index_array_lengths:!1},name:"all-text",type:"text"}}];function Jx(e){return(Jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yx={};Yx.Doc=ht.Doc.extend({setIndex:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("indexes");return r||(r={}),r[e]||(r[e]={}),n&&(r[e].analyzer=n),r[e].index=t,this.set({indexes:r})},getIndex:function(e){return this.get("indexes")[e].index},getAnalyzer:function(e){return this.get("indexes")[e].analyzer},analyzerType:function(e){return"object"===Jx(this.getAnalyzer(e))?Hx:Kx},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new Yx.Doc(e,{database:this.database})}}),Yx.AllDocs=ht.AllDocs.extend({model:Yx.Doc});var $x=Yx;var Zx=function(e,t,n,r,o){var i=function(e,t,n,r,o){var i=t?encodeURIComponent(t):"";return oe.urls("search","server",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r),"?limit=10&q="+encodeURIComponent(o))}(e,t,n,r,o);return E(i).then((function(e){if(e.error)throw new Error(e.reason);return e.rows}))};function eA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nA=function(e,t,n,r,o,i){return i({type:xx}),Zx(e,t,n,r,o).then((function(e){i({type:Ix,options:{searchResults:e}})})).catch((function(t){i({type:Ax}),t&&-1!==t.message.indexOf("`partition` not supported")?i(rA()):t&&-1!==t.message.indexOf("`partition` parameter is mandatory")?i(oA()):oe.addNotification({msg:"Search failed: "+t.message,type:"error",clear:!0}),-1!==t.message.indexOf("not found")&&oe.navigate(oe.urls("allDocsSanitized","app",e),{trigger:!0})}))},rA=function(){return{type:Fx}},oA=function(){return{type:Bx}};var iA={dispatchInitNewSearchIndex:function(e){oe.reduxDispatch({type:Ux}),oe.reduxDispatch({type:Mx,options:{loading:!0}}),e.designDocs.fetch().then((function(){oe.reduxDispatch({type:Ex,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},dispatchInitSearchIndex:function(e){if(oe.reduxDispatch({type:Mx,options:{loading:!0}}),oe.reduxDispatch({type:_x,options:{databaseName:e.databaseName,partitionKey:e.partitionKey,ddocName:e.designDoc,indexName:e.indexName,searchQuery:e.query?e.query:""}}),e.query)return nA(e.databaseName,e.partitionKey,e.designDoc,e.indexName,e.query,oe.reduxDispatch)},dispatchEditSearchIndex:function(e){var t=new R_.DdocInfo({_id:e.ddocID},{database:e.database});oe.reduxDispatch({type:Mx,options:{loading:!0}}),oe.Promise.all([e.designDocs.fetch(),t.fetch()]).then((function(n){var r=eA(n,1)[0].rows.find((function(e){return e._id===t.id})).doc;if(!r.indexes||!r.indexes[e.indexName])throw Error('Index "'.concat(e.indexName,'" not found'));oe.reduxDispatch({type:Px,options:{indexName:e.indexName,database:e.database,ddocInfo:t,designDocs:e.designDocs}})})).catch((function(t){var n=t.message?t.message:"";oe.addNotification({msg:'There was a problem editing the search index "'.concat(e.indexName,'". ')+n,type:"error",clear:!0})}))},selectTab:function(e){return function(t){t({type:wx,options:{tab:e}})}},setSearchIndexName:function(e){return function(t){t({type:Ox,options:{value:e}})}},setAnalyzerType:function(e){return function(t){t({type:Sx,options:{value:e}})}},addAnalyzerRow:function(e){return function(t){t({type:Dx,options:{analyzer:e}})}},removeAnalyzerRow:function(e){return function(t){t({type:Nx,options:{rowIndex:e}})}},setAnalyzerRowFieldName:function(e){return function(t){t({type:Rx,options:{rowIndex:e.rowIndex,fieldName:e.fieldName}})}},setAnalyzer:function(e){return function(t){t({type:Cx,options:{rowIndex:e.rowIndex,analyzer:e.analyzer}})}},setDefaultMultipleAnalyzer:function(e){return function(t){t({type:Tx,options:{analyzer:e}})}},selectDesignDoc:function(e){return function(t){t({type:kx,options:{value:e}})}},saveSearchIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction,t.analyzerInfo),t.lastSavedDesignDocName===e.id&&t.lastSavedSearchIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedSearchIndexName],e.set({indexes:r})}e.save().then((function(){if(t.designDocs.add(e,{merge:!0}),oe.addNotification({msg:"The search index has been saved.",type:"success",clear:!0}),!t.isCreatingIndex&&t.lastSavedDesignDocName!==e.id){var r=pl.helpers.findDesignDoc(t.designDocs,t.lastSavedDesignDocName);pl.safeDeleteIndex(r,t.designDocs,"indexes",t.lastSavedSearchIndexName,{onSuccess:function(){es(t.designDocs)}})}es(t.designDocs),oe.navigate(n,{trigger:!0})}),(function(e){var t=JSON.parse(e.responseText).reason;oe.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},cloneSearchIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,indexes:{},language:"javascript"};return new $x.Doc(o,{database:r})}var i=e.find((function(e){return e.id===t}));return i?i.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("indexes");if(n&&_.has(n,e.newIndexName))oe.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=pl.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.indexes[e.sourceIndexName],t.set({indexes:n}),t.save().then((function(){e.onComplete(),oe.addNotification({msg:"The search index has been cloned.",type:"success",clear:!0}),es(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;oe.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},deleteSearchIndex:function(e){pl.safeDeleteIndex(e.designDoc,e.designDocs,"indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=oe.urls("allDocs","app",e.database.safeID());oe.navigate(t)}es(e.designDocs),oe.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> search index has been deleted.",type:"info",escape:!1,clear:!0}),os()}})},gotoEditSearchIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";oe.navigate("#"+oe.urls("search","edit",encodeURIComponent(e),o,encodeURIComponent(n),encodeURIComponent(r)))},querySearch:function(e,t,n,r,o){var i=encodeURIComponent(e),a=encodeURIComponent(t),c=encodeURIComponent(n),s=encodeURIComponent(r),l=encodeURIComponent(o),u=t?oe.urls("partitioned_search","app",i,a,c,s):oe.urls("search","app",i,c,s);oe.navigate("".concat(u).concat(s,"?").concat(l),{trigger:!0})},setSearchQuery:function(e){return function(t){t({type:Lx,options:{query:e}})}},setSingleAnalyzer:function(e){return function(t){t({type:jx,options:{analyzer:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:qx,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:Vx,options:{value:e}})}},partitionParamNotSupported:rA,partitionParamIsMandatory:oA};function aA(e){return(aA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lA(e,t){return!t||"object"!==aA(t)&&"function"!=typeof t?uA(e):t}function uA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function fA(e){return(fA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dA(e,t){return(dA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dA(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=fA(t);if(pA()){var r=fA(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return lA(this,e)});function a(){var e;cA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mA(uA(e=i.call.apply(i,[this].concat(n))),"querySearch",(function(t){if(t.preventDefault(),""===e.props.searchQuery.trim())return oe.addNotification({msg:"Please enter a search term.",type:"error",clear:!0}),void e.searchInput.focus();var n=e.props,r=n.databaseName,o=n.partitionKey,i=n.ddocName,a=n.indexName,c=n.searchQuery;e.props.querySearch(r,o,i,a,c)})),mA(uA(e),"getRows",(function(){var t=encodeURIComponent(e.props.databaseName);return e.props.searchResults.map((function(n){var r={header:n.id,content:JSON.stringify(n,null,"  "),url:oe.urls("document","app",t,encodeURIComponent(n.id))};return se.a.createElement(Ra.Document,{key:n.id,keylabel:"id:",doc:r,header:n.id,isDeletable:!1,docContent:r.content,onClick:e.onClick,docChecked:function(){},docIdentifier:n.id})}))})),mA(uA(e),"onClick",(function(e,t){t.url&&oe.navigate(t.url)})),mA(uA(e),"onType",(function(t){e.props.setSearchQuery(t.target.value)})),mA(uA(e),"getResults",(function(){return e.props.hasActiveQuery?se.a.createElement(Ra.LoadLines,null):e.props.noResultsWarning?se.a.createElement("div",{"data-select":"search-result-set"},e.props.noResultsWarning):!!e.props.searchResults&&(0===e.props.searchResults.length?se.a.createElement("div",{"data-select":"search-result-set"},"No results found."):se.a.createElement("div",{id:"doc-list","data-select":"search-result-set"},e.getRows()))})),e}return n=a,(r=[{key:"componentDidMount",value:function(){this.searchInput.focus()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){var e=this,t=this.props.hasActiveQuery?"Querying...":"Query";return se.a.createElement("div",null,se.a.createElement("form",{id:"search-index-preview-form"},se.a.createElement("span",{className:"input-append"},se.a.createElement("input",{className:"span4",ref:function(t){return e.searchInput=t},type:"text",placeholder:"Enter your search query",onChange:this.onType,value:this.props.searchQuery}),se.a.createElement("button",{className:"btn btn-primary",id:"search-index-query-button",type:"submit",disabled:this.props.hasActiveQuery,onClick:this.querySearch},t)),se.a.createElement("a",{className:"help-link","data-bypass":"true",href:oe.constants.DOC_URLS.SEARCH_INDEX_QUERIES,target:"_blank",rel:"noopener noreferrer"},se.a.createElement("i",{className:"icon-question-sign"}))),this.getResults())}}])&&sA(n.prototype,r),o&&sA(n,o),a}(se.a.Component);mA(yA,"propTypes",{hasActiveQuery:xt.a.bool.isRequired,searchQuery:xt.a.string.isRequired,searchPerformed:xt.a.bool.isRequired,querySearch:xt.a.func.isRequired,setSearchQuery:xt.a.func.isRequired,searchResults:xt.a.array});var hA=Object(At.b)((function(e){var t=e.search;return{databaseName:t.databaseName,partitionKey:t.partitionKey,ddocName:t.ddocName,indexName:t.indexName,hasActiveQuery:t.hasActiveQuery,searchQuery:t.searchQuery,searchPerformed:t.searchPerformed,searchResults:t.searchResults,noResultsWarning:t.noResultsWarning}}),(function(e){return{querySearch:function(e,t,n,r,o){iA.querySearch(e,t,n,r,o)},setSearchQuery:function(t){e(iA.setSearchQuery(t))}}}))(yA);function bA(e){return(bA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EA(e,t){return!t||"object"!==bA(t)&&"function"!=typeof t?_A(e):t}function _A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function OA(e){return(OA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SA(e,t){return(SA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NA=Ra.StyledSelect,RA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SA(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=OA(t);if(wA()){var r=OA(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return EA(this,e)});function a(){var e;gA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return DA(_A(e=i.call.apply(i,[this].concat(n))),"getAnalyzers",(function(){return["Standard","Keyword","Simple","Whitespace","Classic","Email"].map((function(e){return se.a.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),DA(_A(e),"getLanguages",(function(){return["Arabic","Armenian","Basque","Bulgarian","Brazilian","Catalan","Cjk","Chinese","Czech","Danish","Dutch","English","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Japanese","Latvian","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Spanish","Swedish","Thai","Turkish"].map((function(e){return se.a.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),DA(_A(e),"getLabel",(function(){return""===e.props.label?null:se.a.createElement("label",{htmlFor:e.props.id},e.props.label)})),e}return n=a,(r=[{key:"render",value:function(){var e=se.a.createElement("optgroup",{label:"Language-specific",key:"languages"},this.getLanguages());return se.a.createElement("div",{className:this.props.classes},this.getLabel(),se.a.createElement(NA,{selectChange:this.props.onChange,selectValue:this.props.defaultSelected,selectId:this.props.id,selectContent:[this.getAnalyzers(),e]}))}}])&&vA(n.prototype,r),o&&vA(n,o),a}(se.a.Component);function CA(e){return(CA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IA(e,t){return!t||"object"!==CA(t)&&"function"!=typeof t?xA(e):t}function xA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function kA(e){return(kA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jA(e,t){return(jA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}DA(RA,"defaultProps",{defaultSelected:"standard",label:"Type",id:"analyzer-default",classes:"",onChange:function(){}}),DA(RA,"propTypes",{defaultSelected:xt.a.string.isRequired,label:xt.a.string.isRequired,id:xt.a.string.isRequired,classes:xt.a.string.isRequired,onChange:xt.a.func.isRequired});var MA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jA(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=kA(t);if(AA()){var r=kA(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return IA(this,e)});function a(){var e;TA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return LA(xA(e=i.call.apply(i,[this].concat(n))),"deleteRow",(function(t){t.preventDefault(),e.props.removeAnalyzerRow(e.props.rowIndex)})),LA(xA(e),"getFieldNameHeading",(function(t){return 0===e.props.rowIndex&&se.a.createElement("label",{htmlFor:t},"Fieldname")})),LA(xA(e),"changeFieldName",(function(t){e.props.setAnalyzerRowFieldName({rowIndex:e.props.rowIndex,fieldName:t.target.value})})),LA(xA(e),"selectAnalyzer",(function(t){e.props.setAnalyzer({rowIndex:e.props.rowIndex,analyzer:t.target.value})})),e}return n=a,(r=[{key:"render",value:function(){var e="analyzer-row-"+this.props.rowIndex,t=0===this.props.rowIndex?"Analyzer":"",n="span12";return this.props.showErrors&&!this.props.row.valid&&(n+=" unhappy"),se.a.createElement("li",null,se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span4"},this.getFieldNameHeading(e),se.a.createElement("input",{type:"text",value:this.props.row.fieldName,className:n,onChange:this.changeFieldName})),se.a.createElement(RA,{id:e,label:t,defaultSelected:this.props.row.analyzer,classes:"span4",onChange:this.selectAnalyzer}),se.a.createElement("div",{className:"span4"},se.a.createElement("button",{className:"btn btn-danger delete-analyzer",onClick:this.deleteRow},"delete"))))}}])&&PA(n.prototype,r),o&&PA(n,o),a}(se.a.Component);function UA(e){return(UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VA(e,t){return!t||"object"!==UA(t)&&"function"!=typeof t?FA(e):t}function FA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function KA(e){return(KA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HA(e,t){return(HA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}LA(MA,"propTypes",{rowIndex:xt.a.number.isRequired,row:xt.a.object.isRequired,showErrors:xt.a.bool.isRequired,removeAnalyzerRow:xt.a.func.isRequired,setAnalyzerRowFieldName:xt.a.func.isRequired,setAnalyzer:xt.a.func.isRequired});var GA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HA(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=KA(t);if(BA()){var r=KA(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return VA(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),zA(FA(t=i.call(this,e)),"addRow",(function(e){e.preventDefault(),t.props.addAnalyzerRow(t.props.defaultAnalyzer)})),zA(FA(t),"getRows",(function(){return t.props.fields.map((function(e,n){return se.a.createElement(MA,{row:e,key:e.key,rowIndex:n,showErrors:t.state.showErrors,setAnalyzer:t.props.setAnalyzer,setAnalyzerRowFieldName:t.props.setAnalyzerRowFieldName,removeAnalyzerRow:t.props.removeAnalyzerRow})}))})),zA(FA(t),"validate",(function(){t.setState({showErrors:!0});var e=!1,n=[],r=t.props.fields.every((function(t){return-1!==n.indexOf(t.fieldName)&&(e=!0),n.push(t.fieldName),t.valid}));return r&&!e||oe.addNotification({msg:"Fieldnames cannot be empty and must be unique.",type:"error",clear:!0}),r})),t.state={showErrors:!1},t}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",null,se.a.createElement(RA,{label:"Default",id:"defaultAnalyzer",defaultSelected:this.props.defaultAnalyzer,onChange:this.props.selectDefaultMultipleAnalyzer,isValidating:this.validate}),se.a.createElement("ul",{id:"analyzer-fields",className:"unstyled"},this.getRows()),se.a.createElement("button",{className:"addfield btn btn-small btn-primary",onClick:this.addRow},"Add Field"))}}])&&qA(n.prototype,r),o&&qA(n,o),a}(se.a.Component);function WA(e){return(WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JA(e,t){return!t||"object"!==WA(t)&&"function"!=typeof t?YA(e):t}function YA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ZA(e){return(ZA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ek(e,t){return(ek=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zA(GA,"propTypes",{addAnalyzerRow:xt.a.func.isRequired,defaultAnalyzer:xt.a.string.isRequired,selectDefaultMultipleAnalyzer:xt.a.func.isRequired,fields:xt.a.array.isRequired});var nk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ek(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ZA(t);if($A()){var r=ZA(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return JA(this,e)});function a(){var e;XA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tk(YA(e=i.call.apply(i,[this].concat(n))),"selectAnalyzerType",(function(t){e.props.setAnalyzerType(t.target.value)})),tk(YA(e),"validate",(function(){return e.props.analyzerType===Kx||e.analyzerMultiple.validate()})),tk(YA(e),"getAnalyzerFieldsAsObject",(function(){return e.props.analyzerFields.reduce((function(e,t){return e[t.fieldName.replace(/["']/g,"")]=t.analyzer,e}),{})})),tk(YA(e),"getInfo",(function(){return e.props.analyzerType===Kx?e.props.singleAnalyzer:{name:"perfield",default:e.props.defaultMultipleAnalyzer,fields:e.getAnalyzerFieldsAsObject()}})),tk(YA(e),"selectSingleAnalyzer",(function(t){e.props.setSingleAnalyzer(t.target.value)})),tk(YA(e),"selectDefaultMultipleAnalyzer",(function(t){e.props.setDefaultMultipleAnalyzer(t.target.value)})),tk(YA(e),"getAnalyzerType",(function(){return e.props.analyzerType===Kx?se.a.createElement(RA,{label:"Type",defaultSelected:e.props.singleAnalyzer,onChange:e.selectSingleAnalyzer}):se.a.createElement(GA,{ref:function(t){return e.analyzerMultiple=t},defaultAnalyzer:e.props.defaultMultipleAnalyzer,selectDefaultMultipleAnalyzer:e.selectDefaultMultipleAnalyzer,fields:e.props.analyzerFields,addAnalyzerRow:e.props.addAnalyzerRow,removeAnalyzerRow:e.props.removeAnalyzerRow,setAnalyzerRowFieldName:e.props.setAnalyzerRowFieldName,setAnalyzer:e.props.setAnalyzer})})),e}return n=a,(r=[{key:"render",value:function(){var e="btn";this.props.analyzerType===Hx&&(e+=" active");var t="btn";return this.props.analyzerType===Kx&&(t+=" active"),se.a.createElement("div",{className:"well"},se.a.createElement("div",{className:"control-group"},se.a.createElement("label",{htmlFor:"search-analyzer"},"Analyzer"),se.a.createElement("div",{className:"btn-group toggle-btns",id:"analyzer"},se.a.createElement("label",{style:{width:"82px"},htmlFor:"single-analyzer",className:t},"Single"),se.a.createElement("input",{type:"radio",id:"single-analyzer",name:"search-analyzer",value:"single",checked:this.props.analyzerType===Kx,onChange:this.selectAnalyzerType}),se.a.createElement("input",{type:"radio",id:"multiple-analyzer",name:"search-analyzer",value:"multiple",checked:this.props.analyzerType===Hx,onChange:this.selectAnalyzerType}),se.a.createElement("label",{style:{width:"82px"},htmlFor:"multiple-analyzer",className:e},"Multiple"))),this.getAnalyzerType())}}])&&QA(n.prototype,r),o&&QA(n,o),a}(se.a.Component);function rk(e){return(rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ok(){return(ok=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ik(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ak(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ck(e,t){return!t||"object"!==rk(t)&&"function"!=typeof t?sk(e):t}function sk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lk(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function uk(e){return(uk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pk(e,t){return(pk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tk(nk,"propTypes",{analyzerType:xt.a.string.isRequired,analyzerFields:xt.a.array.isRequired,defaultMultipleAnalyzer:xt.a.string.isRequired,singleAnalyzer:xt.a.string.isRequired,setAnalyzerType:xt.a.func.isRequired,setSingleAnalyzer:xt.a.func.isRequired,setDefaultMultipleAnalyzer:xt.a.func.isRequired,addAnalyzerRow:xt.a.func.isRequired});var dk=Dl.DesignDocSelector,mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pk(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=uk(t);if(lk()){var r=uk(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ck(this,e)});function a(){var e;ik(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fk(sk(e=i.call.apply(i,[this].concat(n))),"updateSearchIndexName",(function(t){e.props.setSearchIndexName(t.target.value)})),fk(sk(e),"saveIndex",(function(t){if(t.preventDefault(),e.designDocSelector.validate()&&e.analyzer.validate())if(e.props.searchIndexName.trim()){var n=e.props.saveDoc.id.replace(/_design\//,""),r=e.props.partitionKey?encodeURIComponent(e.props.partitionKey):"",o=oe.urls("search","fragment",encodeURIComponent(e.props.database.id),r,encodeURIComponent(n),encodeURIComponent(e.props.searchIndexName));e.props.saveSearchIndex(e.props.saveDoc,{isCreatingIndex:e.props.isCreatingIndex,indexName:e.props.searchIndexName,designDocs:e.props.designDocs,database:e.props.database,indexFunction:e.getIndexFunction(),analyzerInfo:e.analyzer.getInfo(),lastSavedSearchIndexName:e.props.lastSavedSearchIndexName,lastSavedDesignDocName:e.props.lastSavedDesignDocName},o)}else oe.addNotification({msg:"Please enter the index name.",type:"error",clear:!0})})),fk(sk(e),"getIndexFunction",(function(){return e.searchIndexEditor.getValue()})),fk(sk(e),"getDesignDocList",(function(){return e.props.designDocs.map((function(e){return e.id}))})),e}return n=a,(r=[{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if(!this.props.lastSavedDesignDocName||this.props.isCreatingIndex)return"#"+oe.urls("allDocs","app",e,t);var n=this.props.lastSavedDesignDocName.replace(/^_design\//,""),r="_design/"+encodeURIComponent(n),o=encodeURIComponent(this.props.lastSavedSearchIndexName);return"#"+oe.urls("search","showIndex",e,t,r,o)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return se.a.createElement("div",{className:"search-index-page-loading"},se.a.createElement(Ra.LoadLines,null));if(!this.props.database)return null;var t=this.props.isCreatingIndex?"New Search Index":"Edit Search Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return se.a.createElement("form",{className:"form-horizontal search-query-save",id:"search-index"},se.a.createElement("h3",{className:"simple-header"},t),se.a.createElement(dk,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.getDesignDocList(),isDbPartitioned:this.props.isDbPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,selectedDesignDocName:this.props.ddocName,selectedDesignDocPartitioned:this.props.ddocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:ae.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),se.a.createElement("div",{className:"control-group"},se.a.createElement("label",{htmlFor:"search-name"},"Index name"),se.a.createElement("input",{type:"text",id:"search-name",value:this.props.searchIndexName,onChange:this.updateSearchIndexName})),se.a.createElement(Ra.CodeEditorPanel,{id:"search-function",className:"ace-editor-section",ref:function(t){return e.searchIndexEditor=t},title:"Search index function",allowZenMode:!1,docLink:ae.helpers.getDocUrl("SEARCH_INDEXES"),defaultCode:this.props.searchIndexFunction,blur:this.props.blur}),se.a.createElement(nk,ok({ref:function(t){return e.analyzer=t}},this.props)),se.a.createElement("div",{className:"control-group"},se.a.createElement("button",{id:"save-index",className:"btn btn-primary save",onClick:this.saveIndex},se.a.createElement("i",{className:"icon fonticon-ok-circled"}),n),se.a.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))}}])&&ak(n.prototype,r),o&&ak(n,o),a}(se.a.Component);function yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yk(Object(n),!0).forEach((function(t){bk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fk(mk,"defaultProps",{isCreatingIndex:!0,blur:function(){},isLoading:!0}),fk(mk,"propTypes",{isLoading:xt.a.bool,isCreatingIndex:xt.a.bool,database:xt.a.object.isRequired,saveDoc:xt.a.object.isRequired,newDesignDocName:xt.a.string,blur:xt.a.func,setSearchIndexName:xt.a.func.isRequired,searchIndexFunction:xt.a.string.isRequired,saveSearchIndex:xt.a.func.isRequired,selectDesignDoc:xt.a.func.isRequired,updateNewDesignDocName:xt.a.func.isRequired});var gk=hk({designDocs:new Backbone.Collection,database:{},loading:!0,ddocName:"new-doc",partitionKey:"",indexName:"",databaseName:""},_k()),vk=[];function Ek(){function e(){return Math.random().toString(36).substring(7)}for(var t=e();-1!==vk.indexOf(t);)t=e();return vk.push(t),t}function _k(){return{noResultsWarning:"",hasActiveQuery:!1,searchQuery:"",searchResults:void 0,searchPerformed:!1,newDesignDocName:"",newDesignDocPartitioned:!0,lastSavedSearchIndexName:"",searchIndexFunction:Xx,searchIndexName:zx,analyzerType:Gx,analyzerFields:[],singleAnalyzer:Wx,defaultMultipleAnalyzer:Wx}}function wk(e,t){var n=t.analyzer,r=t.fieldName,o=e.analyzerFields.slice();return o.push({key:Ek(),fieldName:r||"",analyzer:n,valid:r&&r.trim().length>0}),o}function Ok(e,t){var n=e.analyzerFields.slice();return t=parseInt(t,10),n.splice(t,1),n}function Sk(e,t){var n=t.fieldName,r=t.rowIndex,o=e.analyzerFields.slice(),i=parseInt(r,10);return o[i].fieldName=n,o[i].valid=""!==n,o}function Dk(e,t){var n=t.analyzer,r=t.rowIndex,o=e.analyzerFields.slice();return o[parseInt(r,10)].analyzer=n,o}function Nk(e,t){var n,r=t.database,o=t.designDocs,i=t.ddocInfo,a=t.indexName,c=o.find((function(e){return e.id===i.id})).dDocModel(),s=c.getAnalyzer(a);n=_.isString(s)?s:_.has(s,"default")?s.default:Gx;var l=[];return s&&s.fields&&Object.keys(s.fields).forEach((function(e){l.push({key:Ek(),fieldName:e||"",analyzer:s.fields[e],valid:!_.isUndefined(e)&&!_.isEmpty(e)})})),{loading:!1,searchPerformed:!1,database:r,designDocs:o,searchIndexName:a,ddocName:i.id,lastSavedSearchIndexName:a,lastSavedDesignDocName:i.id,searchIndexFunction:c.getIndex(a),analyzerType:c.analyzerType(a),singleAnalyzer:n,defaultMultipleAnalyzer:n,analyzerFields:l}}function Rk(e,t){if("new-doc"===e.ddocName){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new $x.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}var o=e.designDocs.find((function(t){return t.id===e.ddocName||t.id==="_design/"+e.ddocName}));return o?o.dDocModel():null}var Ck=Object(At.b)((function(e,t){var n,r,o,i=e.search,a=e.databases,c=(n=i,r=a.isDbPartitioned,!!(o=n.designDocs.find((function(e){return e.id===n.ddocName||e.id==="_design/"+n.ddocName})))&&fr.isDDocPartitioned(o.get("doc"),r));return{isCreatingIndex:t.isCreatingIndex,isLoading:i.loading,database:i.database,designDocs:i.designDocs,searchIndexFunction:i.searchIndexFunction,ddocName:i.ddocName,ddocPartitioned:c,lastSavedDesignDocName:i.lastSavedDesignDocName,lastSavedSearchIndexName:i.lastSavedSearchIndexName,searchIndexName:i.searchIndexName,analyzerType:i.analyzerType,analyzerFields:i.analyzerFields,analyzerFieldsObj:i.analyzerFieldsObj,defaultMultipleAnalyzer:i.defaultMultipleAnalyzer,singleAnalyzer:i.singleAnalyzer,saveDoc:Rk(i,a.isDbPartitioned),newDesignDocName:i.newDesignDocName,newDesignDocPartitioned:i.newDesignDocPartitioned,isDbPartitioned:a.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{setSearchIndexName:function(t){e(iA.setSearchIndexName(t))},saveSearchIndex:function(e,t,n){iA.saveSearchIndex(e,t,n)},selectDesignDoc:function(t){e(iA.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(iA.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(iA.updateNewDesignDocPartitioned(t))},setAnalyzerType:function(t){e(iA.setAnalyzerType(t))},setSingleAnalyzer:function(t){e(iA.setSingleAnalyzer(t))},setDefaultMultipleAnalyzer:function(t){e(iA.setDefaultMultipleAnalyzer(t))},addAnalyzerRow:function(t){e(iA.addAnalyzerRow(t))},removeAnalyzerRow:function(t){e(iA.removeAnalyzerRow(t))},setAnalyzerRowFieldName:function(t){e(iA.setAnalyzerRowFieldName(t))},setAnalyzer:function(t){e(iA.setAnalyzer(t))}}}))(mk),Tk=function(e){var t=e.section,n=e.database,r=e.indexName,o=e.ddocName,i=e.docURL,a=e.endpoint,c=e.dropDownLinks,s=e.designDocs,l=e.ddoc,u=e.selectedNavItem,p=e.partitionKey,f=e.onPartitionKeySelected,d=e.onGlobalModeSelected,m=e.globalMode;return se.a.createElement("div",{id:"dashboard",className:"with-sidebar"},se.a.createElement(Th,{hideQueryOptions:!0,docURL:i,endpoint:a,dbName:n.id,dropDownLinks:c,database:n,showPartitionKeySelector:"search"===t,partitionKey:p,onPartitionKeySelected:f,onGlobalModeSelected:d,globalMode:m}),se.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},se.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},se.a.createElement(Ju,{selectedNavItem:u,selectedPartitionKey:p})),se.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},se.a.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},se.a.createElement("div",{className:"search-index-content"},se.a.createElement("div",{className:"tab-content search-index-tab-content"},function(e,t,n,r,o,i,a){return"create"===e?se.a.createElement(Ck,{designDocs:o,ddoc:i,database:t,isCreatingIndex:!0,partitionKey:a}):"edit"===e?se.a.createElement(Ck,{database:t,indexName:n,ddocName:r,isCreatingIndex:!1,partitionKey:a}):se.a.createElement(hA,null)}(t,n,r,o,s,l,p)))))))};Tk.propTypes={section:xt.a.string.isRequired,docURL:xt.a.string,endpoint:xt.a.string,ddocName:xt.a.string,indexName:xt.a.string,dropDownLinks:xt.a.array.isRequired,database:xt.a.object.isRequired};var Pk=Tk,Ik=fs.extend({routes:{"database/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_search/:search/edit":{route:"editNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search/edit":{route:"edit",roles:["fx_loggedIn"]},"database/:database/new_search":"createNoPartition","database/:database/_partition/:partitionkey/new_search":"create","database/:database/new_search/:designDoc":"createNoPartition","database/:database/_partition/:partitionkey/new_search/:designDoc":"create"},initialize:function(e,t){this.databaseName=t[0],this.database=new qc.Model({id:this.databaseName}),this.data={database:new qc.Model({id:this.databaseName})},this.data.designDocs=new $x.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),Zc({database:this.data.database,designDocs:this.data.designDocs})},searchNoPartition:function(e,t,n,r){return this.search(e,"",t,n,r)},search:function(e,t,n,r,o){this.databaseName=e,this.ddocName=n,this.indexName=r;var i=new ds("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});ps(i);var a=this.getCrumbs(this.database);iA.dispatchInitSearchIndex({databaseName:e,partitionKey:t,designDoc:n,indexName:r,query:o}),Pt.fetchSelectedDatabaseInfo(e);var c=t?encodeURIComponent(t):"",s=oe.urls("search","apiurl",this.databaseName,c,this.ddocName,this.indexName,o||"*:*"),l=o?"?".concat(encodeURIComponent(o)):"";return se.a.createElement(Pk,{section:"search",dropDownLinks:a,endpoint:s,docURL:oe.constants.DOC_URLS.SEARCH_INDEXES,database:this.database,indexName:r,selectedNavItem:i,partitionKey:t,onPartitionKeySelected:function(t){var o=oe.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));oe.navigate("#/"+o+encodeURIComponent(r)+l)},onGlobalModeSelected:function(){var t=oe.urls("search","app",encodeURIComponent(e),encodeURIComponent(n));oe.navigate("#/"+t+encodeURIComponent(r)+l)},globalMode:""===t})},editNoPartition:function(e,t,n){return this.edit(e,"",t,n)},edit:function(e,t,n,r){var o=new ds("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});ps(o),iA.dispatchEditSearchIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs}),Pt.fetchSelectedDatabaseInfo(e);var i=this.getCrumbs(this.database);return se.a.createElement(Pk,{section:"edit",dropDownLinks:i,database:this.database,indexName:r,ddocName:n,selectedNavItem:o,partitionKey:t})},createNoPartition:function(e,t){return this.create(e,"",t)},create:function(e,t,n){var r=new ds("");iA.dispatchInitNewSearchIndex({database:this.database,designDocs:this.data.designDocs,defaultDDoc:n}),Pt.fetchSelectedDatabaseInfo(e);var o=this.getCrumbs(this.database);return se.a.createElement(Pk,{section:"create",dropDownLinks:o,database:this.database,designDocs:this.data.designDocs,ddoc:n,selectedNavItem:r,partitionKey:t})},getCrumbs:function(e){return[{type:"back",link:"/_all_dbs"},{name:e.id}]}});$x.RouteObjects=[Ik];var xk=$x;n(619);function Ak(e){return e?"/_partition/"+e:""}xk.initialize=function(){E(R.getServerUrl("/")).then((function(e){return e.features&&-1!==e.features.indexOf("search")})).catch((function(){return!1})).then((function(e){e&&(oe.registerExtension("sidebar:list",{selector:"indexes",name:"Search Indexes",urlNamespace:"search",indexLabel:"search index",onDelete:iA.deleteSearchIndex,onClone:iA.cloneSearchIndex,onEdit:iA.gotoEditSearchIndexPage}),oe.registerExtension("sidebar:links",{title:"New Search Index",url:"new_search",icon:"fonticon-plus-circled",showForPartitionedDDocs:!0}),oe.registerExtension("sidebar:newLinks",{url:"new_search",name:"Search Index"}),oe.registerExtension("IndexTypes:propNames","indexes"),oe.registerExtension("mango:indexTemplates",Qx))}))},oe.registerUrls("partitioned_search",{app:function(e,t,n){return"database/"+e+Ak(t)+"/_design/"+n+"/_search/"}}),oe.registerUrls("search",{server:function(e,t,n,r,o){return R.getServerUrl("/"+e+Ak(t)+"/_design/"+n+"/_search/"+r+o)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_search/"},edit:function(e,t,n,r){return"database/"+e+Ak(t)+"/_design/"+n+"/_search/"+r+"/edit"},fragment:function(e,t,n,r){return"database/"+e+Ak(t)+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return"database/"+e+Ak(t)+"/"+n+"/_search/"+r},apiurl:function(e,t,n,r,o){return window.location.origin+"/"+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)+"?q="+encodeURIComponent(o)}}),oe.addReducers({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gk,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Mx:return hk({},e,{loading:n.loading});case Ex:var r=hk({},e,{loading:!1,designDocs:n.designDocs,database:n.database},_k());return n.defaultDDoc&&(r.ddocName="_design/"+n.defaultDDoc),r;case Ox:return hk({},e,{searchIndexName:n.value});case Sx:return hk({},e,{analyzerType:n.value});case jx:return hk({},e,{singleAnalyzer:n.analyzer});case Dx:return hk({},e,{analyzerFields:wk(e,n)});case xx:return hk({},e,{hasActiveQuery:!0});case Ax:return hk({},e,{hasActiveQuery:!1,searchResults:[]});case Lx:return hk({},e,{searchQuery:n.query});case Ix:return hk({},e,{searchResults:n.searchResults,hasActiveQuery:!1,searchPerformed:!0});case Nx:return hk({},e,{analyzerFields:Ok(e,n.rowIndex)});case Rx:return hk({},e,{analyzerFields:Sk(e,n)});case Cx:return hk({},e,{analyzerFields:Dk(e,n)});case Tx:return hk({},e,{defaultMultipleAnalyzer:n.analyzer});case Px:return hk({},e,{},Nk(0,n));case kx:return hk({},e,{ddocName:n.value});case Ux:return hk({},gk,{designDocs:new Backbone.Collection});case _x:return hk({},e,{loading:!1,databaseName:n.databaseName,partitionKey:n.partitionKey,ddocName:n.ddocName,indexName:n.indexName,searchQuery:n.searchQuery,searchResults:""===n.searchQuery?void 0:e.searchResults,noResultsWarning:""});case qx:return hk({},e,{newDesignDocName:n.value});case Vx:return hk({},e,{newDesignDocPartitioned:n.value});case Fx:return hk({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case Bx:return hk({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});default:return e}}});var kk=xk;n(620);function jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jk(Object(n),!0).forEach((function(t){Mk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uk={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""};var qk=oe.addon();qk.initialize=function(){},oe.addReducers({cors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uk,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aC:var n=t.options;return Lk({},e,{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==c.a.indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case sC:return Lk({},e,{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case lC:return Lk({},e,{deleteDomainModalVisible:!1,domainToDelete:""});case cC:return Lk({},e,{isLoading:t.isLoading});default:return e}}});var Vk=qk,Fk=function(e){var t=e.removeItem,n=e.section,r=e.type,o=e.value;return se.a.createElement("li",{className:"permissions__entry"},se.a.createElement("span",null,o),se.a.createElement("button",{onClick:function(){return t(n,r,o)},type:"button",className:"pull-right close"},"×"))};Fk.propTypes={value:xt.a.string.isRequired,removeItem:xt.a.func.isRequired};var Bk=Fk;function Kk(e){return(Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gk(e,t){return!t||"object"!==Kk(t)&&"function"!=typeof t?Wk(e):t}function Wk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xk(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qk(e){return(Qk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jk(e,t){return(Jk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $k=ae.helpers.getDocUrl,Zk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jk(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Qk(t);if(Xk()){var r=Qk(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Gk(this,e)});function a(){var e;Hk(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yk(Wk(e=i.call.apply(i,[this].concat(n))),"state",{newRole:"",newName:""}),Yk(Wk(e),"getHelp",(function(){return e.props.section,"Database members can access the database. If no members are defined, the database is public. "})),Yk(Wk(e),"isEmptyValue",(function(e,t){return!!c.a.isEmpty(e)&&(oe.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)})),Yk(Wk(e),"addNames",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newName,"names")||(e.props.addItem({type:"names",section:e.props.section,value:e.state.newName}),e.setState({newName:""}))})),Yk(Wk(e),"addRoles",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newRole,"roles")||(e.props.addItem({type:"roles",section:e.props.section,value:e.state.newRole}),e.setState({newRole:""}))})),Yk(Wk(e),"getItems",(function(t,n){return t.map((function(t,r){return se.a.createElement(Bk,{key:r,value:t,section:e.props.section,type:n,removeItem:e.props.removeItem})}))})),Yk(Wk(e),"getNames",(function(){return e.getItems(e.props.names,"names")})),Yk(Wk(e),"getRoles",(function(){return e.getItems(e.props.roles,"roles")})),Yk(Wk(e),"nameChange",(function(t){e.setState({newName:t.target.value})})),Yk(Wk(e),"roleChange",(function(t){e.setState({newRole:t.target.value})})),e}return n=a,(r=[{key:"render",value:function(){var e=this.props.section;return se.a.createElement("div",{className:"permissions__"+e},se.a.createElement("header",{className:"page-header"},se.a.createElement("h3",null,e),se.a.createElement("p",{className:"help"},this.getHelp(),se.a.createElement("a",{className:"help-link","data-bypass":"true",href:$k("DB_PERMISSION"),target:"_blank",rel:"noopener noreferrer"},se.a.createElement("i",{className:"icon-question-sign"})))),se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span6"},se.a.createElement("header",null,se.a.createElement("h4",null,"Users"),se.a.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),se.a.createElement("form",{onSubmit:this.addNames,className:"permission-item-form permissions-add-user form-inline"},se.a.createElement("input",{onChange:this.nameChange,value:this.state.newName,type:"text",className:"item input-small",placeholder:"Username"}),se.a.createElement("button",{type:"submit",className:"btn btn-primary"},se.a.createElement("i",{className:"icon fonticon-plus-circled"})," Add User")),se.a.createElement("ul",{className:"unstyled permission-items span10"},this.getNames())),se.a.createElement("div",{className:"span6"},se.a.createElement("header",null,se.a.createElement("h4",null,"Roles"),se.a.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),se.a.createElement("form",{onSubmit:this.addRoles,className:"permission-item-form permissions-add-role form-inline"},se.a.createElement("input",{onChange:this.roleChange,value:this.state.newRole,type:"text",className:"item input-small",placeholder:"Role"}),se.a.createElement("button",{type:"submit",className:"btn btn-primary"},se.a.createElement("i",{className:"icon fonticon-plus-circled"})," Add Role")),se.a.createElement("ul",{className:"unstyled permission-items span10"},this.getRoles()))))}}])&&zk(n.prototype,r),o&&zk(n,o),a}(se.a.Component);Yk(Zk,"defaultProps",{names:[],roles:[]});var ej=Zk;function tj(e,t,n,r){return!!e[t]&&(!!e[t][n]&&-1!==e[t][n].indexOf(r))}var nj=function(e){return{type:"PERMISSIONS_UPDATE",permissions:e}},rj=function(e,t,n,r,o){return function(i){!function(e,t,n,r){if(tj(e,t,n,r))throw new Error("Role/Name has already been added");(function(e,t,n,r){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(r)})(e,t,n,r)}(t,n,r,o),ij(e,t,i).catch((function(e){oe.addNotification({msg:e.message,type:"error"})}))}},oj=function(e,t,n,r,o){return function(i){!function(e,t,n,r){if(!tj(e,t,n,r))throw new Error("Role/Name does not exist");e[t][n]=e[t][n].filter((function(e){return e!==r}))}(t,n,r,o),ij(e,t,i).catch((function(e){oe.addNotification({msg:e.message,type:"error"})}))}},ij=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!e.ok)throw new Error(e.reason);return e})).then((function(){return oe.addNotification({msg:"Database permissions has been updated."}),n(nj(t))})).catch((function(e){oe.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})}))};function aj(e){return(aj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sj(e,t){return!t||"object"!==aj(t)&&"function"!=typeof t?lj(e):t}function lj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uj(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pj(e){return(pj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fj(e,t){return(fj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fj(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=pj(t);if(uj()){var r=pj(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return sj(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).addItem=t.addItem.bind(lj(t)),t.removeItem=t.removeItem.bind(lj(t)),t}return n=a,(r=[{key:"addItem",value:function(e){var t=e.section,n=e.type,r=e.value;if(tj(this.props.security,t,n,r))return oe.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch(rj(this.props.url,this.props.security,t,n,r))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch(oj(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,r=e.memberRoles,o=e.memberNames,i=e.readerRoles,a=e.readerNames,c=e.writerRoles,s=e.writerNames;return se.a.createElement("div",{className:"permissions-page flex-body"},se.a.createElement("div",null,se.a.createElement(ej,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),se.a.createElement(ej,{roles:r,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"}),se.a.createElement(ej,{roles:i,names:a,addItem:this.addItem,removeItem:this.removeItem,section:"readers"}),se.a.createElement(ej,{roles:c,names:s,addItem:this.addItem,removeItem:this.removeItem,section:"writers"})))}}])&&cj(n.prototype,r),o&&cj(n,o),a}(ce.Component);function mj(e){return(mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hj(e,t){return!t||"object"!==mj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bj(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function gj(e){return(gj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vj(e,t){return(vj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}dj.propTypes={security:xt.a.object.isRequired};var Ej=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vj(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=gj(t);if(bj()){var r=gj(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return hj(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatch)(function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.error&&e.reason)throw t(nj({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(nj(e))})).catch((function(e){oe.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})}))}}(e.url))}},{key:"render",value:function(){return this.props.isLoading?se.a.createElement(Lo,null):se.a.createElement(dj,this.props)}}])&&yj(n.prototype,r),o&&yj(n,o),a}(ce.Component);function _j(){return(_j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Ej.propTypes={isLoading:xt.a.bool.isRequired,adminRoles:xt.a.array.isRequired,adminNames:xt.a.array.isRequired,memberNames:xt.a.array.isRequired,memberRoles:xt.a.array.isRequired,readerNames:xt.a.array.isRequired,readerRoles:xt.a.array.isRequired,writerNames:xt.a.array.isRequired,writerRoles:xt.a.array.isRequired,security:xt.a.object.isRequired};var wj={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[],readerNames:[],readerRoles:[],writerNames:[],writerRoles:[]};function Oj(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function Sj(e,t){return t[e]&&t[e].names?t[e].names:[]}var Dj=function(e){return e.security},Nj=function(e){return e.adminRoles},Rj=function(e){return e.adminNames},Cj=function(e){return e.memberNames},Tj=function(e){return e.memberRoles},Pj=function(e){return e.readerNames},Ij=function(e){return e.readerRoles},xj=function(e){return e.writerNames},Aj=function(e){return e.writerRoles},kj=Object(At.b)((function(e){var t,n=e.permissions;return{isLoading:(t=n,t.isLoading),adminRoles:Nj(n),adminNames:Rj(n),memberNames:Cj(n),memberRoles:Tj(n),readerNames:Pj(n),readerRoles:Ij(n),writerNames:xj(n),writerRoles:Aj(n),security:Dj(n)}}))(Ej),jj=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,i=e.dropDownLinks,a=e.partitionKey,c=new ds("permissions");return se.a.createElement("div",{id:"dashboard",className:"with-sidebar"},se.a.createElement(Th,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:r,dbName:o,dropDownLinks:i,database:n}),se.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},se.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},se.a.createElement(Ju,{selectedNavItem:c,selectedPartitionKey:a})),se.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},se.a.createElement(kj,{url:r}))))},Lj={RouteObjects:[fs.extend({roles:["fx_loggedIn"],routes:{"database/:database/_partition/:partitionKey/permissions":{route:"permissions",roles:["fx_loggedIn"]},"database/:database/permissions":{route:"permissions",roles:["fx_loggedIn"]}},initialize:function(){ae.getParams().include_docs=!0},permissions:function(e,t){this.database=new qc.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var n=[{name:this.database.id,link:qc.databaseUrl(e)},{name:"Permissions"}],r=encodeURIComponent(e),o=oe.urls("permissions","server",r);return se.a.createElement(jj,{docURL:oe.constants.DOC_URLS.DB_PERMISSION,endpoint:o,dbName:this.database.id,dropDownLinks:n,database:this.database,partitionKey:t})}})]};n(621);Lj.initialize=function(){},oe.addReducers({permissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PERMISSIONS_UPDATE":var n=t.permissions;return _j({},e,{isLoading:!1,security:n,adminRoles:Oj("admins",n),adminNames:Sj("admins",n),memberRoles:Oj("members",n),memberNames:Sj("members",n),readerRoles:Oj("readers",n),readerNames:Sj("readers",n),writerRoles:Oj("writers",n),writerNames:Sj("writers",n)});default:return e}}});var Mj=Lj,Uj=function(e){var t=e.message;oe.addNotification({msg:t,type:"error"})},qj=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e}))},Vj=function(e,t){return qj(!_.isEmpty(e),!_.isEmpty(t))},Fj=function(){oe.dispatch({type:"AUTH_HIDE_PASSWORD_MODAL"})};function Bj(e){return(Bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hj(e,t){return!t||"object"!==Bj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zj(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Gj(e){return(Gj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wj(e,t){return(Wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wj(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=Gj(t);if(zj()){var r=Gj(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Hj(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).state={username:"",password:""},e}return n=a,(r=[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:this.usernameField.value,t=this.props.testBlankPassword?this.props.testBlankPassword:this.passwordField.value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){!function(e,t,n){Vj(e,t)?bw.login({name:e,password:t}).then((function(e){if(e.error)return Uj({message:e.reason}),e;var t=ae.i18n.en_US["auth-logged-in"];if(t&&oe.addNotification({msg:t}),n&&-1===n.indexOf("login"))return oe.navigate(n);oe.navigate("/")})).catch(Uj):Uj({message:ae.i18n.en_US["auth-missing-credentials"]})}(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"render",value:function(){var e=this;return se.a.createElement("div",{className:"couch-login-wrapper"},se.a.createElement("div",{className:"row-fluid"},se.a.createElement("div",{className:"span12"},se.a.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},se.a.createElement("p",{className:"help-block"},"Enter your username and password."),se.a.createElement("input",{id:"username",type:"text",name:"username",ref:function(t){return e.usernameField=t},placeholder:"Username",size:"24",onChange:this.onUsernameChange.bind(this),value:this.state.username}),se.a.createElement("br",null),se.a.createElement("input",{id:"password",type:"password",name:"password",ref:function(t){return e.passwordField=t},placeholder:"Password",size:"24",onChange:this.onPasswordChange.bind(this),value:this.state.password}),se.a.createElement("br",null),se.a.createElement("button",{id:"submit",className:"btn btn-success",type:"submit"},"Log In")))))}}])&&Kj(n.prototype,r),o&&Kj(n,o),a}(se.a.Component);Xj.defaultProps={urlBack:""},Xj.propTypes={urlBack:xt.a.string.isRequired};var Qj=Xj;function Jj(e){return(Jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $j(e,t){return!t||"object"!==Jj(t)&&"function"!=typeof t?Zj(e):t}function Zj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function tL(e){return(tL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nL(e,t){return(nL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nL(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=tL(t);if(eL()){var r=tL(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return $j(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={password:""},t.authenticate=t.authenticate.bind(Zj(t)),t.onKeyPress=t.onKeyPress.bind(Zj(t)),t}return n=a,(r=[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=oe.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.onClose,o=t.submitBtnLabel,i=t.headerTitle,a=t.modalMessage;return this.props.visible?se.a.createElement(sn.f,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return r()}},se.a.createElement(sn.f.Header,{closeButton:!0},se.a.createElement(sn.f.Title,null,i)),se.a.createElement(sn.f.Body,null,a,se.a.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),se.a.createElement(sn.f.Footer,null,se.a.createElement("a",{className:"cancel-link",onClick:function(){return r()}},"Cancel"),se.a.createElement(Ra.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}])&&Yj(n.prototype,r),o&&Yj(n,o),a}(se.a.Component);rL.propTypes={visible:xt.a.bool.isRequired,modalMessage:xt.a.oneOfType([xt.a.string,xt.a.element]),onSubmit:xt.a.func.isRequired,onClose:xt.a.func.isRequired,submitBtnLabel:xt.a.string},rL.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:Fj,onSubmit:function(e,t,n){bw.login({name:e,password:t}).then((function(r){if(r.error)throw r;Fj(),n(e,t)})).catch((function(){oe.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})}))},onSuccess:function(){},submitBtnLabel:"Continue"};var oL=rL;function iL(e){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cL(e,t){return!t||"object"!==iL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sL(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lL(e){return(lL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uL(e,t){return(uL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uL(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=lL(t);if(sL()){var r=lL(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return cL(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={username:"",password:""},t}return n=a,(r=[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter,this.props.nodes)}},{key:"render",value:function(){var e=this;return se.a.createElement("div",{className:"faux__auth-page"},se.a.createElement("h3",null,"Create Admins"),se.a.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users. ",se.a.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),se.a.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),se.a.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},se.a.createElement("input",{id:"username",type:"text",ref:function(t){return e.usernameField=t},name:"name",placeholder:"Username",size:"24",onChange:this.onChangeUsername.bind(this)}),se.a.createElement("br",null),se.a.createElement("input",{id:"password",type:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this)}),se.a.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),se.a.createElement("button",{type:"submit",id:"create-admin",className:"btn btn-primary"},"Create Admin")))}}])&&aL(n.prototype,r),o&&aL(n,o),a}(se.a.Component);pL.propTypes={loginAfter:xt.a.bool.isRequired},pL.defaultProps={loginAfter:!1};var fL=Object(At.b)((function(e){return{nodes:e.clusters.nodes}}),{createAdmin:function(e,t,n,r){return function(){var o=r[0].node;if(!Vj(e,t))return Uj({message:ae.i18n.en_US["auth-missing-credentials"]});bw.createAdmin({name:e,password:t,node:o}).then((function(e){return e.error?Uj({message:"".concat(ae.i18n.en_US["auth-admin-creation-failed-prefix"]," ").concat(e.reason)}):(oe.addNotification({msg:ae.i18n.en_US["auth-admin-created"]}),n?oe.navigate("/login"):void 0)}))}}})(pL);function dL(e){return(dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yL(e,t){return!t||"object"!==dL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hL(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function bL(e){return(bL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gL(e,t){return(gL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gL(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=bL(t);if(hL()){var r=bL(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return yL(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={password:"",passwordConfirm:""},t}return n=a,(r=[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){this.passwordField.focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm,this.props.nodes)}},{key:"render",value:function(){var e=this;return se.a.createElement("div",{className:"faux__auth-page"},se.a.createElement("h3",null,"Change Password"),se.a.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},se.a.createElement("p",null,"Enter your new password."),se.a.createElement("input",{id:"password",type:"password",ref:function(t){return e.passwordField=t},name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this),value:this.state.password}),se.a.createElement("br",null),se.a.createElement("input",{id:"password-confirm",type:"password",name:"password_confirm",placeholder:"Verify Password",size:"24",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}),se.a.createElement("br",null),se.a.createElement("p",null,se.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Change"))))}}])&&mL(n.prototype,r),o&&mL(n,o),a}(se.a.Component),EL={LoginForm:Qj,PasswordModal:oL,CreateAdminForm:fL,ChangePasswordForm:Object(At.b)((function(e){return{nodes:e.clusters.nodes,username:oe.session.user().name}}),{changePassword:function(e,t,n,r){return function(){if(!function(e,t){return qj(!_.isEmpty(e),!_.isEmpty(t),e===t)}(t,n))return Uj({message:ae.i18n.en_US["auth-passwords-not-matching"]});bw.createAdmin({name:e,password:t,node:r[0].node}).then((function(){oe.addNotification({msg:ae.i18n.en_US["auth-change-password"]})}),Uj)}}})(vL)},_L=EL.CreateAdminForm,wL=EL.ChangePasswordForm,OL=function(e){var t=e.crumbs;return se.a.createElement("header",null,se.a.createElement("div",{className:"flex-layout flex-row"},se.a.createElement("div",{id:"breadcrumbs",className:"flex-body"},se.a.createElement(Xt,{crumbs:t}))))},SL=function(e){var t=e.crumbs,n=e.component;return se.a.createElement($t,null,se.a.createElement(OL,{crumbs:t}),se.a.createElement(en,null,n))},DL=function(e){var t=e.changePassword;return se.a.createElement(qi,null,se.a.createElement(Mi,{key:1,selected:t,text:"Change Password",onChange:function(){oe.navigate("#changePassword")}}),se.a.createElement(Mi,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){oe.navigate("#addAdmin")}}))},NL=function(e){var t=e.crumbs,n=e.changePassword,r=n?se.a.createElement(wL,null):se.a.createElement(_L,{loginAfter:!1});return se.a.createElement($t,null,se.a.createElement(OL,{crumbs:t}),se.a.createElement(en,null,se.a.createElement("div",{className:"template-content flex-body flex-layout flex-col"},se.a.createElement(DL,{changePassword:n}),se.a.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},r))))},RL=EL.LoginForm,CL=EL.CreateAdminForm,TL=[{name:"Log In to CouchDB"}],PL=[oe.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){P_.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return se.a.createElement(SL,{crumbs:TL,component:se.a.createElement(RL,{urlBack:ae.getParams().urlback})})},logout:function(){oe.addNotification({msg:"You have been logged out."}),bw.logout().then(bw.getSession).then((function(){return oe.navigate("/")})).catch(Uj)},createAdminForNode:function(){P_.fetchNodes();return se.a.createElement(SL,{crumbs:[{name:"Create Admin"}],component:se.a.createElement(CL,{loginAfter:!0})})}}),oe.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){P_.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){P_.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return P_.fetchNodes(),se.a.createElement(NL,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return P_.fetchNodes(),se.a.createElement(NL,{crumbs:[{name:"User Management"}],changePassword:!1})}})];n(622);function IL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(a.includes)(e,"_admin")}var AL=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new U.a((function(e,t){n._authenticateResolve=e,n._authenticateReject=t})),this._allowAdminParty=t.allowAdminParty}var t,n,r;return t=e,(n=[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:xL(e.roles)},Object(a.each)(this._onChange,(function(e){return e(t._user)}))),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return bw.getSession().then((function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())})).catch((function(t){e._authenticateReject(t)}))}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=Object(a.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return!0;var t=_.intersection(this.userRoles(),e).length;return t>0}}])&&IL(t.prototype,n),r&&IL(t,r),e}(),kL=function(){oe.removeHeaderLink({id:"auth",bottomNav:!0})};oe.setSession(new AL({allowAdminParty:!0}));var jL,LL,ML={initialize:function(){oe.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),oe.session.onChange((function(){var e,t=oe.session;t.isAdminParty()?(e={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},kL(),oe.addHeaderLink(e),oe.hideLogin()):t.isLoggedIn()?(e={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},kL(),oe.addHeaderLink(e),oe.showLogout()):(kL(),oe.showLogin())}))},RouteObjects:PL},UL=oe.addon(),qL=new gt.Model({id:"verifytestdb",name:"verifytestdb"}),VL=new gt.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"});UL.testProcess={saveDoc:function(){return(jL=new ht.Doc({_id:"test_doc_1",a:1},{database:qL})).save()},destroyDoc:function(){return jL.destroy()},updateDoc:function(){return jL.set({b:"hello"}),jL.save()},saveDB:function(){return qL.save()},setupDB:function(e){return new oe.Promise((function(t,n){e.fetch().then((function(){return e.destroy()}),(function(){t()})).then((function(){t()}),(function(e,t,r){n(new Error(r))}))}))},setup:function(){return oe.Promise.all([this.setupDB(qL),this.setupDB(VL)])},testView:function(){var e,t,n=new oe.Promise((function(n,r){e=n,t=r}));return E(LL.url()+"/_view/testview").then((function(e){if(e.error)throw new Error(e.reason||e.error);return e})).then((function(n){var r=(n=_.isString(n)?JSON.parse(n):n).rows[0];6===r.value&&e(),t(new Error("Values expect 6, got "+r.value))}),t),n},setupView:function(){var e=new ht.Doc({_id:"test_doc_10",a:1},{database:qL}),t=new ht.Doc({_id:"test_doc_20",a:2},{database:qL}),n=new ht.Doc({_id:"test_doc_30",a:3},{database:qL});return LL=new ht.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:qL}),oe.Promise.all([e.save(),t.save(),n.save(),LL.save()])},setupReplicate:function(){return O(R.getServerUrl("/_replicate"),{create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"}).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},testReplicate:function(){return new oe.Promise((function(e,t){VL.fetch().then((function(){var n=VL.get("doc_count");4!==n?t(new Error("Replication Failed, expected 4 docs got "+n)):e()}),t)}))},removeDBs:function(){VL.destroy(),qL.destroy()}};var FL=UL;function BL(e){return(BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zL(e,t){return!t||"object"!==BL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GL(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function WL(e){return(WL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XL(e,t){return(XL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XL(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=WL(t);if(GL()){var r=WL(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return zL(this,e)});function a(){return KL(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("button",{id:"start",className:"btn btn-primary",onClick:this.props.verify,disabled:this.props.isVerifying},this.props.isVerifying?"Verifying":"Verify Installation")}}])&&HL(n.prototype,r),o&&HL(n,o),a}(se.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(QL,"propTypes",{verify:xt.a.func.isRequired,isVerifying:xt.a.bool.isRequired});var JL={TESTS:{CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"}};function YL(e){return(YL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eM(e,t){return!t||"object"!==YL(t)&&"function"!=typeof t?tM(e):t}function tM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nM(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function rM(e){return(rM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oM(e,t){return(oM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oM(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=rM(t);if(nM()){var r=rM(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return eM(this,e)});function a(){var e;$L(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return iM(tM(e=i.call.apply(i,[this].concat(n))),"showTestResult",(function(t){return e.props.testResults[t].complete?e.props.testResults[t].success?se.a.createElement("span",null,"✓"):se.a.createElement("span",null,"✗"):""})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("table",{className:"table table-striped table-bordered"},se.a.createElement("thead",null,se.a.createElement("tr",null,se.a.createElement("th",null,"Test"),se.a.createElement("th",null,"Status"))),se.a.createElement("tbody",null,se.a.createElement("tr",null,se.a.createElement("td",null,"Create Database"),se.a.createElement("td",{id:"js-test-create-db"},this.showTestResult(JL.TESTS.CREATE_DATABASE))),se.a.createElement("tr",null,se.a.createElement("td",null,"Create Document"),se.a.createElement("td",{id:"js-test-create-doc"},this.showTestResult(JL.TESTS.CREATE_DOCUMENT))),se.a.createElement("tr",null,se.a.createElement("td",null,"Update Document"),se.a.createElement("td",{id:"js-test-update-doc"},this.showTestResult(JL.TESTS.UPDATE_DOCUMENT))),se.a.createElement("tr",null,se.a.createElement("td",null,"Delete Document"),se.a.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(JL.TESTS.DELETE_DOCUMENT))),se.a.createElement("tr",null,se.a.createElement("td",null,"Create View"),se.a.createElement("td",{id:"js-test-create-view"},this.showTestResult(JL.TESTS.CREATE_VIEW))),se.a.createElement("tr",null,se.a.createElement("td",null,"Replication"),se.a.createElement("td",{id:"js-test-replication"},this.showTestResult(JL.TESTS.REPLICATION)))))}}])&&ZL(n.prototype,r),o&&ZL(n,o),a}(se.a.Component);function cM(e){return(cM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lM(e,t){return!t||"object"!==cM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uM(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pM(e){return(pM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fM(e,t){return(fM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}iM(aM,"propTypes",{testResults:xt.a.object.isRequired});var dM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fM(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=pM(t);if(uM()){var r=pM(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return lM(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).props.resetTests(),t}return n=a,(r=[{key:"render",value:function(){return se.a.createElement("div",null,se.a.createElement(QL,{verify:this.props.startVerification,isVerifying:this.props.isVerifying}),se.a.createElement(aM,{testResults:this.props.testResults}))}}])&&sM(n.prototype,r),o&&sM(n,o),a}(se.a.Component),mM="VERIFY_INSTALL_START",yM="VERIFY_INSTALL_RESET",hM="VERIFY_INSTALL_SINGLE_TEST_COMPLETE",bM="VERIFY_INSTALL_ALL_TESTS_COMPLETE",gM=function(e,t){return function(){t({type:hM,test:e,success:!0})}},vM=!0,EM=function(e,t){return function(n){if(vM=!1,n){t({type:hM,test:e,success:!1});var r="n/a";n.responseText?r=JSON.parse(n.responseText).reason:n.message&&(r=n.message),oe.addNotification({msg:"Error: "+r,type:"error"})}}},_M=function(){return function(e){e({type:yM})}},wM=Object(At.b)((function(e){var t=e.verifyinstall;return{isVerifying:t.isVerifying,testResults:t.tests}}),(function(e){return{resetTests:function(){e(_M())},startVerification:function(){e(_M()),e((function(e){e({type:mM});var t=FL.testProcess;t.setup().then((function(){return t.saveDB().then(gM(JL.TESTS.CREATE_DATABASE,e))}),EM(JL.TESTS.CREATE_DATABASE,e)).then((function(){return t.saveDoc().then(gM(JL.TESTS.CREATE_DOCUMENT,e))}),EM(JL.TESTS.CREATE_DATABASE,e)).then((function(){return t.updateDoc().then(gM(JL.TESTS.UPDATE_DOCUMENT,e))}),EM(JL.TESTS.CREATE_DOCUMENT,e)).then((function(){return t.destroyDoc().then(gM(JL.TESTS.DELETE_DOCUMENT,e))}),EM(JL.TESTS.UPDATE_DOCUMENT,e)).then((function(){return t.setupView().then((function(){return t.testView().then(gM(JL.TESTS.CREATE_VIEW,e))}))}),EM(JL.TESTS.DELETE_DOCUMENT,e)).then((function(){return t.setupReplicate().then((function(){return t.testReplicate().then(gM(JL.TESTS.REPLICATION,e))}))}),EM(JL.TESTS.CREATE_VIEW,e)).then((function(){}),EM(JL.TESTS.REPLICATION,e)).then((function(){e({type:bM}),vM&&oe.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),t.removeDBs()}))}))}}}))(dM),OM=oe.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return se.a.createElement(nn,{component:se.a.createElement(wM,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});FL.RouteObjects=[OM];var SM=FL;function DM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DM(Object(n),!0).forEach((function(t){RM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CM={isVerifying:!1,tests:{}};function TM(e){var t=NM({},e);return Object.keys(t).forEach((function(e){t[e]={complete:!1}})),t}function PM(e,t,n){var r=NM({},e);if(!_.has(r,t))throw new Error("Invalid test name passed to updateTestStatus()");return r[t]={complete:!0,success:n},r}Object.keys(JL.TESTS).forEach((function(e){CM.tests[JL.TESTS[e]]={complete:!1}}));n(623);SM.initialize=function(){oe.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},oe.addReducers({verifyinstall:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CM,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mM:return NM({},e,{isVerifying:!0});case yM:return NM({},e,{tests:TM(e.tests)});case hM:return NM({},e,{tests:PM(e.tests,t.test,t.success)});case bM:return NM({},e,{isVerifying:!1});default:return e}}});var IM=SM,xM=[{title:"CouchDB Official Documentation — Online",link:"http://docs.couchdb.org/en/latest/",iconClassName:"couchdb-icon"},{title:"CouchDB Official Documentation — Offline",link:"./docs/index.html",iconClassName:"couchdb-icon"},{title:"CouchDB Weekly News",link:"http://blog.couchdb.org/",iconClassName:"couchdb-icon"},{title:"CouchDB Homepage",link:"https://couchdb.apache.org/",iconClassName:"couchdb-icon"},{title:"CouchDB on GitHub",link:"https://github.com/apache/couchdb",iconClassName:"github-icon"},{title:"Fauxton on GitHub",link:"https://github.com/apache/couchdb-fauxton",iconClassName:"github-icon"},{title:"Fauxton Visual Guide",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",iconClassName:"couchdb-icon"},{title:"The Apache Software Foundation",link:"http://www.apache.org/",iconClassName:"asf-feather-icon"},{title:"Follow CouchDB on Twitter",link:"https://twitter.com/couchdb",iconClassName:"twitter-icon"},{title:"Follow CouchDB on Google Plus",link:"https://plus.google.com/+CouchDB",iconClassName:"google-plus-icon"},{title:"Follow CouchDB on LinkedIn",link:"https://www.linkedin.com/company/apache-couchdb",iconClassName:"linkedin-icon"}],AM=function(e){var t=e.links,n=void 0===t?xM:t;return se.a.createElement("div",{id:"documentation-page",className:"scrollable"},se.a.createElement("div",{className:"links"},se.a.createElement("table",null,se.a.createElement("tbody",null,n.map((function(e){return se.a.createElement("tr",{key:e.title},se.a.createElement("td",{className:"icons-container"},se.a.createElement("div",{className:"icon "+e.iconClassName}," ")),se.a.createElement("td",null,se.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},e.title)))}))))))},kM=oe.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return se.a.createElement(nn,{component:se.a.createElement(AM,null),crumbs:[{name:"Documentation"}]})}});kM.RouteObjects=[kM];var jM=kM;n(624);jM.initialize=function(){oe.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})};var LM=[tt,{initialize:function(){}},qc,R_,TO,ED,jD,DC,vx,kk,Vk,Mj,ML,IM,jM];function MM(e){return(MM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VM(e,t){return!t||"object"!==MM(t)&&"function"!=typeof t?FM(e):t}function FM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BM(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function KM(e){return(KM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HM(e,t){return(HM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HM(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=KM(t);if(BM()){var r=KM(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return VM(this,e)});function a(){var e;UM(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zM(FM(e=i.call.apply(i,[this].concat(n))),"hide",(function(t){t&&t.preventDefault(),e.props.onStartHide(e.props.notificationId)})),zM(FM(e),"getMsg",(function(){return{__html:e.props.escape?_.escape(e.props.msg):e.props.msg}})),zM(FM(e),"onAnimationComplete",(function(){e.props.isHiding&&window.setTimeout((function(){return e.props.onHideComplete(e.props.notificationId)}))})),e}return n=a,(r=[{key:"componentWillUnmount",value:function(){this.timeout&&window.clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.hide,this.props.visibleTime)}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.notificationId;return 0===n.opacity&&this.props.isHiding&&this.onAnimationComplete(),se.a.createElement("div",{key:r.toString(),className:"notification-wrapper",style:{opacity:n.opacity,minHeight:n.minHeight+"px"}},se.a.createElement("div",{style:{opacity:n.opacity,minHeight:n.minHeight+"px"},className:"global-notification alert alert-"+this.props.type,ref:function(t){return e.notification=t}},se.a.createElement("a",{"data-bypass":!0,href:"#",onClick:this.hide},se.a.createElement("i",{className:"pull-right fonticon-cancel"})),se.a.createElement("i",{className:"notification-icon "+{error:"fonticon-attention-circled",info:"fonticon-info-circled",success:"fonticon-ok-circled"}[this.props.type]}),se.a.createElement("span",{dangerouslySetInnerHTML:this.getMsg()})))}}])&&qM(n.prototype,r),o&&qM(n,o),a}(se.a.Component);function WM(e){return(WM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JM(e,t){return!t||"object"!==WM(t)&&"function"!=typeof t?YM(e):t}function YM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ZM(e){return(ZM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eU(e,t){return(eU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zM(GM,"propTypes",{notificationId:xt.a.number.isRequired,msg:xt.a.string.isRequired,onStartHide:xt.a.func.isRequired,onHideComplete:xt.a.func.isRequired,type:xt.a.oneOf(["error","info","success"]),escape:xt.a.bool,isHiding:xt.a.bool.isRequired,visibleTime:xt.a.number}),zM(GM,"defaultProps",{type:"info",visibleTime:8e3,escape:!0});var nU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eU(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=ZM(t);if($M()){var r=ZM(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return JM(this,e)});function a(){var e;XM(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tU(YM(e=i.call.apply(i,[this].concat(n))),"onKeyDown",(function(t){27===(t.keyCode||t.which)&&e.props.hideAllVisibleNotifications()})),tU(YM(e),"getNotifications",(function(){return e.props.notifications.length?e.props.notifications.map((function(t,n){if(t.visible)return se.a.createElement(GM,{notificationId:t.notificationId,isHiding:t.isHiding,key:n,msg:t.msg,type:t.type,escape:t.escape,visibleTime:t.visibleTime,onStartHide:e.props.startHidingNotification,onHideComplete:e.props.hideNotification})})):null})),tU(YM(e),"getchildren",(function(t){var n=t.map((function(t){var n=t.key,r=t.data,o=t.style,i=r;return se.a.createElement(GM,{key:n,style:o,notificationId:i.notificationId,isHiding:i.isHiding,msg:i.msg,type:i.type,escape:i.escape,visibleTime:i.visibleTime,onStartHide:e.props.startHidingNotification,onHideComplete:e.props.hideNotification})}));return se.a.createElement("div",null,n)})),tU(YM(e),"getStyles",(function(t){return t||(t=[]),e.props.notifications.filter((function(e){return e.visible})).map((function(e){var n=!t.find((function(t){return t.key===e.notificationId.toString()}))&&{opacity:.5,minHeight:50};return n||e.isHiding?!n&&e.isHiding&&(n={opacity:Object(pi.spring)(0,pi.presets.stiff),minHeight:Object(pi.spring)(0,pi.presets.stiff)}):n={opacity:Object(pi.spring)(1,pi.presets.stiff),minHeight:Object(pi.spring)(64)},{key:e.notificationId.toString(),style:n,data:e}}))})),e}return n=a,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){return se.a.createElement("div",{id:"global-notifications",role:"alert"},se.a.createElement(pi.TransitionMotion,{styles:this.getStyles},this.getchildren))}}])&&QM(n.prototype,r),o&&QM(n,o),a}(se.a.Component);tU(nU,"propTypes",{notifications:xt.a.array.isRequired,hideAllVisibleNotifications:xt.a.func.isRequired,startHidingNotification:xt.a.func.isRequired,hideNotification:xt.a.func.isRequired});var rU=Object(At.b)((function(e){return{notifications:e.notifications.notifications}}),(function(e){return{startHidingNotification:function(t){e(function(e){return function(t){t({type:Me,options:{notificationId:e}})}}(t))},hideNotification:function(t){e(function(e){return function(t){t({type:Ue,options:{notificationId:e}})}}(t))},hideAllVisibleNotifications:function(){e((function(e){e({type:qe})}))}}}))(nU);function oU(e){return(oU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cU(e,t){return!t||"object"!==oU(t)&&"function"!=typeof t?sU(e):t}function sU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lU(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function uU(e){return(uU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pU(e,t){return(pU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dU=Ra.Copy,mU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pU(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=uU(t);if(lU()){var r=uU(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return cU(this,e)});function a(){var e;iU(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fU(sU(e=i.call.apply(i,[this].concat(n))),"clearNotification",(function(){var t=e.props.item.notificationId;e.props.clearSingleNotification(t)})),e}return n=a,(r=[{key:"render",value:function(){var e=this.props.item.time.fromNow(),t="fonticon "+{success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"}[this.props.item.type],n="all"!==this.props.filter&&this.props.filter!==this.props.item.type,r=this.props.style,o=r.opacity,i=r.height;return 0===o&&0===i?null:se.a.createElement("li",{style:{opactiy:o,height:i+"px",borderBottomColor:"rgba(34, 34, 34, ".concat(o,")")},"aria-hidden":n},se.a.createElement("div",{className:"flex-layout flex-row"},se.a.createElement("span",{className:t}),se.a.createElement("div",{className:"flex-body"},se.a.createElement("p",null,this.props.item.cleanMsg),se.a.createElement("div",{className:"notification-actions"},se.a.createElement("span",{className:"time-elapsed"},e),se.a.createElement("span",{className:"divider"},"|"),se.a.createElement(dU,{uniqueKey:np.a.v4(),text:this.props.item.cleanMsg,displayType:"text"}))),se.a.createElement("button",{type:"button",onClick:this.clearNotification},"×")))}}])&&aU(n.prototype,r),o&&aU(n,o),a}(se.a.Component);function yU(e){return(yU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gU(e,t){return!t||"object"!==yU(t)&&"function"!=typeof t?vU(e):t}function vU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EU(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _U(e){return(_U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wU(e,t){return(wU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fU(mU,"propTypes",{item:xt.a.object.isRequired,filter:xt.a.string.isRequired,clearSingleNotification:xt.a.func.isRequired});var SU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wU(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=_U(t);if(EU()){var r=_U(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return gU(this,e)});function a(){var e;hU(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return OU(vU(e=i.call.apply(i,[this].concat(n))),"getNotifications",(function(t){var n;return n=t.length||e.props.notifications.length?t.map((function(t){var n=t.key,r=t.data,o=t.style;return se.a.createElement(mU,{item:r,filter:e.props.filter,clearSingleNotification:e.props.clearSingleNotification,key:n,style:o})})):se.a.createElement("li",{className:"no-notifications"},"No notifications."),se.a.createElement("ul",{className:"notification-list"},n)})),OU(vU(e),"getStyles",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props.notifications.map((function(n){var r=!t.find((function(e){return e.key===n.notificationId.toString()}))&&{opacity:0,height:0};return r||n.type!==e.props.filter&&"all"!==e.props.filter?n.type!==e.props.filter&&(r={opacity:Object(pi.spring)(0,pi.presets.stiff),height:Object(pi.spring)(0,pi.presets.stiff)}):r={opacity:Object(pi.spring)(1,pi.presets.stiff),height:Object(pi.spring)(61,pi.presets.stiff)},{key:n.notificationId.toString(),style:r,data:n}}));return n})),e}return n=a,(r=[{key:"render",value:function(){var e=this;if(!this.props.isVisible&&0===this.props.style.x)return null;var t={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};t[this.props.filter]+=" selected";var n="notification-page-mask ".concat(this.props.isVisible?" visible":"");return se.a.createElement("div",{id:"notification-center"},se.a.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate(".concat(this.props.style.x,"px)")}},se.a.createElement("header",{className:"flex-layout flex-row"},se.a.createElement("span",{className:"fonticon fonticon-bell"}),se.a.createElement("h1",{className:"flex-body"},"Notifications"),se.a.createElement("button",{"aria-label":"Hide Notifications Center",type:"button",onClick:this.props.hideNotificationCenter},"×")),se.a.createElement("ul",{"aria-label":"Filters",className:"notification-filter flex-layout flex-row"},se.a.createElement("li",{className:t.all,title:"All notifications","data-filter":"all",onClick:function(){return e.props.selectNotificationFilter("all")}},"All"),se.a.createElement("li",{className:t.success,title:"Success notifications","data-filter":"success",onClick:function(){return e.props.selectNotificationFilter("success")}},se.a.createElement("span",{className:"fonticon fonticon-ok-circled"})),se.a.createElement("li",{className:t.error,title:"Error notifications","data-filter":"error",onClick:function(){return e.props.selectNotificationFilter("error")}},se.a.createElement("span",{className:"fonticon fonticon-attention-circled"})),se.a.createElement("li",{className:t.info,title:"Info notifications","data-filter":"info",onClick:function(){return e.props.selectNotificationFilter("info")}},se.a.createElement("span",{className:"fonticon fonticon-info-circled"}))),se.a.createElement("div",{className:"flex-body"},se.a.createElement(pi.TransitionMotion,{styles:this.getStyles},this.getNotifications)),se.a.createElement("footer",null,se.a.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:this.props.clearAllNotifications}))),se.a.createElement("div",{className:n,onClick:this.props.hideNotificationCenter}))}}])&&bU(n.prototype,r),o&&bU(n,o),a}(se.a.Component);function DU(e){return(DU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NU(){return(NU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function RU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TU(e,t){return!t||"object"!==DU(t)&&"function"!=typeof t?PU(e):t}function PU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IU(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function xU(e){return(xU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AU(e,t){return(AU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}OU(SU,"propTypes",{isVisible:xt.a.bool.isRequired,filter:xt.a.string.isRequired,notifications:xt.a.array.isRequired,hideNotificationCenter:xt.a.func.isRequired,selectNotificationFilter:xt.a.func.isRequired,clearAllNotifications:xt.a.func.isRequired,clearSingleNotification:xt.a.func.isRequired});var jU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AU(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=xU(t);if(IU()){var r=xU(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return TU(this,e)});function a(){var e;RU(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kU(PU(e=i.call.apply(i,[this].concat(n))),"getStyles",(function(){var t={key:"1",style:{x:320}};return e.props.isVisible?t.style={x:Object(pi.spring)(0)}:t.style={x:Object(pi.spring)(320)},[t]})),kU(PU(e),"getNotificationCenterPanel",(function(t){var n=t.map((function(t){var n=t.style;return se.a.createElement(SU,NU({key:"1",style:n},e.props))}));return se.a.createElement("aside",{"aria-label":"Notifications"},n)})),e}return n=a,(r=[{key:"render",value:function(){return se.a.createElement(pi.TransitionMotion,{styles:this.getStyles},this.getNotificationCenterPanel)}}])&&CU(n.prototype,r),o&&CU(n,o),a}(se.a.Component),LU=Object(At.b)((function(e){var t=e.notifications;return{isVisible:t.notificationCenterVisible,filter:t.selectedNotificationFilter,notifications:t.notifications}}),(function(e){return{hideNotificationCenter:function(){e((function(e){e({type:Ae})}))},selectNotificationFilter:function(t){e(function(e){return function(t){t({type:Le,options:{filter:e}})}}(t))},clearAllNotifications:function(){e((function(e){e({type:je})}))},clearSingleNotification:function(t){e(function(e){return function(t){t({type:ke,options:{notificationId:e}})}}(t))}}}))(jU);function MU(e){return(MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qU(e,t){return!t||"object"!==MU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VU(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function FU(e){return(FU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BU(e,t){return(BU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BU(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=FU(t);if(VU()){var r=FU(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return qU(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"getMsg",value:function(){return{__html:this.props.message}}},{key:"getContent",value:function(){return this.props.visible&&this.props.message?se.a.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()}):null}},{key:"render",value:function(){return se.a.createElement("div",{id:"perma-warning"},this.getContent())}}])&&UU(n.prototype,r),o&&UU(n,o),a}(se.a.Component);KU(HU,"defaultProps",{visible:!1}),KU(HU,"propTypes",{visible:xt.a.bool.isRequired,message:xt.a.string});var zU=Object(At.b)((function(e){var t=e.notifications;return{visible:t.permanentNotificationVisible,message:t.permanentNotificationMessage}}))(HU),GU=function(e){var t=e.version;return t?se.a.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on  ",se.a.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),se.a.createElement("div",null,"v. ",t)):null};GU.propTypes={version:xt.a.string};var WU=GU,XU=function(e){var t=e.toggleMenu,n=e.isMinimized,r=cn()("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return se.a.createElement("div",{"aria-expanded":!n,"aria-label":"Toggle Navigation Menu",className:r,onClick:t,role:"button",tabIndex:"0"},se.a.createElement("i",{"aria-hidden":"true",className:"faux-navbar__burger__icon "+o}))};XU.propTypes={toggleMenu:xt.a.func.isRequired,isMinimized:xt.a.bool.isRequired};var QU=XU,JU=function(e){var t=e.link,n=e.active,r=e.isMinimized,o=n===t.title,i=cn()("faux-navbar__link",{"faux-navbar__link--active":o},{"faux-navbar__link--inactive":!o},{"faux-navbar--wide":!r},{"faux-navbar--narrow":r}),a=r?null:se.a.createElement("span",{className:"faux-navbar__text"},t.title),c=null;return t.icon&&(c=se.a.createElement("i",{"aria-hidden":"true",className:cn()(t.icon,"fonticon faux-navbar__icon",{"faux-navbar__icon-badge":t.badge})})),se.a.createElement("a",{"aria-current":o?"page":null,"aria-label":t.title,className:i,href:t.href,target:t.target?"_blank":null,"data-bypass":t.target?"true":null},se.a.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},c,a))};JU.propTypes={link:xt.a.object.isRequired,active:xt.a.string,isMinimized:xt.a.bool.isRequired};var YU=JU,$U=function(e){var t=e.isMinimized,n=cn()("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return se.a.createElement("div",{className:"faux-navbar__brand"},se.a.createElement("div",{className:n}))};$U.propTypes={isMinimized:xt.a.bool.isRequired};var ZU=$U,eq=function(e){var t=e.username,n=e.isMinimized,r=cn()("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return se.a.createElement("a",{className:"faux-logout__link",href:"#/logout"},se.a.createElement("div",{className:r},se.a.createElement("span",{className:"faux-navbar__logout__text"},"Log Out")," ",n?null:se.a.createElement("span",{className:"faux-navbar__logout__username"},c.a.escape(t))))};eq.propTypes={username:xt.a.string,isMinimized:xt.a.bool.isRequired};var tq=eq,nq=function(e){var t=e.isMinimized,n=cn()("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return se.a.createElement("a",{className:"faux-login__link",href:"#/login"},se.a.createElement("div",{className:n},se.a.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};nq.propTypes={isMinimized:xt.a.bool.isRequired};var rq=nq;function oq(e){return(oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aq(e,t){return!t||"object"!==oq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cq(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function sq(e){return(sq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lq(e,t){return(lq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uq=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lq(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=sq(t);if(cq()){var r=sq(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return aq(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return n=a,(r=[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,r=t.isMinimized;return e.map((function(e,t){return se.a.createElement(YU,{key:t,link:e,active:n,isMinimized:r})}))}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,r=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,i=e.activeLink,a=e.username,c=e.isNavBarVisible,s=e.toggleNavbarMenu;if(!c)return null;var l=this.createLinks(this.props.navLinks),u=this.createLinks(this.props.bottomNavLinks),p=this.createLinks(this.props.footerNavLinks),f=cn()("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),d=o?se.a.createElement(rq,{active:i,isMinimized:t}):se.a.createElement(tq,{username:a,isMinimized:t});return se.a.createElement("div",{className:f},se.a.createElement("nav",null,se.a.createElement("div",{className:"faux-navbar__linkcontainer"},se.a.createElement(QU,{isMinimized:t,toggleMenu:s}),se.a.createElement("div",{className:"faux-navbar__links"},l,u),se.a.createElement("div",{className:"faux-navbar__footer"},se.a.createElement(ZU,{isMinimized:t}),se.a.createElement("div",null,p),se.a.createElement(WU,{version:n}),r?d:null))))}}])&&iq(n.prototype,r),o&&iq(n,o),a}(ce.Component);uq.propTypes={activeLink:xt.a.string,isMinimized:xt.a.bool.isRequired,version:xt.a.string,username:xt.a.string,navLinks:xt.a.array,bottomNavLinks:xt.a.array,footerNavLinks:xt.a.array,isNavBarVisible:xt.a.bool,isLoginSectionVisible:xt.a.bool.isRequired,isLoginVisibleInsteadOfLogout:xt.a.bool.isRequired,toggleNavbarMenu:xt.a.func.isRequired};var pq=uq,fq=Object(At.b)((function(e){var t=e.navigation,n=oe.session.user();return{navLinks:t.navLinks,bottomNavLinks:t.bottomNavLinks,footerNavLinks:t.footerNavLinks,activeLink:t.activeLink,version:t.version,isMinimized:t.isMinimized,isNavBarVisible:t.navBarVisible,isLoginSectionVisible:t.loginSectionVisible,isLoginVisibleInsteadOfLogout:t.loginVisibleInsteadOfLogout,username:n&&n.name?n.name:""}}),(function(e){return{toggleNavbarMenu:function(){e((function(e){e({type:ue})}))}}}))(pq);function dq(e){return(dq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hq(e,t,n){return t&&yq(e.prototype,t),n&&yq(e,n),e}function bq(e){return function(){var t,n=Eq(e);if(vq()){var r=Eq(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return gq(this,t)}}function gq(e,t){return!t||"object"!==dq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vq(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Eq(e){return(Eq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wq(e,t)}function wq(e,t){return(wq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oq=function(e){_q(n,e);var t=bq(n);function n(e){var r;return mq(this,n),(r=t.call(this,e)).state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&r.props.setNavbarActiveLink(r.state.routerOptions.selectedHeader),r}return hq(n,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",(function(t){e.setState({routerOptions:t}),e.props.setNavbarActiveLink(e.state.routerOptions.selectedHeader)})),this.props.router.on("trigger-update",(function(){e.forceUpdate()}))}},{key:"render",value:function(){if(!this.state.routerOptions)return null;var e=this.state.routerOptions.component;return e||null}}]),n}(se.a.Component),Sq=function(e){_q(n,e);var t=bq(n);function n(e){return mq(this,n),t.call(this,e)}return hq(n,[{key:"render",value:function(){var e=cn()({closeMenu:this.props.isPrimaryNavMinimized});return se.a.createElement("div",null,se.a.createElement(zU,null),se.a.createElement("div",{id:"notifications"},se.a.createElement(rU,null),se.a.createElement(LU,null)),se.a.createElement("div",{id:"main",className:e},se.a.createElement("div",{id:"app-container"},se.a.createElement("div",{className:"wrapper"},se.a.createElement("div",{role:"main",className:"pusher"},se.a.createElement(Oq,{router:this.props.router,setNavbarActiveLink:this.props.setNavbarActiveLink})),se.a.createElement("div",{id:"primary-navbar"},se.a.createElement(fq,null))))))}}]),n}(se.a.Component),Dq=Object(At.b)((function(e){return{isPrimaryNavMinimized:e.navigation.isMinimized}}),(function(e){return{setNavbarActiveLink:function(t){var n;e((n=t,function(e){e({type:he,name:n})}))}}}))(Sq),Nq=n(97),Rq=n(323);function Cq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oe.addMiddleware(Rq.a);var Tq,Pq=Object(Nq.d)(Object(Nq.c)(oe.reducers),Nq.a.apply(void 0,function(e){if(Array.isArray(e))return Cq(e)}(Tq=oe.middlewares)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(Tq)||function(e,t){if(e){if("string"==typeof e)return Cq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cq(e,t):void 0}}(Tq)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));oe.reduxDispatch=function(e){Pq.dispatch(e)},oe.reduxState=function(){return Pq.getState()},ae.addons=LM,oe.router=ae.router=new oe.Router(ae.addons),T.a.history.start({pushState:!1,root:ae.root}),"ActiveXObject"in window&&o.a.ajaxSetup({cache:!1});document.addEventListener("click",(function(e){var t=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null}(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var r=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,r.length)===r&&(e.preventDefault(),ae.router.navigate(n.attr,!0))}}})),z.a.render(se.a.createElement(At.a,{store:Pq},se.a.createElement(Dq,{router:ae.router})),document.getElementById("app"))}},[[324,1,2]]]);